var We=Object.defineProperty;var Ke=(n,e,s)=>e in n?We(n,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):n[e]=s;var De=(n,e,s)=>Ke(n,typeof e!="symbol"?e+"":e,s);import{R as d,r as p,d as ie,j as o}from"./index-OtPSfN_w.js";import{u as Je,A as Xe,b as qe,w as Ye}from"./components-C9-D01ZZ.js";import{M as _e,f as D,p as Ze,o as Qe,s as et,y as ue,e as A,K as xe,z as ve,A as tt,D as nt,E as at,F as rt,v as st,T as pe,j as Ue,B as X,I as j,G as Pe,w as it,W as ot,H as lt,J as ct,N as Be,P as $e,C as F,c as U,d as q,a as Me}from"./Page-CUdf0xBo.js";import{L as O}from"./Layout-CN1seCzE.js";import{S as dt,C as ut,B as G}from"./Banner-D_Rcuybh.js";import{S as pt}from"./Select-B40Z_D3S.js";import{D as ft}from"./DataTable-dk25Vxus.js";import{E as ht,p as mt,l as gt}from"./context-C9td0CMk.js";import{S as xt,F as vt}from"./context-Dqc0DVKX.js";import"./banner-context-Bfu3e4If.js";var oe=function(e){return d.createElement("svg",Object.assign({viewBox:"0 0 20 20"},e),d.createElement("path",{d:"M3.5 9.25a.75.75 0 0 0 1.5 0 3 3 0 0 1 3-3h6.566l-1.123 1.248a.75.75 0 1 0 1.114 1.004l2.25-2.5a.75.75 0 0 0-.027-1.032l-2.25-2.25a.75.75 0 1 0-1.06 1.06l.97.97h-6.44a4.5 4.5 0 0 0-4.5 4.5Z"}),d.createElement("path",{d:"M16.5 10.75a.75.75 0 0 0-1.5 0 3 3 0 0 1-3 3h-6.566l1.123-1.248a.75.75 0 1 0-1.114-1.004l-2.25 2.5a.75.75 0 0 0 .027 1.032l2.25 2.25a.75.75 0 0 0 1.06-1.06l-.97-.97h6.44a4.5 4.5 0 0 0 4.5-4.5Z"}))};oe.displayName="RefreshIcon";var he={Backdrop:"Polaris-Backdrop",transparent:"Polaris-Backdrop--transparent",belowNavigation:"Polaris-Backdrop--belowNavigation"};function Et(){const n=p.useContext(xt);if(!n)throw new _e("No ScrollLockManager was provided.");return n}function Ct(n){const e=Et();return p.useEffect(()=>(e.registerScrollLock(),()=>{e.unregisterScrollLock()}),[e]),null}function bt(n){const{onClick:e,onTouchStart:s,belowNavigation:t,transparent:a,setClosing:r}=n,i=D(he.Backdrop,t&&he.belowNavigation,a&&he.transparent),c=()=>{r&&r(!0)},l=()=>{r&&r(!1),e&&e()};return d.createElement(d.Fragment,null,d.createElement(Ct,null),d.createElement("div",{className:i,onClick:l,onTouchStart:s,onMouseDown:c}))}var St={InlineGrid:"Polaris-InlineGrid"};function jt({children:n,columns:e,gap:s,alignItems:t}){const a={...Qe("inline-grid","grid-template-columns",yt(e)),...Ze("inline-grid","gap","space",s),"--pc-inline-grid-align-items":t};return d.createElement("div",{className:St.InlineGrid,style:et(a)},n)}function yt(n){return typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.fromEntries(Object.entries(n).map(([e,s])=>[e,Te(s)])):Te(n)}function Te(n){if(n)return typeof n=="number"||!isNaN(Number(n))?`repeat(${Number(n)}, minmax(0, 1fr))`:typeof n=="string"?n:n.map(e=>{switch(e){case"oneThird":return"minmax(0, 1fr)";case"oneHalf":return"minmax(0, 1fr)";case"twoThirds":return"minmax(0, 2fr)"}}).join(" ")}const Nt=p.createContext(void 0),wt=p.memo(function({children:e,disabled:s,root:t}){return p.useEffect(()=>{if(s||!t)return;const a=kt(t)?t.current:t;!a||a.querySelector("[autofocus]")||ue(a,!1)},[s,t]),d.createElement(d.Fragment,null,e)});function kt(n){return n.current!==void 0}function le(){return le=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var t in s)({}).hasOwnProperty.call(s,t)&&(n[t]=s[t])}return n},le.apply(null,arguments)}function Se(n,e){if(n==null)return{};var s={};for(var t in n)if({}.hasOwnProperty.call(n,t)){if(e.indexOf(t)!==-1)continue;s[t]=n[t]}return s}function Ee(n,e){return Ee=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,t){return s.__proto__=t,s},Ee(n,e)}function je(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,Ee(n,e)}function Dt(n,e){return n.classList?!!e&&n.classList.contains(e):(" "+(n.className.baseVal||n.className)+" ").indexOf(" "+e+" ")!==-1}function Pt(n,e){n.classList?n.classList.add(e):Dt(n,e)||(typeof n.className=="string"?n.className=n.className+" "+e:n.setAttribute("class",(n.className&&n.className.baseVal||"")+" "+e))}function Fe(n,e){return n.replace(new RegExp("(^|\\s)"+e+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function Mt(n,e){n.classList?n.classList.remove(e):typeof n.className=="string"?n.className=Fe(n.className,e):n.setAttribute("class",Fe(n.className&&n.className.baseVal||"",e))}const Oe={disabled:!1},ce=d.createContext(null);var He=function(e){return e.scrollTop},Y="unmounted",R="exited",_="entering",z="entered",Ce="exiting",w=(function(n){je(e,n);function e(t,a){var r;r=n.call(this,t,a)||this;var i=a,c=i&&!i.isMounting?t.enter:t.appear,l;return r.appearStatus=null,t.in?c?(l=R,r.appearStatus=_):l=z:t.unmountOnExit||t.mountOnEnter?l=Y:l=R,r.state={status:l},r.nextCallback=null,r}e.getDerivedStateFromProps=function(a,r){var i=a.in;return i&&r.status===Y?{status:R}:null};var s=e.prototype;return s.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},s.componentDidUpdate=function(a){var r=null;if(a!==this.props){var i=this.state.status;this.props.in?i!==_&&i!==z&&(r=_):(i===_||i===z)&&(r=Ce)}this.updateStatus(!1,r)},s.componentWillUnmount=function(){this.cancelNextCallback()},s.getTimeouts=function(){var a=this.props.timeout,r,i,c;return r=i=c=a,a!=null&&typeof a!="number"&&(r=a.exit,i=a.enter,c=a.appear!==void 0?a.appear:i),{exit:r,enter:i,appear:c}},s.updateStatus=function(a,r){if(a===void 0&&(a=!1),r!==null)if(this.cancelNextCallback(),r===_){if(this.props.unmountOnExit||this.props.mountOnEnter){var i=this.props.nodeRef?this.props.nodeRef.current:ie.findDOMNode(this);i&&He(i)}this.performEnter(a)}else this.performExit();else this.props.unmountOnExit&&this.state.status===R&&this.setState({status:Y})},s.performEnter=function(a){var r=this,i=this.props.enter,c=this.context?this.context.isMounting:a,l=this.props.nodeRef?[c]:[ie.findDOMNode(this),c],u=l[0],h=l[1],v=this.getTimeouts(),x=c?v.appear:v.enter;if(!a&&!i||Oe.disabled){this.safeSetState({status:z},function(){r.props.onEntered(u)});return}this.props.onEnter(u,h),this.safeSetState({status:_},function(){r.props.onEntering(u,h),r.onTransitionEnd(x,function(){r.safeSetState({status:z},function(){r.props.onEntered(u,h)})})})},s.performExit=function(){var a=this,r=this.props.exit,i=this.getTimeouts(),c=this.props.nodeRef?void 0:ie.findDOMNode(this);if(!r||Oe.disabled){this.safeSetState({status:R},function(){a.props.onExited(c)});return}this.props.onExit(c),this.safeSetState({status:Ce},function(){a.props.onExiting(c),a.onTransitionEnd(i.exit,function(){a.safeSetState({status:R},function(){a.props.onExited(c)})})})},s.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},s.safeSetState=function(a,r){r=this.setNextCallback(r),this.setState(a,r)},s.setNextCallback=function(a){var r=this,i=!0;return this.nextCallback=function(c){i&&(i=!1,r.nextCallback=null,a(c))},this.nextCallback.cancel=function(){i=!1},this.nextCallback},s.onTransitionEnd=function(a,r){this.setNextCallback(r);var i=this.props.nodeRef?this.props.nodeRef.current:ie.findDOMNode(this),c=a==null&&!this.props.addEndListener;if(!i||c){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var l=this.props.nodeRef?[this.nextCallback]:[i,this.nextCallback],u=l[0],h=l[1];this.props.addEndListener(u,h)}a!=null&&setTimeout(this.nextCallback,a)},s.render=function(){var a=this.state.status;if(a===Y)return null;var r=this.props,i=r.children;r.in,r.mountOnEnter,r.unmountOnExit,r.appear,r.enter,r.exit,r.timeout,r.addEndListener,r.onEnter,r.onEntering,r.onEntered,r.onExit,r.onExiting,r.onExited,r.nodeRef;var c=Se(r,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return d.createElement(ce.Provider,{value:null},typeof i=="function"?i(a,c):d.cloneElement(d.Children.only(i),c))},e})(d.Component);w.contextType=ce;w.propTypes={};function V(){}w.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:V,onEntering:V,onEntered:V,onExit:V,onExiting:V,onExited:V};w.UNMOUNTED=Y;w.EXITED=R;w.ENTERING=_;w.ENTERED=z;w.EXITING=Ce;var Tt=function(e,s){return e&&s&&s.split(" ").forEach(function(t){return Pt(e,t)})},me=function(e,s){return e&&s&&s.split(" ").forEach(function(t){return Mt(e,t)})},ye=(function(n){je(e,n);function e(){for(var t,a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return t=n.call.apply(n,[this].concat(r))||this,t.appliedClasses={appear:{},enter:{},exit:{}},t.onEnter=function(c,l){var u=t.resolveArguments(c,l),h=u[0],v=u[1];t.removeClasses(h,"exit"),t.addClass(h,v?"appear":"enter","base"),t.props.onEnter&&t.props.onEnter(c,l)},t.onEntering=function(c,l){var u=t.resolveArguments(c,l),h=u[0],v=u[1],x=v?"appear":"enter";t.addClass(h,x,"active"),t.props.onEntering&&t.props.onEntering(c,l)},t.onEntered=function(c,l){var u=t.resolveArguments(c,l),h=u[0],v=u[1],x=v?"appear":"enter";t.removeClasses(h,x),t.addClass(h,x,"done"),t.props.onEntered&&t.props.onEntered(c,l)},t.onExit=function(c){var l=t.resolveArguments(c),u=l[0];t.removeClasses(u,"appear"),t.removeClasses(u,"enter"),t.addClass(u,"exit","base"),t.props.onExit&&t.props.onExit(c)},t.onExiting=function(c){var l=t.resolveArguments(c),u=l[0];t.addClass(u,"exit","active"),t.props.onExiting&&t.props.onExiting(c)},t.onExited=function(c){var l=t.resolveArguments(c),u=l[0];t.removeClasses(u,"exit"),t.addClass(u,"exit","done"),t.props.onExited&&t.props.onExited(c)},t.resolveArguments=function(c,l){return t.props.nodeRef?[t.props.nodeRef.current,c]:[c,l]},t.getClassNames=function(c){var l=t.props.classNames,u=typeof l=="string",h=u&&l?l+"-":"",v=u?""+h+c:l[c],x=u?v+"-active":l[c+"Active"],k=u?v+"-done":l[c+"Done"];return{baseClassName:v,activeClassName:x,doneClassName:k}},t}var s=e.prototype;return s.addClass=function(a,r,i){var c=this.getClassNames(r)[i+"ClassName"],l=this.getClassNames("enter"),u=l.doneClassName;r==="appear"&&i==="done"&&u&&(c+=" "+u),i==="active"&&a&&He(a),c&&(this.appliedClasses[r][i]=c,Tt(a,c))},s.removeClasses=function(a,r){var i=this.appliedClasses[r],c=i.base,l=i.active,u=i.done;this.appliedClasses[r]={},c&&me(a,c),l&&me(a,l),u&&me(a,u)},s.render=function(){var a=this.props;a.classNames;var r=Se(a,["classNames"]);return d.createElement(w,le({},r,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},e})(d.Component);ye.defaultProps={classNames:""};ye.propTypes={};function Ft(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Ne(n,e){var s=function(r){return e&&p.isValidElement(r)?e(r):r},t=Object.create(null);return n&&p.Children.map(n,function(a){return a}).forEach(function(a){t[a.key]=s(a)}),t}function Ot(n,e){n=n||{},e=e||{};function s(h){return h in e?e[h]:n[h]}var t=Object.create(null),a=[];for(var r in n)r in e?a.length&&(t[r]=a,a=[]):a.push(r);var i,c={};for(var l in e){if(t[l])for(i=0;i<t[l].length;i++){var u=t[l][i];c[t[l][i]]=s(u)}c[l]=s(l)}for(i=0;i<a.length;i++)c[a[i]]=s(a[i]);return c}function B(n,e,s){return s[e]!=null?s[e]:n.props[e]}function At(n,e){return Ne(n.children,function(s){return p.cloneElement(s,{onExited:e.bind(null,s),in:!0,appear:B(s,"appear",n),enter:B(s,"enter",n),exit:B(s,"exit",n)})})}function It(n,e,s){var t=Ne(n.children),a=Ot(e,t);return Object.keys(a).forEach(function(r){var i=a[r];if(p.isValidElement(i)){var c=r in e,l=r in t,u=e[r],h=p.isValidElement(u)&&!u.props.in;l&&(!c||h)?a[r]=p.cloneElement(i,{onExited:s.bind(null,i),in:!0,exit:B(i,"exit",n),enter:B(i,"enter",n)}):!l&&c&&!h?a[r]=p.cloneElement(i,{in:!1}):l&&c&&p.isValidElement(u)&&(a[r]=p.cloneElement(i,{onExited:s.bind(null,i),in:u.props.in,exit:B(i,"exit",n),enter:B(i,"enter",n)}))}}),a}var Lt=Object.values||function(n){return Object.keys(n).map(function(e){return n[e]})},Rt={component:"div",childFactory:function(e){return e}},we=(function(n){je(e,n);function e(t,a){var r;r=n.call(this,t,a)||this;var i=r.handleExited.bind(Ft(r));return r.state={contextValue:{isMounting:!0},handleExited:i,firstRender:!0},r}var s=e.prototype;return s.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},s.componentWillUnmount=function(){this.mounted=!1},e.getDerivedStateFromProps=function(a,r){var i=r.children,c=r.handleExited,l=r.firstRender;return{children:l?At(a,c):It(a,i,c),firstRender:!1}},s.handleExited=function(a,r){var i=Ne(this.props.children);a.key in i||(a.props.onExited&&a.props.onExited(r),this.mounted&&this.setState(function(c){var l=le({},c.children);return delete l[a.key],{children:l}}))},s.render=function(){var a=this.props,r=a.component,i=a.childFactory,c=Se(a,["component","childFactory"]),l=this.state.contextValue,u=Lt(this.state.children).map(i);return delete c.appear,delete c.enter,delete c.exit,r===null?d.createElement(ce.Provider,{value:l},u):d.createElement(ce.Provider,{value:l},d.createElement(r,c,u))},e})(d.Component);we.propTypes={};we.defaultProps=Rt;var ge={Body:"Polaris-Modal__Body",NoScrollBody:"Polaris-Modal__NoScrollBody",IFrame:"Polaris-Modal__IFrame"},Ae={Section:"Polaris-Modal-Section",titleHidden:"Polaris-Modal-Section--titleHidden"};function Ge({children:n,flush:e=!1,subdued:s=!1,titleHidden:t=!1}){const a=D(Ae.Section,t&&Ae.titleHidden);return d.createElement("div",{className:a},d.createElement(A,Object.assign({as:"section",padding:e?"0":"400"},t&&{paddingInlineEnd:"0"},s&&{background:"bg-surface-tertiary"}),n))}var C={Container:"Polaris-Modal-Dialog__Container",Dialog:"Polaris-Modal-Dialog",Modal:"Polaris-Modal-Dialog__Modal",limitHeight:"Polaris-Modal-Dialog--limitHeight",sizeSmall:"Polaris-Modal-Dialog--sizeSmall",sizeLarge:"Polaris-Modal-Dialog--sizeLarge",sizeFullScreen:"Polaris-Modal-Dialog--sizeFullScreen",animateFadeUp:"Polaris-Modal-Dialog--animateFadeUp",entering:"Polaris-Modal-Dialog--entering",exiting:"Polaris-Modal-Dialog--exiting",exited:"Polaris-Modal-Dialog--exited",entered:"Polaris-Modal-Dialog--entered"};function _t({trapping:n}){const e=p.useContext(vt),s=p.useId();if(!e)throw new _e("No FocusManager was provided.");const{trapFocusList:t,add:a,remove:r}=e,i=t[0]===s,c=p.useMemo(()=>({canSafelyFocus:i}),[i]);return p.useEffect(()=>{if(n)return a(s),()=>{r(s)}},[a,s,r,n]),c}function Ut({trapping:n=!0,children:e}){const{canSafelyFocus:s}=_t({trapping:n}),t=p.useRef(null),[a,r]=p.useState(!0);p.useEffect(()=>{const l=s&&!(t.current&&t.current.contains(document.activeElement))?!n:!0;r(l)},[s,n]);const i=l=>{const u=t.current&&t.current.contains(document.activeElement);n===!1||!t.current||u||l.target instanceof Element&&l.target.matches(`${mt.selector} *`)||s&&l.target instanceof HTMLElement&&t.current!==l.target&&!t.current.contains(l.target)&&ue(t.current)},c=l=>{if(n===!1||!t.current)return;const u=tt(t.current),h=nt(t.current);l.target===h&&!l.shiftKey&&(l.preventDefault(),at(t.current)),l.target===u&&l.shiftKey&&(l.preventDefault(),rt(t.current))};return d.createElement(wt,{disabled:a,root:t.current},d.createElement("div",{ref:t},d.createElement(ht,{event:"focusin",handler:i}),d.createElement(xe,{keyCode:ve.Tab,keyEvent:"keydown",handler:c}),e))}function Bt({instant:n,labelledBy:e,children:s,limitHeight:t,size:a,onClose:r,onExited:i,onEntered:c,setClosing:l,hasToasts:u,...h}){const v=gt(),x=p.useRef(null),k=p.useContext(Nt);let y;k&&(y=k.toastMessages);const W=D(C.Modal,a&&C[st("size",a)],t&&C.limitHeight),N=n?w:Ht;p.useEffect(()=>{x.current&&!x.current.contains(document.activeElement)&&ue(x.current)},[]);const P=()=>{l&&l(!0)},I=()=>{l&&l(!1),r()},L=d.createElement("div",{"aria-live":"assertive"},y?y.map(M=>d.createElement(pe,{visuallyHidden:!0,as:"p",key:M.id},M.content)):null);return d.createElement(N,Object.assign({},h,{nodeRef:x,mountOnEnter:!0,unmountOnExit:!0,timeout:parseInt(v.motion["motion-duration-200"],10),onEntered:c,onExited:i}),d.createElement("div",{className:C.Container,"data-polaris-layer":!0,"data-polaris-overlay":!0,ref:x},d.createElement(Ut,null,d.createElement("div",{role:"dialog","aria-modal":!0,"aria-label":e,"aria-labelledby":e,tabIndex:-1,className:C.Dialog},d.createElement("div",{className:W},d.createElement(xe,{keyCode:ve.Escape,keyEvent:"keydown",handler:P}),d.createElement(xe,{keyCode:ve.Escape,handler:I}),s),L))))}const $t={appear:D(C.animateFadeUp,C.entering),appearActive:D(C.animateFadeUp,C.entered),enter:D(C.animateFadeUp,C.entering),enterActive:D(C.animateFadeUp,C.entered),exit:D(C.animateFadeUp,C.exiting),exitActive:D(C.animateFadeUp,C.exited)};function Ht({children:n,...e}){return d.createElement(ye,Object.assign({},e,{classNames:$t}),n)}function Ie({pressed:n,onClick:e}){const s=Ue();return d.createElement(X,{variant:"tertiary",pressed:n,icon:dt,onClick:e,accessibilityLabel:s.translate("Polaris.Common.close")})}function Gt({id:n,children:e,closing:s,titleHidden:t,onClose:a}){return t||!e?d.createElement(A,{position:"absolute",insetInlineEnd:"400",insetBlockStart:"400",zIndex:"1"},d.createElement(Ie,{onClick:a})):d.createElement(A,{paddingBlockStart:"400",paddingBlockEnd:"400",paddingInlineStart:"400",paddingInlineEnd:"400",borderBlockEndWidth:"025",borderColor:"border",background:"bg-surface-tertiary"},d.createElement(jt,{columns:{xs:"1fr auto"},gap:"400"},d.createElement(j,{gap:"400",blockAlign:"center"},d.createElement(pe,{id:n,as:"h2",variant:"headingMd",breakWord:!0},e)),d.createElement(Ie,{pressed:s,onClick:a})))}function Vt({primaryAction:n,secondaryActions:e,children:s}){const t=n&&Pe(n,{variant:"primary"})||null,a=e&&Pe(e)||null,r=t||a?d.createElement(j,{gap:"200"},a,t):null;return d.createElement(j,{gap:"400",blockAlign:"center"},d.createElement(A,{borderColor:"border",borderBlockStartWidth:"025",padding:"400",width:"100%"},d.createElement(j,{gap:"400",blockAlign:"center",align:"space-between"},d.createElement(A,null,s),r)))}const Le=200,zt=400,be=function({children:e,title:s,titleHidden:t=!1,src:a,iFrameName:r,open:i,instant:c,sectioned:l,loading:u,size:h,limitHeight:v,footer:x,primaryAction:k,secondaryActions:y,onScrolledToBottom:W,activator:N,activatorWrapper:P="div",onClose:I,onIFrameLoad:L,onTransitionEnd:M,noScroll:K}){const[Q,H]=p.useState(Le),[ee,T]=p.useState(!1),te=p.useId(),J=p.useRef(null),fe=Ue().translate("Polaris.Modal.iFrameTitle");let ne,ae;const re=p.useCallback(()=>{M&&M()},[M]),se=p.useCallback(()=>{H(Le);const g=N&&Re(N)?N&&N.current:J.current;g&&requestAnimationFrame(()=>ue(g))},[N]),f=p.useCallback(g=>{const b=g.target;if(b&&b.contentWindow)try{H(b.contentWindow.document.body.scrollHeight)}catch{H(zt)}L!=null&&L(g)},[L]);if(i){const g=!x&&!k&&!y?null:d.createElement(Vt,{primaryAction:k,secondaryActions:y},x),b=l?it(e,Ge,{titleHidden:t}):e,S=u?d.createElement(A,{padding:"400"},d.createElement(j,{gap:"400",align:"center",blockAlign:"center"},d.createElement(Be,null))):b,Ve=K?d.createElement("div",{className:ge.NoScrollBody},d.createElement(A,{width:"100%",overflowX:"hidden",overflowY:"hidden"},S)):d.createElement(ct,{shadow:!0,className:ge.Body,onScrolledToBottom:W},S),ze=a?d.createElement("iframe",{name:r,title:fe,src:a,className:ge.IFrame,onLoad:f,style:{height:`${Q}px`}}):Ve;ne=d.createElement(Bt,{instant:c,labelledBy:te,onClose:I,onEntered:re,onExited:se,size:h,limitHeight:v,setClosing:T},d.createElement(Gt,{titleHidden:t,id:te,closing:ee,onClose:I},s),ze,g),ae=d.createElement(bt,{setClosing:T,onClick:I})}const m=!c,E=N&&!Re(N)?d.createElement(A,{ref:J,as:P},N):null;return d.createElement(ot.Provider,{value:!0},E,d.createElement(lt,{idPrefix:"modal"},d.createElement(we,{appear:m,enter:m,exit:m},ne),ae))};function Re(n){return Object.prototype.hasOwnProperty.call(n,"current")}be.Section=Ge;const de=class de{static set(e,s,t=de.DEFAULT_TTL){if(typeof window>"u")return;const a={data:s,timestamp:Date.now(),expiresAt:Date.now()+t};try{sessionStorage.setItem(e,JSON.stringify(a))}catch(r){console.warn("キャッシュ保存に失敗（Shopify認証影響なし）:",r)}}static get(e){if(typeof window>"u")return null;try{const s=sessionStorage.getItem(e);if(!s)return null;const t=JSON.parse(s);return Date.now()>t.expiresAt?(sessionStorage.removeItem(e),null):t.data}catch(s){return console.warn("キャッシュ取得に失敗:",s),sessionStorage.removeItem(e),null}}static clear(e){typeof window>"u"||sessionStorage.removeItem(e)}static clearAll(){typeof window>"u"||sessionStorage.clear()}static isExpired(e){if(typeof window>"u")return!0;try{const s=sessionStorage.getItem(e);if(!s)return!0;const t=JSON.parse(s);return Date.now()>t.expiresAt}catch{return!0}}static getInfo(e){if(typeof window>"u")return null;try{const s=sessionStorage.getItem(e);if(!s)return null;const t=JSON.parse(s);return{timestamp:t.timestamp,expiresAt:t.expiresAt}}catch{return null}}};De(de,"DEFAULT_TTL",300*1e3);let $=de;const Z={PRODUCTS:"shopify_products_cache"};function Wt(n,e,s="all"){let t=n;return s==="k18"&&(t=n.filter(a=>a.title.includes("K18")||a.title.includes("18金"))),e&&(t=t.filter(a=>a.title.toLowerCase().includes(e.toLowerCase())||a.handle.toLowerCase().includes(e.toLowerCase()))),t}function Kt(n,e,s=.93){const t=n*(1+e),a=n*s,r=Math.max(t,a);return Math.ceil(r/10)*10}function Jt({products:n,goldPrice:e,selectedProductIds:s,shopSetting:t,forceRefresh:a,cacheTimestamp:r}){var re,se;const i=qe(),c=Ye(),[l,u]=p.useState([]),[h,v]=p.useState(""),[x,k]=p.useState("all"),[y,W]=p.useState((t==null?void 0:t.minPricePct)||93),[N,P]=p.useState(!1),[I,L]=p.useState([]),[M,K]=p.useState(!1),[Q,H]=p.useState(null);p.useEffect(()=>{if(!a){const f=$.get(Z.PRODUCTS);if(f&&Array.isArray(f)&&f.length>0){K(!0);const m=$.getInfo(Z.PRODUCTS);if(m&&H(new Date(m.timestamp)),s&&s.length>0){const E=f.filter(g=>s.includes(g.id));u(E)}return}}if(n&&n.length>0&&($.set(Z.PRODUCTS,n),K(!1),H(new Date(r)),s&&s.length>0)){const f=n.filter(m=>s.includes(m.id));u(f)}},[n,s,a,r]);const ee=p.useCallback(()=>{$.clear(Z.PRODUCTS),K(!1),c.revalidate()},[c]),T=Wt(n,h,x),te=p.useCallback((f,m)=>{const E=n.find(g=>g.id===f);u(m?g=>[...g,E]:g=>g.filter(b=>b.id!==f))},[n]),J=p.useCallback(f=>{u(f?T:[])},[T]),ke=p.useCallback(()=>{const f=new FormData;f.append("action","saveSelection"),l.forEach(m=>{f.append("productId",m.id)}),i.submit(f,{method:"post"})},[l,i]),fe=p.useCallback(()=>{if(l.length===0||!e)return;const f=l.map(m=>({...m,variants:m.variants.edges.map(E=>{const g=E.node,b=parseFloat(g.price),S=Kt(b,e.ratio,y/100);return{...g,currentPrice:b,newPrice:S,priceChange:S-b,changed:S!==b}})}));L(f),P(!0)},[l,e,y]),ne=p.useCallback(()=>{if(!e)return;const f=l.map(m=>({...m,variants:m.variants.edges.map(E=>E.node)}));i.submit({action:"updatePrices",selectedProducts:JSON.stringify(f),minPriceRate:y.toString()},{method:"post"}),P(!1)},[l,e,y,i]),ae=T.map(f=>{var b;const m=l.some(S=>S.id===f.id),E=f.variants.edges,g=E.length>1?`¥${Math.min(...E.map(S=>parseFloat(S.node.price)))} - ¥${Math.max(...E.map(S=>parseFloat(S.node.price)))}`:`¥${((b=E[0])==null?void 0:b.node.price)||0}`;return[o.jsx(ut,{checked:m,onChange:S=>te(f.id,S)}),f.title,o.jsx(q,{status:f.status==="ACTIVE"?"success":"critical",children:f.status}),g,E.length]});return o.jsx($e,{title:"商品価格自動調整",subtitle:`${T.length}件の商品（全${n.length}件）`,primaryAction:{content:"価格調整プレビュー",onAction:fe,disabled:l.length===0||!e,loading:i.state==="submitting"},secondaryActions:[{content:"商品を再読み込み",icon:oe,onAction:ee,loading:c.state==="loading"}],children:o.jsxs(O,{children:[o.jsxs(O.Section,{children:[e&&o.jsx(F,{children:o.jsxs(U,{gap:"400",children:[o.jsxs(j,{align:"space-between",children:[o.jsx("h3",{children:"田中貴金属 金価格情報"}),o.jsx(q,{tone:e.changeDirection==="up"?"attention":e.changeDirection==="down"?"success":"info",children:e.changeDirection==="up"?"上昇":e.changeDirection==="down"?"下落":"変動なし"})]}),o.jsxs(j,{gap:"600",children:[o.jsxs("div",{children:[o.jsx("p",{children:"店頭小売価格（税込）"}),o.jsx("h4",{children:e.retailPriceFormatted})]}),o.jsxs("div",{children:[o.jsx("p",{children:"前日比"}),o.jsx("h4",{children:e.change})]})]}),o.jsx("div",{children:o.jsxs("p",{children:[o.jsxs("strong",{children:["価格調整率: ",e.percentage,"%"]}),"（この変動率で商品価格を自動調整します）"]})}),o.jsxs("p",{children:["最終更新: ",new Date(e.lastUpdated).toLocaleString("ja-JP")]})]})}),!e&&o.jsx(G,{tone:"critical",children:"金価格情報の取得に失敗しました。価格調整機能をご利用いただけません。"})]}),o.jsx(O.Section,{children:o.jsx(F,{children:o.jsxs(U,{gap:"400",children:[o.jsxs(j,{align:"space-between",children:[o.jsx("h3",{children:"商品検索・選択"}),o.jsx(X,{icon:oe,variant:"tertiary",onClick:ee,loading:c.state==="loading",children:"商品を再読み込み"})]}),o.jsx("div",{children:o.jsxs(pe,{variant:"bodySm",tone:"subdued",children:["最終更新: ",Q?Q.toLocaleString("ja-JP"):"読み込み中...",M&&o.jsx(q,{tone:"info",size:"small",children:"キャッシュ"})]})}),o.jsxs(j,{gap:"400",children:[o.jsx("div",{style:{flex:1},children:o.jsx(Me,{label:"商品検索",value:h,onChange:v,placeholder:"商品名またはハンドルで検索...",clearButton:!0,onClearButtonClick:()=>v("")})}),o.jsx("div",{style:{minWidth:"150px"},children:o.jsx(pt,{label:"商品フィルター",options:[{label:"すべての商品",value:"all"},{label:"K18商品のみ",value:"k18"}],value:x,onChange:k})})]}),o.jsx(Me,{label:"価格下限設定 (%)",type:"number",value:y.toString(),onChange:f=>W(parseInt(f)||93),suffix:"%",helpText:"現在価格に対する最低価格の割合（例: 93% = 7%以上は下がらない）",min:"50",max:"100"}),o.jsxs(j,{gap:"300",children:[o.jsx(X,{onClick:()=>J(!0),disabled:T.length===0,size:"large",children:"すべて選択"}),o.jsx(X,{onClick:()=>J(!1),disabled:l.length===0,size:"large",children:"選択解除"}),o.jsx(X,{onClick:ke,disabled:i.state==="submitting",variant:"primary",size:"large",children:"選択を保存"})]}),s&&s.length>0&&o.jsxs(G,{tone:"info",children:["現在 ",o.jsxs("strong",{children:[s.length,"件"]})," の商品が自動更新対象として保存されています"]}),((re=i.data)==null?void 0:re.message)&&o.jsx(G,{tone:"success",children:i.data.message})]})})}),o.jsx(O.Section,{children:o.jsx(F,{children:o.jsx(ft,{columnContentTypes:["text","text","text","text","numeric"],headings:["選択","商品名","ステータス","価格","バリエーション"],rows:ae,pagination:{hasNext:!1,hasPrevious:!1}})})}),o.jsx(be,{open:N,onClose:()=>P(!1),title:"価格調整プレビュー",primaryAction:{content:"価格を更新",onAction:ne,loading:i.state==="submitting"},secondaryActions:[{content:"キャンセル",onAction:()=>P(!1)}],large:!0,children:o.jsx(be.Section,{children:o.jsx(U,{gap:"400",children:I.map(f=>o.jsx(F,{children:o.jsxs(U,{gap:"300",children:[o.jsx("h4",{children:f.title}),f.variants.map(m=>o.jsxs(j,{align:"space-between",children:[o.jsx("span",{children:m.title||"デフォルト"}),o.jsxs(j,{gap:"200",children:[o.jsxs("span",{children:["¥",m.currentPrice," → ¥",m.newPrice]}),m.changed&&o.jsxs(q,{tone:m.priceChange>0?"warning":"success",children:[m.priceChange>0?"+":"",m.priceChange,"円"]})]})]},m.id))]})},f.id))})})}),((se=i.data)==null?void 0:se.updateResults)&&o.jsx(O.Section,{children:o.jsx(F,{children:o.jsxs(U,{gap:"400",children:[o.jsx("h3",{children:"価格更新結果"}),i.data.summary&&o.jsx(F,{children:o.jsxs(j,{gap:"400",children:[o.jsxs("div",{children:["合計: ",o.jsx("strong",{children:i.data.summary.total}),"件"]}),o.jsxs("div",{children:["成功: ",o.jsx("strong",{children:i.data.summary.success}),"件"]}),o.jsxs("div",{children:["失敗: ",o.jsx("strong",{children:i.data.summary.failed}),"件"]})]})}),i.data.error&&o.jsx(G,{tone:"critical",children:i.data.error}),i.data.message&&o.jsx(G,{tone:"info",children:i.data.message}),i.data.updateResults.map((f,m)=>{var E,g;return o.jsx(G,{tone:f.success?"success":"critical",children:f.success?`${f.product} - ${f.variant}: ¥${(E=f.oldPrice)==null?void 0:E.toLocaleString()} → ¥${(g=f.newPrice)==null?void 0:g.toLocaleString()}`:`${f.product} - ${f.variant}: ${f.error}`},m)})]})})})]})})}function on(){const n=Je(),{goldPrice:e,selectedProductIds:s,shopSetting:t,forceRefresh:a,cacheTimestamp:r}=n;return o.jsx(p.Suspense,{fallback:o.jsx($e,{title:"商品価格自動調整",subtitle:"読み込み中...",secondaryActions:[{content:"商品を再読み込み",icon:oe,onAction:()=>{$.clear(Z.PRODUCTS),window.location.search="?refresh=true"}}],children:o.jsxs(O,{children:[o.jsx(O.Section,{children:e&&o.jsx(F,{children:o.jsxs(U,{gap:"400",children:[o.jsxs(j,{align:"space-between",children:[o.jsx("h3",{children:"田中貴金属 金価格情報"}),o.jsx(q,{tone:e.changeDirection==="up"?"attention":e.changeDirection==="down"?"success":"info",children:e.changeDirection==="up"?"上昇":e.changeDirection==="down"?"下落":"変動なし"})]}),o.jsxs(j,{gap:"600",children:[o.jsxs("div",{children:[o.jsx("p",{children:"店頭小売価格（税込）"}),o.jsx("h4",{children:e.retailPriceFormatted})]}),o.jsxs("div",{children:[o.jsx("p",{children:"前日比"}),o.jsx("h4",{children:e.change})]})]}),o.jsx("div",{children:o.jsxs("p",{children:[o.jsxs("strong",{children:["価格調整率: ",e.percentage,"%"]}),"（この変動率で商品価格を自動調整します）"]})}),o.jsxs("p",{children:["最終更新: ",new Date(e.lastUpdated).toLocaleString("ja-JP")]})]})})}),o.jsx(O.Section,{children:o.jsx(F,{children:o.jsx(U,{gap:"400",children:o.jsxs("div",{style:{textAlign:"center",padding:"60px 20px"},children:[o.jsx(Be,{size:"large"}),o.jsx("p",{style:{marginTop:"20px"},children:"商品データを読み込んでいます..."}),o.jsx(pe,{variant:"bodySm",tone:"subdued",children:"初回読み込みには時間がかかります。次回からキャッシュにより高速表示されます。"})]})})})})]})}),children:o.jsx(Xe,{resolve:n.products,children:i=>o.jsx(Jt,{products:i,goldPrice:e,selectedProductIds:s,shopSetting:t,forceRefresh:a,cacheTimestamp:r})})})}export{on as default};
