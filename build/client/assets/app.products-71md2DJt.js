import{R as c,r as p,g as tt,d as de,j as u}from"./index-OtPSfN_w.js";import{u as nt,A as st,b as at}from"./components-B6iG4OGC.js";import{M as De,d as P,h as it,g as rt,s as lt,u as ce,v as qe,p as ot,e as ct,B as ne,q as dt,r as ut,t as ft,x as pe,c as K,K as xe,y as ye,z as ht,A as pt,D as mt,E as gt,T as Ke,I as A,F as He,w as bt,W as Ct,G as vt,H as Et,J as Ze,P as Xe,C as G,b as J,f as ue,a as Le,l as xt}from"./Page-tPcJA2Wd.js";import{L as q}from"./Layout-DylFXOet.js";import{a as yt,C as St,B as Q,S as kt}from"./Select-BvGNw0HV.js";import{j as Se,u as Tt,f as Nt,k as Ft,d as Dt,E as ke,p as Pt,l as jt}from"./context-AaFCZbCq.js";import{S as wt,F as _t}from"./context-Dqc0DVKX.js";var Je=function(a){return c.createElement("svg",Object.assign({viewBox:"0 0 20 20"},a),c.createElement("path",{fillRule:"evenodd",d:"M9.116 4.323a1.25 1.25 0 0 1 1.768 0l2.646 2.647a.75.75 0 0 1-1.06 1.06l-2.47-2.47-2.47 2.47a.75.75 0 1 1-1.06-1.06l2.646-2.647Z"}),c.createElement("path",{fillOpacity:.33,fillRule:"evenodd",d:"M9.116 15.677a1.25 1.25 0 0 0 1.768 0l2.646-2.647a.75.75 0 0 0-1.06-1.06l-2.47 2.47-2.47-2.47a.75.75 0 0 0-1.06 1.06l2.646 2.647Z"}))};Je.displayName="SortAscendingIcon";var Ye=function(a){return c.createElement("svg",Object.assign({viewBox:"0 0 20 20"},a),c.createElement("path",{fillOpacity:.33,fillRule:"evenodd",d:"M9.116 4.823a1.25 1.25 0 0 1 1.768 0l2.646 2.647a.75.75 0 0 1-1.06 1.06l-2.47-2.47-2.47 2.47a.75.75 0 1 1-1.06-1.06l2.646-2.647Z"}),c.createElement("path",{fillRule:"evenodd",d:"M9.116 15.177a1.25 1.25 0 0 0 1.768 0l2.646-2.647a.75.75 0 0 0-1.06-1.06l-2.47 2.47-2.47-2.47a.75.75 0 0 0-1.06 1.06l2.646 2.647Z"}))};Ye.displayName="SortDescendingIcon";var be={Backdrop:"Polaris-Backdrop",transparent:"Polaris-Backdrop--transparent",belowNavigation:"Polaris-Backdrop--belowNavigation"};function Mt(){const i=p.useContext(wt);if(!i)throw new De("No ScrollLockManager was provided.");return i}function Rt(i){const a=Mt();return p.useEffect(()=>(a.registerScrollLock(),()=>{a.unregisterScrollLock()}),[a]),null}function Ht(i){const{onClick:a,onTouchStart:s,belowNavigation:e,transparent:n,setClosing:t}=i,r=P(be.Backdrop,e&&be.belowNavigation,n&&be.transparent),o=()=>{t&&t(!0)},l=()=>{t&&t(!1),a&&a()};return c.createElement(c.Fragment,null,c.createElement(Rt,null),c.createElement("div",{className:r,onClick:l,onTouchStart:s,onMouseDown:o}))}var Lt={InlineGrid:"Polaris-InlineGrid"};function It({children:i,columns:a,gap:s,alignItems:e}){const n={...rt("inline-grid","grid-template-columns",At(a)),...it("inline-grid","gap","space",s),"--pc-inline-grid-align-items":e};return c.createElement("div",{className:Lt.InlineGrid,style:lt(n)},i)}function At(i){return typeof i=="object"&&i!==null&&!Array.isArray(i)?Object.fromEntries(Object.entries(i).map(([a,s])=>[a,Ie(s)])):Ie(i)}function Ie(i){if(i)return typeof i=="number"||!isNaN(Number(i))?`repeat(${Number(i)}, minmax(0, 1fr))`:typeof i=="string"?i:i.map(a=>{switch(a){case"oneThird":return"minmax(0, 1fr)";case"oneHalf":return"minmax(0, 1fr)";case"twoThirds":return"minmax(0, 2fr)"}}).join(" ")}const Ot=p.createContext(void 0);var Ce,Ae;function Bt(){if(Ae)return Ce;Ae=1;var i=typeof Element<"u",a=typeof Map=="function",s=typeof Set=="function",e=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function n(t,r){if(t===r)return!0;if(t&&r&&typeof t=="object"&&typeof r=="object"){if(t.constructor!==r.constructor)return!1;var o,l,d;if(Array.isArray(t)){if(o=t.length,o!=r.length)return!1;for(l=o;l--!==0;)if(!n(t[l],r[l]))return!1;return!0}var f;if(a&&t instanceof Map&&r instanceof Map){if(t.size!==r.size)return!1;for(f=t.entries();!(l=f.next()).done;)if(!r.has(l.value[0]))return!1;for(f=t.entries();!(l=f.next()).done;)if(!n(l.value[1],r.get(l.value[0])))return!1;return!0}if(s&&t instanceof Set&&r instanceof Set){if(t.size!==r.size)return!1;for(f=t.entries();!(l=f.next()).done;)if(!r.has(l.value[0]))return!1;return!0}if(e&&ArrayBuffer.isView(t)&&ArrayBuffer.isView(r)){if(o=t.length,o!=r.length)return!1;for(l=o;l--!==0;)if(t[l]!==r[l])return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf&&typeof t.valueOf=="function"&&typeof r.valueOf=="function")return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString&&typeof t.toString=="function"&&typeof r.toString=="function")return t.toString()===r.toString();if(d=Object.keys(t),o=d.length,o!==Object.keys(r).length)return!1;for(l=o;l--!==0;)if(!Object.prototype.hasOwnProperty.call(r,d[l]))return!1;if(i&&t instanceof Element)return!1;for(l=o;l--!==0;)if(!((d[l]==="_owner"||d[l]==="__v"||d[l]==="__o")&&t.$$typeof)&&!n(t[d[l]],r[d[l]]))return!1;return!0}return t!==t&&r!==r}return Ce=function(r,o){try{return n(r,o)}catch(l){if((l.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw l}},Ce}var Vt=Bt();const Wt=tt(Vt);function $t(i){return function(a,s){const{firstVisibleColumnIndex:e,tableLeftVisibleEdge:n,tableRightVisibleEdge:t}=i,r=a.offsetLeft,o=r+a.offsetWidth,l=Oe(r,n,t,"left"),d=Oe(o,n,t,"right"),f=l||d,h=a.offsetWidth;return f&&(i.firstVisibleColumnIndex=Math.min(e,s)),{leftEdge:r,rightEdge:o,isVisible:f,width:h,index:s}}}function Oe(i,a,s,e){return i>=a+(e==="left"?0:30)&&i<=s-30}function zt(i,a){const{firstVisibleColumnIndex:s}=i,e=Math.max(s-1,0),n=a[e],t=a[s];return{previousColumn:n,currentColumn:t}}var b={DataTable:"Polaris-DataTable",condensed:"Polaris-DataTable--condensed",Navigation:"Polaris-DataTable__Navigation",Pip:"Polaris-DataTable__Pip","Pip-visible":"Polaris-DataTable__Pip--visible",ScrollContainer:"Polaris-DataTable__ScrollContainer",Table:"Polaris-DataTable__Table",TableRow:"Polaris-DataTable__TableRow",Cell:"Polaris-DataTable__Cell",IncreasedTableDensity:"Polaris-DataTable__IncreasedTableDensity",ZebraStripingOnData:"Polaris-DataTable__ZebraStripingOnData",RowCountIsEven:"Polaris-DataTable__RowCountIsEven",ShowTotalsInFooter:"Polaris-DataTable__ShowTotalsInFooter","Cell-separate":"Polaris-DataTable__Cell--separate","Cell-firstColumn":"Polaris-DataTable__Cell--firstColumn","Cell-numeric":"Polaris-DataTable__Cell--numeric","Cell-truncated":"Polaris-DataTable__Cell--truncated","Cell-header":"Polaris-DataTable__Cell--header","Cell-sortable":"Polaris-DataTable__Cell--sortable","Heading-left":"Polaris-DataTable__Heading--left","Cell-verticalAlignTop":"Polaris-DataTable__Cell--verticalAlignTop","Cell-verticalAlignBottom":"Polaris-DataTable__Cell--verticalAlignBottom","Cell-verticalAlignMiddle":"Polaris-DataTable__Cell--verticalAlignMiddle","Cell-verticalAlignBaseline":"Polaris-DataTable__Cell--verticalAlignBaseline",hoverable:"Polaris-DataTable--hoverable","Cell-hovered":"Polaris-DataTable__Cell--hovered",Icon:"Polaris-DataTable__Icon",Heading:"Polaris-DataTable__Heading",StickyHeaderEnabled:"Polaris-DataTable__StickyHeaderEnabled",StickyHeaderWrapper:"Polaris-DataTable__StickyHeaderWrapper","Cell-sorted":"Polaris-DataTable__Cell--sorted","Cell-total":"Polaris-DataTable__Cell--total",ShowTotals:"Polaris-DataTable__ShowTotals","Cell-total-footer":"Polaris-DataTable--cellTotalFooter",Footer:"Polaris-DataTable__Footer",StickyHeaderInner:"Polaris-DataTable__StickyHeaderInner","StickyHeaderInner-isSticky":"Polaris-DataTable__StickyHeaderInner--isSticky",StickyHeaderTable:"Polaris-DataTable__StickyHeaderTable",FixedFirstColumn:"Polaris-DataTable__FixedFirstColumn",StickyTableHeadingsRow:"Polaris-DataTable__StickyTableHeadingsRow",TooltipContent:"Polaris-DataTable__TooltipContent"};function le({content:i,contentType:a,nthColumn:s,firstColumn:e,truncate:n,header:t,total:r,totalInFooter:o,sorted:l,sortable:d,sortDirection:f,inFixedNthColumn:h,verticalAlign:m="top",defaultSortDirection:C="ascending",onSort:v,colSpan:S,setRef:x=()=>{},stickyHeadingCell:k=!1,stickyCellWidth:H,hovered:L=!1,handleFocus:_=()=>{},hasFixedNthColumn:W=!1,fixedCellVisible:z=!1,firstColumnMinWidth:I,style:M,lastFixedFirstColumn:j}){const g=ce(),E=a==="numeric",T=P(b.Cell,b[`Cell-${qe("verticalAlign",m)}`],e&&b["Cell-firstColumn"],n&&b["Cell-truncated"],t&&b["Cell-header"],r&&b["Cell-total"],o&&b["Cell-total-footer"],E&&b["Cell-numeric"],d&&b["Cell-sortable"],l&&b["Cell-sorted"],k&&b.StickyHeaderCell,L&&b["Cell-hovered"],j&&h&&z&&b["Cell-separate"],s&&h&&k&&b.FixedFirstColumn),F=P(t&&b.Heading,t&&a==="text"&&b["Heading-left"]),R=P(d&&b.Icon),D=l&&f?f:C,se=D==="descending"?Ye:Je,ae=f==="ascending"?"descending":"ascending",ie=g.translate("Polaris.DataTable.sortAccessibilityLabel",{direction:l?ae:D}),U=c.createElement("span",{className:R},c.createElement(ct,{source:se,accessibilityLabel:ie})),re=!(k&&W&&s&&!h),B=d?c.createElement("button",{className:F,onClick:v,onFocus:_,tabIndex:re?0:-1},U,i):i,V=S&&S>1?{colSpan:S}:{},y=s&&I?{minWidth:I}:{minWidth:H},N=c.createElement("th",Object.assign({ref:x},Se.props,V,{className:T,"aria-sort":f,style:{...M,...y},"data-index-table-sticky-heading":!0}),B),me=t?c.createElement("th",Object.assign({},Se.props,{"aria-sort":f},V,{ref:x,className:T,scope:"col",style:{...y}}),B):c.createElement("th",Object.assign({},V,{ref:x,className:T,scope:"row",style:{...y}}),n?c.createElement(Ut,{className:b.TooltipContent},i):i),ge=t||e||s?me:c.createElement("td",Object.assign({className:T},V),i);return k?N:ge}const Ut=({children:i,className:a=""})=>{const s=p.useRef(null),{current:e}=s,n=c.createElement("span",{ref:s,className:a},i);return(e==null?void 0:e.scrollWidth)>(e==null?void 0:e.offsetWidth)?c.createElement(ot,{content:s.current.innerText},n):n};function Gt({children:i,onMount:a,fallback:s=null}){const e=Tt(),n=e?i:s;return p.useEffect(()=>{e&&a&&a()},[e,a]),c.createElement(c.Fragment,null,n)}function qt(){const i=p.useContext(Nt);if(!i)throw new De("No StickyManager was provided.");return i}class Kt extends p.Component{constructor(...a){super(...a),this.state={isSticky:!1,style:{}},this.placeHolderNode=null,this.stickyNode=null,this.setPlaceHolderNode=s=>{this.placeHolderNode=s},this.setStickyNode=s=>{this.stickyNode=s},this.handlePositioning=(s,e=0,n=0,t=0)=>{const{isSticky:r}=this.state;(s&&!r||!s&&r)&&(this.adjustPlaceHolderNode(s),this.setState({isSticky:!r},()=>{if(this.props.onStickyChange==null||(this.props.onStickyChange(!r),this.props.boundingElement==null))return null;this.props.boundingElement.toggleAttribute("data-sticky-active")}));const o=s?{position:"fixed",top:e,left:n,width:t}:{};this.setState({style:o})},this.adjustPlaceHolderNode=s=>{this.placeHolderNode&&this.stickyNode&&(this.placeHolderNode.style.paddingBottom=s?`${Ft(this.stickyNode).height}px`:"0px")}}componentDidMount(){const{boundingElement:a,offset:s=!1,disableWhenStacked:e=!1,stickyManager:n}=this.props;!this.stickyNode||!this.placeHolderNode||n.registerStickyItem({stickyNode:this.stickyNode,placeHolderNode:this.placeHolderNode,handlePositioning:this.handlePositioning,offset:s,boundingElement:a,disableWhenStacked:e})}componentDidUpdate(){const{boundingElement:a,offset:s=!1,disableWhenStacked:e=!1,stickyManager:n}=this.props;if(!this.stickyNode||!this.placeHolderNode)return;const t=n.getStickyItem(this.stickyNode);(!t||a!==t.boundingElement||s!==t.offset||e!==t.disableWhenStacked)&&(n.unregisterStickyItem(this.stickyNode),n.registerStickyItem({stickyNode:this.stickyNode,placeHolderNode:this.placeHolderNode,handlePositioning:this.handlePositioning,offset:s,boundingElement:a,disableWhenStacked:e}))}componentWillUnmount(){const{stickyManager:a}=this.props;this.stickyNode&&a.unregisterStickyItem(this.stickyNode)}render(){const{style:a,isSticky:s}=this.state,{children:e}=this.props,n=Zt(e)?e(s):e;return c.createElement("div",null,c.createElement("div",{ref:this.setPlaceHolderNode}),c.createElement("div",{ref:this.setStickyNode,style:a},n))}}function Zt(i){return typeof i=="function"}function Xt(i){const a=qt();return c.createElement(Kt,Object.assign({},i,{stickyManager:a}))}function Jt({columnVisibilityData:i,isScrolledFarthestLeft:a,isScrolledFarthestRight:s,navigateTableLeft:e,navigateTableRight:n,fixedFirstColumns:t,setRef:r=()=>{}}){const o=ce(),l=i.map((h,m)=>{if(m<t)return;const C=P(b.Pip,h.isVisible&&b["Pip-visible"]);return c.createElement("div",{className:C,key:`pip-${m}`})}),d=o.translate("Polaris.DataTable.navAccessibilityLabel",{direction:"left"}),f=o.translate("Polaris.DataTable.navAccessibilityLabel",{direction:"right"});return c.createElement("div",{className:b.Navigation,ref:r},c.createElement(ne,{variant:"tertiary",icon:dt,disabled:a,accessibilityLabel:d,onClick:e}),l,c.createElement(ne,{variant:"tertiary",icon:ut,disabled:s,accessibilityLabel:f,onClick:n}))}const Be=i=>{const a=[];return i&&i.forEach(s=>{a.push(s.clientHeight)}),a};class Yt extends p.PureComponent{constructor(...a){super(...a),this.state={condensed:!1,columnVisibilityData:[],isScrolledFarthestLeft:!0,isScrolledFarthestRight:!1,rowHovered:void 0},this.dataTable=p.createRef(),this.scrollContainer=p.createRef(),this.table=p.createRef(),this.stickyTable=p.createRef(),this.stickyNav=null,this.headerNav=null,this.tableHeadings=[],this.stickyHeadings=[],this.tableHeadingWidths=[],this.stickyHeaderActive=!1,this.scrollStopTimer=null,this.handleResize=Dt(()=>{const{table:{current:s},scrollContainer:{current:e}}=this;let n=!1;s&&e&&(n=s.scrollWidth>e.clientWidth+1),this.setState({condensed:n,...this.calculateColumnVisibilityData(n)})}),this.setCellRef=({ref:s,index:e,inStickyHeader:n})=>{if(s!=null)if(n){this.stickyHeadings[e]=s;const t=s.querySelector("button");if(t==null)return;t.addEventListener("focus",this.handleHeaderButtonFocus)}else this.tableHeadings[e]=s,this.tableHeadingWidths[e]=s.clientWidth},this.changeHeadingFocus=()=>{const{tableHeadings:s,stickyHeadings:e,stickyNav:n,headerNav:t}=this,r=e.findIndex(C=>{var v;return C===((v=document.activeElement)==null?void 0:v.parentElement)}),o=s.findIndex(C=>{var v;return C===((v=document.activeElement)==null?void 0:v.parentElement)}),l=n==null?void 0:n.querySelectorAll("button"),d=t==null?void 0:t.querySelectorAll("button");let f=-1;l==null||l.forEach((C,v)=>{C===document.activeElement&&(f=v)});let h=-1;if(d==null||d.forEach((C,v)=>{C===document.activeElement&&(h=v)}),r<0&&o<0&&f<0&&h<0)return null;let m;if(r>=0?m=s[r].querySelector("button"):o>=0&&(m=e[o].querySelector("button")),f>=0?m=d==null?void 0:d[f]:h>=0&&(m=l==null?void 0:l[h]),m==null)return null;m.style.visibility="visible",m.focus(),m.style.removeProperty("visibility")},this.calculateColumnVisibilityData=s=>{const e=this.fixedFirstColumns(),{table:{current:n},scrollContainer:{current:t},dataTable:{current:r}}=this,{stickyHeader:o}=this.props;if((o||s)&&n&&t&&r){const l=n.querySelectorAll(Se.selector),d=l[e-1],f=e?d.offsetLeft+d.offsetWidth:0;if(l.length>0){const h=l.length-1,m=t.scrollLeft+f,C=t.scrollLeft+r.offsetWidth,v={firstVisibleColumnIndex:h,tableLeftVisibleEdge:m,tableRightVisibleEdge:C},S=[...l].map($t(v)),x=S[S.length-1],k=e?m===f:m===0;return{columnVisibilityData:S,...zt(v,S),isScrolledFarthestLeft:k,isScrolledFarthestRight:x.rightEdge<=C}}}return{columnVisibilityData:[],previousColumn:void 0,currentColumn:void 0}},this.handleHeaderButtonFocus=s=>{var m;const e=this.fixedFirstColumns();if(this.scrollContainer.current==null||s.target==null||this.state.columnVisibilityData.length===0)return;const t=s.target.parentNode,r=this.scrollContainer.current.scrollLeft,o=this.scrollContainer.current.offsetWidth,l=r+o,d=this.state.columnVisibilityData.length>0?(m=this.state.columnVisibilityData[e])==null?void 0:m.rightEdge:0,f=t.offsetLeft,h=t.offsetLeft+t.offsetWidth;r>f-d&&(this.scrollContainer.current.scrollLeft=f-d),h>l&&(this.scrollContainer.current.scrollLeft=h-o)},this.stickyHeaderScrolling=()=>{const{current:s}=this.stickyTable,{current:e}=this.scrollContainer;s==null||e==null||(s.scrollLeft=e.scrollLeft)},this.scrollListener=()=>{var s;this.scrollStopTimer&&clearTimeout(this.scrollStopTimer),this.scrollStopTimer=setTimeout(()=>{this.setState(e=>({...this.calculateColumnVisibilityData(e.condensed)}))},100),this.setState({isScrolledFarthestLeft:((s=this.scrollContainer.current)==null?void 0:s.scrollLeft)===0}),this.props.stickyHeader&&this.stickyHeaderActive&&this.stickyHeaderScrolling()},this.handleHover=s=>()=>{this.setState({rowHovered:s})},this.handleFocus=s=>{var d;const e=this.fixedFirstColumns();if(this.scrollContainer.current==null||s.target==null)return;const n=s.target.parentNode,r=this.props?(d=this.state.columnVisibilityData[e])==null?void 0:d.rightEdge:0,l=n.offsetLeft-r;this.scrollContainer.current.scrollLeft>l&&(this.scrollContainer.current.scrollLeft=l)},this.navigateTable=s=>{var f;const e=this.fixedFirstColumns(),{currentColumn:n,previousColumn:t}=this.state,r=(f=this.state.columnVisibilityData[e-1])==null?void 0:f.rightEdge;if(!n||!t)return;let o=0;for(let h=0;h<n.index;h++)o+=this.state.columnVisibilityData[h].width;const{current:l}=this.scrollContainer;return()=>{let h=0;e?h=s==="right"?o-r+n.width:o-t.width-r:h=s==="right"?n.rightEdge:t.leftEdge,l&&(l.scrollLeft=h,requestAnimationFrame(()=>{this.setState(m=>({...this.calculateColumnVisibilityData(m.condensed)}))}))}},this.renderHeading=({heading:s,headingIndex:e,inFixedNthColumn:n,inStickyHeader:t})=>{var M;const{sortable:r,truncate:o=!1,columnContentTypes:l,defaultSortDirection:d,initialSortColumnIndex:f=0,verticalAlign:h,firstColumnMinWidth:m}=this.props,C=this.fixedFirstColumns(),{sortDirection:v=d,sortedColumnIndex:S=f,isScrolledFarthestLeft:x}=this.state;let k;const H=`heading-cell-${e}`,L=`stickyheader-${e}`,_=t?L:H;if(r){const j=r[e],g=j&&S===e;k={defaultSortDirection:d,sorted:g,sortable:j,sortDirection:g?v:"none",onSort:this.defaultOnSort(e),fixedNthColumn:C,inFixedNthColumn:C}}const W=t?this.tableHeadingWidths[e]:void 0,z=!x,I={header:!0,stickyHeadingCell:t,content:s,contentType:l[e],nthColumn:e<C,fixedFirstColumns:C,truncate:o,headingIndex:e,...k,verticalAlign:h,handleFocus:this.handleFocus,stickyCellWidth:W,fixedCellVisible:z,firstColumnMinWidth:m};return n&&t?[c.createElement(le,Object.assign({key:_},I,{setRef:j=>{this.setCellRef({ref:j,index:e,inStickyHeader:t})},inFixedNthColumn:!1})),c.createElement(le,Object.assign({key:`${_}-sticky`},I,{setRef:j=>{this.setCellRef({ref:j,index:e,inStickyHeader:t})},inFixedNthColumn:!!C,lastFixedFirstColumn:e===C-1,style:{left:(M=this.state.columnVisibilityData[e])==null?void 0:M.leftEdge}}))]:c.createElement(le,Object.assign({key:_},I,{setRef:j=>{this.setCellRef({ref:j,index:e,inStickyHeader:t})},lastFixedFirstColumn:e===C-1,inFixedNthColumn:n}))},this.totalsRowHeading=()=>{const{i18n:s,totals:e,totalsName:n}=this.props,t=n||{singular:s.translate("Polaris.DataTable.totalRowHeading"),plural:s.translate("Polaris.DataTable.totalsRowHeading")};return e&&e.filter(r=>r!=="").length>1?t.plural:t.singular},this.renderTotals=({total:s,index:e})=>{const n=this.fixedFirstColumns(),t=`totals-cell-${e}`,{truncate:r=!1,verticalAlign:o,columnContentTypes:l}=this.props;let d,f;e===0&&(d=this.totalsRowHeading()),s!==""&&e>0&&(f=l[e],d=s);const h=this.props.showTotalsInFooter;return c.createElement(le,{total:!0,totalInFooter:h,nthColumn:e<=n-1,firstColumn:e===0,key:t,content:d,contentType:f,truncate:r,verticalAlign:o})},this.getColSpan=(s,e,n,t)=>{if(this.fixedFirstColumns())return 1;const o=s||1,l=e||n,d=Math.floor(l/o),f=l%o;return t===0?d+f:d},this.defaultRenderRow=({row:s,index:e,inFixedNthColumn:n,rowHeights:t})=>{const{columnContentTypes:r,truncate:o=!1,verticalAlign:l,hoverable:d=!0,headings:f}=this.props,{condensed:h}=this.state,m=this.fixedFirstColumns(),C=P(b.TableRow,d&&b.hoverable);return c.createElement("tr",{key:`row-${e}`,className:C,onMouseEnter:this.handleHover(e),onMouseLeave:this.handleHover()},s.map((v,S)=>{const x=e===this.state.rowHovered,k=`cell-${S}-row-${e}`,H=this.getColSpan(s.length,f.length,r.length,S);return c.createElement(le,{key:k,content:v,contentType:r[S],nthColumn:S<=m-1,firstColumn:S===0,truncate:o,verticalAlign:l,colSpan:H,hovered:x,style:t?{height:`${t[e]}px`}:{},inFixedNthColumn:h&&n})}))},this.defaultOnSort=s=>{const{onSort:e,defaultSortDirection:n="ascending",initialSortColumnIndex:t}=this.props,{sortDirection:r=n,sortedColumnIndex:o=t}=this.state;let l=n;return o===s&&(l=r==="ascending"?"descending":"ascending"),()=>{this.setState({sortDirection:l,sortedColumnIndex:s},()=>{e&&e(s,l)})}}}componentDidMount(){this.handleResize()}componentDidUpdate(a){Wt(a,this.props)||this.handleResize()}componentWillUnmount(){this.handleResize.cancel()}render(){var O,B,V;const{headings:a,totals:s,showTotalsInFooter:e,rows:n,footerContent:t,hideScrollIndicator:r=!1,increasedTableDensity:o=!1,hasZebraStripingOnData:l=!1,stickyHeader:d=!1,hasFixedFirstColumn:f=!1,pagination:h}=this.props,{condensed:m,columnVisibilityData:C,isScrolledFarthestLeft:v,isScrolledFarthestRight:S}=this.state,x=this.fixedFirstColumns(),k=n.length%2===0,H=P(b.DataTable,m&&b.condensed,s&&b.ShowTotals,e&&b.ShowTotalsInFooter,l&&b.ZebraStripingOnData,l&&k&&b.RowCountIsEven),L=P(b.TableWrapper,m&&b.condensed,o&&b.IncreasedTableDensity,d&&b.StickyHeaderEnabled),_=c.createElement("tr",null,a.map((y,N)=>this.renderHeading({heading:y,headingIndex:N,inFixedNthColumn:!1,inStickyHeader:!1}))),W=s?c.createElement("tr",null,s.map((y,N)=>this.renderTotals({total:y,index:N}))):null,z=n.map(y=>y.slice(0,x)),I=a.slice(0,x),M=s==null?void 0:s.slice(0,x),j=(O=this.table.current)==null?void 0:O.children[0].childNodes,g=(B=this.table.current)==null?void 0:B.children[1].childNodes,E=Be(j),T=Be(g),F=m&&x!==0&&c.createElement("table",{className:P(b.FixedFirstColumn,!v&&b.separate),style:{width:`${(V=C[x-1])==null?void 0:V.rightEdge}px`}},c.createElement("thead",null,c.createElement("tr",{style:{height:`${E[0]}px`}},I.map((y,N)=>this.renderHeading({heading:y,headingIndex:N,inFixedNthColumn:!0,inStickyHeader:!1}))),s&&!e&&c.createElement("tr",{style:{height:`${E[1]}px`}},M==null?void 0:M.map((y,N)=>this.renderTotals({total:y,index:N})))),c.createElement("tbody",null,z.map((y,N)=>this.defaultRenderRow({row:y,index:N,inFixedNthColumn:!0,rowHeights:T}))),s&&e&&c.createElement("tfoot",null,c.createElement("tr",null,M==null?void 0:M.map((y,N)=>this.renderTotals({total:y,index:N}))))),R=n.map((y,N)=>this.defaultRenderRow({row:y,index:N,inFixedNthColumn:!1})),D=t?c.createElement("div",{className:b.Footer},t):null,se=h?c.createElement(ft,Object.assign({type:"table"},h)):null,ae=e?null:W,ie=e?c.createElement("tfoot",null,W):null,U=y=>r?null:c.createElement(Jt,{columnVisibilityData:C,isScrolledFarthestLeft:v,isScrolledFarthestRight:S,navigateTableLeft:this.navigateTable("left"),navigateTableRight:this.navigateTable("right"),fixedFirstColumns:x,setRef:N=>{y==="header"?this.headerNav=N:y==="sticky"&&(this.stickyNav=N)}}),re=d?c.createElement(Gt,null,c.createElement("div",{className:b.StickyHeaderWrapper,role:"presentation"},c.createElement(Xt,{boundingElement:this.dataTable.current,onStickyChange:y=>{this.changeHeadingFocus(),this.stickyHeaderActive=y}},y=>{const N=P(b.StickyHeaderInner,y&&b["StickyHeaderInner-isSticky"]),me=P(b.StickyHeaderTable,!v&&b.separate);return c.createElement("div",{className:N},c.createElement("div",null,U("sticky")),c.createElement("table",{className:me,ref:this.stickyTable},c.createElement("thead",null,c.createElement("tr",{className:b.StickyTableHeadingsRow},a.map((ge,Re)=>this.renderHeading({heading:ge,headingIndex:Re,inFixedNthColumn:!!(Re<=x-1&&x),inStickyHeader:!0}))))))}))):null;return c.createElement("div",{className:L,ref:this.dataTable},re,U("header"),c.createElement("div",{className:H},c.createElement("div",{className:b.ScrollContainer,ref:this.scrollContainer},c.createElement(ke,{event:"resize",handler:this.handleResize}),c.createElement(ke,{capture:!0,passive:!0,event:"scroll",handler:this.scrollListener}),F,c.createElement("table",{className:b.Table,ref:this.table},c.createElement("thead",null,_,ae),c.createElement("tbody",null,R),ie)),se,D))}fixedFirstColumns(){const{hasFixedFirstColumn:a,fixedFirstColumns:s=0,headings:e}=this.props,n=a&&!s?1:s;return n>=e.length?0:n}}function Qt(i){const a=ce();return c.createElement(Yt,Object.assign({},i,{i18n:a}))}const en=p.memo(function({children:a,disabled:s,root:e}){return p.useEffect(()=>{if(s||!e)return;const n=tn(e)?e.current:e;!n||n.querySelector("[autofocus]")||pe(n,!1)},[s,e]),c.createElement(c.Fragment,null,a)});function tn(i){return i.current!==void 0}function fe(){return fe=Object.assign?Object.assign.bind():function(i){for(var a=1;a<arguments.length;a++){var s=arguments[a];for(var e in s)({}).hasOwnProperty.call(s,e)&&(i[e]=s[e])}return i},fe.apply(null,arguments)}function Pe(i,a){if(i==null)return{};var s={};for(var e in i)if({}.hasOwnProperty.call(i,e)){if(a.indexOf(e)!==-1)continue;s[e]=i[e]}return s}function Te(i,a){return Te=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,e){return s.__proto__=e,s},Te(i,a)}function je(i,a){i.prototype=Object.create(a.prototype),i.prototype.constructor=i,Te(i,a)}function nn(i,a){return i.classList?!!a&&i.classList.contains(a):(" "+(i.className.baseVal||i.className)+" ").indexOf(" "+a+" ")!==-1}function sn(i,a){i.classList?i.classList.add(a):nn(i,a)||(typeof i.className=="string"?i.className=i.className+" "+a:i.setAttribute("class",(i.className&&i.className.baseVal||"")+" "+a))}function Ve(i,a){return i.replace(new RegExp("(^|\\s)"+a+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function an(i,a){i.classList?i.classList.remove(a):typeof i.className=="string"?i.className=Ve(i.className,a):i.setAttribute("class",Ve(i.className&&i.className.baseVal||"",a))}const We={disabled:!1},he=c.createContext(null);var Qe=function(a){return a.scrollTop},oe="unmounted",Z="exited",X="entering",te="entered",Ne="exiting",$=(function(i){je(a,i);function a(e,n){var t;t=i.call(this,e,n)||this;var r=n,o=r&&!r.isMounting?e.enter:e.appear,l;return t.appearStatus=null,e.in?o?(l=Z,t.appearStatus=X):l=te:e.unmountOnExit||e.mountOnEnter?l=oe:l=Z,t.state={status:l},t.nextCallback=null,t}a.getDerivedStateFromProps=function(n,t){var r=n.in;return r&&t.status===oe?{status:Z}:null};var s=a.prototype;return s.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},s.componentDidUpdate=function(n){var t=null;if(n!==this.props){var r=this.state.status;this.props.in?r!==X&&r!==te&&(t=X):(r===X||r===te)&&(t=Ne)}this.updateStatus(!1,t)},s.componentWillUnmount=function(){this.cancelNextCallback()},s.getTimeouts=function(){var n=this.props.timeout,t,r,o;return t=r=o=n,n!=null&&typeof n!="number"&&(t=n.exit,r=n.enter,o=n.appear!==void 0?n.appear:r),{exit:t,enter:r,appear:o}},s.updateStatus=function(n,t){if(n===void 0&&(n=!1),t!==null)if(this.cancelNextCallback(),t===X){if(this.props.unmountOnExit||this.props.mountOnEnter){var r=this.props.nodeRef?this.props.nodeRef.current:de.findDOMNode(this);r&&Qe(r)}this.performEnter(n)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Z&&this.setState({status:oe})},s.performEnter=function(n){var t=this,r=this.props.enter,o=this.context?this.context.isMounting:n,l=this.props.nodeRef?[o]:[de.findDOMNode(this),o],d=l[0],f=l[1],h=this.getTimeouts(),m=o?h.appear:h.enter;if(!n&&!r||We.disabled){this.safeSetState({status:te},function(){t.props.onEntered(d)});return}this.props.onEnter(d,f),this.safeSetState({status:X},function(){t.props.onEntering(d,f),t.onTransitionEnd(m,function(){t.safeSetState({status:te},function(){t.props.onEntered(d,f)})})})},s.performExit=function(){var n=this,t=this.props.exit,r=this.getTimeouts(),o=this.props.nodeRef?void 0:de.findDOMNode(this);if(!t||We.disabled){this.safeSetState({status:Z},function(){n.props.onExited(o)});return}this.props.onExit(o),this.safeSetState({status:Ne},function(){n.props.onExiting(o),n.onTransitionEnd(r.exit,function(){n.safeSetState({status:Z},function(){n.props.onExited(o)})})})},s.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},s.safeSetState=function(n,t){t=this.setNextCallback(t),this.setState(n,t)},s.setNextCallback=function(n){var t=this,r=!0;return this.nextCallback=function(o){r&&(r=!1,t.nextCallback=null,n(o))},this.nextCallback.cancel=function(){r=!1},this.nextCallback},s.onTransitionEnd=function(n,t){this.setNextCallback(t);var r=this.props.nodeRef?this.props.nodeRef.current:de.findDOMNode(this),o=n==null&&!this.props.addEndListener;if(!r||o){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var l=this.props.nodeRef?[this.nextCallback]:[r,this.nextCallback],d=l[0],f=l[1];this.props.addEndListener(d,f)}n!=null&&setTimeout(this.nextCallback,n)},s.render=function(){var n=this.state.status;if(n===oe)return null;var t=this.props,r=t.children;t.in,t.mountOnEnter,t.unmountOnExit,t.appear,t.enter,t.exit,t.timeout,t.addEndListener,t.onEnter,t.onEntering,t.onEntered,t.onExit,t.onExiting,t.onExited,t.nodeRef;var o=Pe(t,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return c.createElement(he.Provider,{value:null},typeof r=="function"?r(n,o):c.cloneElement(c.Children.only(r),o))},a})(c.Component);$.contextType=he;$.propTypes={};function ee(){}$.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:ee,onEntering:ee,onEntered:ee,onExit:ee,onExiting:ee,onExited:ee};$.UNMOUNTED=oe;$.EXITED=Z;$.ENTERING=X;$.ENTERED=te;$.EXITING=Ne;var rn=function(a,s){return a&&s&&s.split(" ").forEach(function(e){return sn(a,e)})},ve=function(a,s){return a&&s&&s.split(" ").forEach(function(e){return an(a,e)})},we=(function(i){je(a,i);function a(){for(var e,n=arguments.length,t=new Array(n),r=0;r<n;r++)t[r]=arguments[r];return e=i.call.apply(i,[this].concat(t))||this,e.appliedClasses={appear:{},enter:{},exit:{}},e.onEnter=function(o,l){var d=e.resolveArguments(o,l),f=d[0],h=d[1];e.removeClasses(f,"exit"),e.addClass(f,h?"appear":"enter","base"),e.props.onEnter&&e.props.onEnter(o,l)},e.onEntering=function(o,l){var d=e.resolveArguments(o,l),f=d[0],h=d[1],m=h?"appear":"enter";e.addClass(f,m,"active"),e.props.onEntering&&e.props.onEntering(o,l)},e.onEntered=function(o,l){var d=e.resolveArguments(o,l),f=d[0],h=d[1],m=h?"appear":"enter";e.removeClasses(f,m),e.addClass(f,m,"done"),e.props.onEntered&&e.props.onEntered(o,l)},e.onExit=function(o){var l=e.resolveArguments(o),d=l[0];e.removeClasses(d,"appear"),e.removeClasses(d,"enter"),e.addClass(d,"exit","base"),e.props.onExit&&e.props.onExit(o)},e.onExiting=function(o){var l=e.resolveArguments(o),d=l[0];e.addClass(d,"exit","active"),e.props.onExiting&&e.props.onExiting(o)},e.onExited=function(o){var l=e.resolveArguments(o),d=l[0];e.removeClasses(d,"exit"),e.addClass(d,"exit","done"),e.props.onExited&&e.props.onExited(o)},e.resolveArguments=function(o,l){return e.props.nodeRef?[e.props.nodeRef.current,o]:[o,l]},e.getClassNames=function(o){var l=e.props.classNames,d=typeof l=="string",f=d&&l?l+"-":"",h=d?""+f+o:l[o],m=d?h+"-active":l[o+"Active"],C=d?h+"-done":l[o+"Done"];return{baseClassName:h,activeClassName:m,doneClassName:C}},e}var s=a.prototype;return s.addClass=function(n,t,r){var o=this.getClassNames(t)[r+"ClassName"],l=this.getClassNames("enter"),d=l.doneClassName;t==="appear"&&r==="done"&&d&&(o+=" "+d),r==="active"&&n&&Qe(n),o&&(this.appliedClasses[t][r]=o,rn(n,o))},s.removeClasses=function(n,t){var r=this.appliedClasses[t],o=r.base,l=r.active,d=r.done;this.appliedClasses[t]={},o&&ve(n,o),l&&ve(n,l),d&&ve(n,d)},s.render=function(){var n=this.props;n.classNames;var t=Pe(n,["classNames"]);return c.createElement($,fe({},t,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},a})(c.Component);we.defaultProps={classNames:""};we.propTypes={};function ln(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function _e(i,a){var s=function(t){return a&&p.isValidElement(t)?a(t):t},e=Object.create(null);return i&&p.Children.map(i,function(n){return n}).forEach(function(n){e[n.key]=s(n)}),e}function on(i,a){i=i||{},a=a||{};function s(f){return f in a?a[f]:i[f]}var e=Object.create(null),n=[];for(var t in i)t in a?n.length&&(e[t]=n,n=[]):n.push(t);var r,o={};for(var l in a){if(e[l])for(r=0;r<e[l].length;r++){var d=e[l][r];o[e[l][r]]=s(d)}o[l]=s(l)}for(r=0;r<n.length;r++)o[n[r]]=s(n[r]);return o}function Y(i,a,s){return s[a]!=null?s[a]:i.props[a]}function cn(i,a){return _e(i.children,function(s){return p.cloneElement(s,{onExited:a.bind(null,s),in:!0,appear:Y(s,"appear",i),enter:Y(s,"enter",i),exit:Y(s,"exit",i)})})}function dn(i,a,s){var e=_e(i.children),n=on(a,e);return Object.keys(n).forEach(function(t){var r=n[t];if(p.isValidElement(r)){var o=t in a,l=t in e,d=a[t],f=p.isValidElement(d)&&!d.props.in;l&&(!o||f)?n[t]=p.cloneElement(r,{onExited:s.bind(null,r),in:!0,exit:Y(r,"exit",i),enter:Y(r,"enter",i)}):!l&&o&&!f?n[t]=p.cloneElement(r,{in:!1}):l&&o&&p.isValidElement(d)&&(n[t]=p.cloneElement(r,{onExited:s.bind(null,r),in:d.props.in,exit:Y(r,"exit",i),enter:Y(r,"enter",i)}))}}),n}var un=Object.values||function(i){return Object.keys(i).map(function(a){return i[a]})},fn={component:"div",childFactory:function(a){return a}},Me=(function(i){je(a,i);function a(e,n){var t;t=i.call(this,e,n)||this;var r=t.handleExited.bind(ln(t));return t.state={contextValue:{isMounting:!0},handleExited:r,firstRender:!0},t}var s=a.prototype;return s.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},s.componentWillUnmount=function(){this.mounted=!1},a.getDerivedStateFromProps=function(n,t){var r=t.children,o=t.handleExited,l=t.firstRender;return{children:l?cn(n,o):dn(n,r,o),firstRender:!1}},s.handleExited=function(n,t){var r=_e(this.props.children);n.key in r||(n.props.onExited&&n.props.onExited(t),this.mounted&&this.setState(function(o){var l=fe({},o.children);return delete l[n.key],{children:l}}))},s.render=function(){var n=this.props,t=n.component,r=n.childFactory,o=Pe(n,["component","childFactory"]),l=this.state.contextValue,d=un(this.state.children).map(r);return delete o.appear,delete o.enter,delete o.exit,t===null?c.createElement(he.Provider,{value:l},d):c.createElement(he.Provider,{value:l},c.createElement(t,o,d))},a})(c.Component);Me.propTypes={};Me.defaultProps=fn;var Ee={Body:"Polaris-Modal__Body",NoScrollBody:"Polaris-Modal__NoScrollBody",IFrame:"Polaris-Modal__IFrame"},$e={Section:"Polaris-Modal-Section",titleHidden:"Polaris-Modal-Section--titleHidden"};function et({children:i,flush:a=!1,subdued:s=!1,titleHidden:e=!1}){const n=P($e.Section,e&&$e.titleHidden);return c.createElement("div",{className:n},c.createElement(K,Object.assign({as:"section",padding:a?"0":"400"},e&&{paddingInlineEnd:"0"},s&&{background:"bg-surface-tertiary"}),i))}var w={Container:"Polaris-Modal-Dialog__Container",Dialog:"Polaris-Modal-Dialog",Modal:"Polaris-Modal-Dialog__Modal",limitHeight:"Polaris-Modal-Dialog--limitHeight",sizeSmall:"Polaris-Modal-Dialog--sizeSmall",sizeLarge:"Polaris-Modal-Dialog--sizeLarge",sizeFullScreen:"Polaris-Modal-Dialog--sizeFullScreen",animateFadeUp:"Polaris-Modal-Dialog--animateFadeUp",entering:"Polaris-Modal-Dialog--entering",exiting:"Polaris-Modal-Dialog--exiting",exited:"Polaris-Modal-Dialog--exited",entered:"Polaris-Modal-Dialog--entered"};function hn({trapping:i}){const a=p.useContext(_t),s=p.useId();if(!a)throw new De("No FocusManager was provided.");const{trapFocusList:e,add:n,remove:t}=a,r=e[0]===s,o=p.useMemo(()=>({canSafelyFocus:r}),[r]);return p.useEffect(()=>{if(i)return n(s),()=>{t(s)}},[n,s,t,i]),o}function pn({trapping:i=!0,children:a}){const{canSafelyFocus:s}=hn({trapping:i}),e=p.useRef(null),[n,t]=p.useState(!0);p.useEffect(()=>{const l=s&&!(e.current&&e.current.contains(document.activeElement))?!i:!0;t(l)},[s,i]);const r=l=>{const d=e.current&&e.current.contains(document.activeElement);i===!1||!e.current||d||l.target instanceof Element&&l.target.matches(`${Pt.selector} *`)||s&&l.target instanceof HTMLElement&&e.current!==l.target&&!e.current.contains(l.target)&&pe(e.current)},o=l=>{if(i===!1||!e.current)return;const d=ht(e.current),f=pt(e.current);l.target===f&&!l.shiftKey&&(l.preventDefault(),mt(e.current)),l.target===d&&l.shiftKey&&(l.preventDefault(),gt(e.current))};return c.createElement(en,{disabled:n,root:e.current},c.createElement("div",{ref:e},c.createElement(ke,{event:"focusin",handler:r}),c.createElement(xe,{keyCode:ye.Tab,keyEvent:"keydown",handler:o}),a))}function mn({instant:i,labelledBy:a,children:s,limitHeight:e,size:n,onClose:t,onExited:r,onEntered:o,setClosing:l,hasToasts:d,...f}){const h=jt(),m=p.useRef(null),C=p.useContext(Ot);let v;C&&(v=C.toastMessages);const S=P(w.Modal,n&&w[qe("size",n)],e&&w.limitHeight),x=i?$:bn;p.useEffect(()=>{m.current&&!m.current.contains(document.activeElement)&&pe(m.current)},[]);const k=()=>{l&&l(!0)},H=()=>{l&&l(!1),t()},L=c.createElement("div",{"aria-live":"assertive"},v?v.map(_=>c.createElement(Ke,{visuallyHidden:!0,as:"p",key:_.id},_.content)):null);return c.createElement(x,Object.assign({},f,{nodeRef:m,mountOnEnter:!0,unmountOnExit:!0,timeout:parseInt(h.motion["motion-duration-200"],10),onEntered:o,onExited:r}),c.createElement("div",{className:w.Container,"data-polaris-layer":!0,"data-polaris-overlay":!0,ref:m},c.createElement(pn,null,c.createElement("div",{role:"dialog","aria-modal":!0,"aria-label":a,"aria-labelledby":a,tabIndex:-1,className:w.Dialog},c.createElement("div",{className:S},c.createElement(xe,{keyCode:ye.Escape,keyEvent:"keydown",handler:k}),c.createElement(xe,{keyCode:ye.Escape,handler:H}),s),L))))}const gn={appear:P(w.animateFadeUp,w.entering),appearActive:P(w.animateFadeUp,w.entered),enter:P(w.animateFadeUp,w.entering),enterActive:P(w.animateFadeUp,w.entered),exit:P(w.animateFadeUp,w.exiting),exitActive:P(w.animateFadeUp,w.exited)};function bn({children:i,...a}){return c.createElement(we,Object.assign({},a,{classNames:gn}),i)}function ze({pressed:i,onClick:a}){const s=ce();return c.createElement(ne,{variant:"tertiary",pressed:i,icon:yt,onClick:a,accessibilityLabel:s.translate("Polaris.Common.close")})}function Cn({id:i,children:a,closing:s,titleHidden:e,onClose:n}){return e||!a?c.createElement(K,{position:"absolute",insetInlineEnd:"400",insetBlockStart:"400",zIndex:"1"},c.createElement(ze,{onClick:n})):c.createElement(K,{paddingBlockStart:"400",paddingBlockEnd:"400",paddingInlineStart:"400",paddingInlineEnd:"400",borderBlockEndWidth:"025",borderColor:"border",background:"bg-surface-tertiary"},c.createElement(It,{columns:{xs:"1fr auto"},gap:"400"},c.createElement(A,{gap:"400",blockAlign:"center"},c.createElement(Ke,{id:i,as:"h2",variant:"headingMd",breakWord:!0},a)),c.createElement(ze,{pressed:s,onClick:n})))}function vn({primaryAction:i,secondaryActions:a,children:s}){const e=i&&He(i,{variant:"primary"})||null,n=a&&He(a)||null,t=e||n?c.createElement(A,{gap:"200"},n,e):null;return c.createElement(A,{gap:"400",blockAlign:"center"},c.createElement(K,{borderColor:"border",borderBlockStartWidth:"025",padding:"400",width:"100%"},c.createElement(A,{gap:"400",blockAlign:"center",align:"space-between"},c.createElement(K,null,s),t)))}const Ue=200,En=400,Fe=function({children:a,title:s,titleHidden:e=!1,src:n,iFrameName:t,open:r,instant:o,sectioned:l,loading:d,size:f,limitHeight:h,footer:m,primaryAction:C,secondaryActions:v,onScrolledToBottom:S,activator:x,activatorWrapper:k="div",onClose:H,onIFrameLoad:L,onTransitionEnd:_,noScroll:W}){const[z,I]=p.useState(Ue),[M,j]=p.useState(!1),g=p.useId(),E=p.useRef(null),F=ce().translate("Polaris.Modal.iFrameTitle");let R,D;const se=p.useCallback(()=>{_&&_()},[_]),ae=p.useCallback(()=>{I(Ue);const O=x&&Ge(x)?x&&x.current:E.current;O&&requestAnimationFrame(()=>pe(O))},[x]),ie=p.useCallback(O=>{const B=O.target;if(B&&B.contentWindow)try{I(B.contentWindow.document.body.scrollHeight)}catch{I(En)}L!=null&&L(O)},[L]);if(r){const O=!m&&!C&&!v?null:c.createElement(vn,{primaryAction:C,secondaryActions:v},m),B=l?bt(a,et,{titleHidden:e}):a,V=d?c.createElement(K,{padding:"400"},c.createElement(A,{gap:"400",align:"center",blockAlign:"center"},c.createElement(Ze,null))):B,y=W?c.createElement("div",{className:Ee.NoScrollBody},c.createElement(K,{width:"100%",overflowX:"hidden",overflowY:"hidden"},V)):c.createElement(Et,{shadow:!0,className:Ee.Body,onScrolledToBottom:S},V),N=n?c.createElement("iframe",{name:t,title:F,src:n,className:Ee.IFrame,onLoad:ie,style:{height:`${z}px`}}):y;R=c.createElement(mn,{instant:o,labelledBy:g,onClose:H,onEntered:se,onExited:ae,size:f,limitHeight:h,setClosing:j},c.createElement(Cn,{titleHidden:e,id:g,closing:M,onClose:H},s),N,O),D=c.createElement(Ht,{setClosing:j,onClick:H})}const U=!o,re=x&&!Ge(x)?c.createElement(K,{ref:E,as:k},x):null;return c.createElement(Ct.Provider,{value:!0},re,c.createElement(vt,{idPrefix:"modal"},c.createElement(Me,{appear:U,enter:U,exit:U},R),D))};function Ge(i){return Object.prototype.hasOwnProperty.call(i,"current")}Fe.Section=et;function xn(i,a,s="all"){let e=i;return s==="k18"&&(e=i.filter(n=>n.title.includes("K18")||n.title.includes("18金"))),a&&(e=e.filter(n=>n.title.toLowerCase().includes(a.toLowerCase())||n.handle.toLowerCase().includes(a.toLowerCase()))),e}function yn(i,a,s=.93){const e=i*(1+a),n=i*s,t=Math.max(e,n);return Math.ceil(t/10)*10}function Sn({products:i,goldPrice:a,selectedProductIds:s,shopSetting:e}){var M,j;const n=at(),[t,r]=p.useState([]),[o,l]=p.useState(""),[d,f]=p.useState("all"),[h,m]=p.useState((e==null?void 0:e.minPricePct)||93),[C,v]=p.useState(!1),[S,x]=p.useState([]);p.useEffect(()=>{if(s&&s.length>0){const g=i.filter(E=>s.includes(E.id));r(g)}},[i,s]);const k=xn(i,o,d),H=p.useCallback((g,E)=>{const T=i.find(F=>F.id===g);r(E?F=>[...F,T]:F=>F.filter(R=>R.id!==g))},[i]),L=p.useCallback(g=>{r(g?k:[])},[k]),_=p.useCallback(()=>{const g=new FormData;g.append("action","saveSelection"),t.forEach(E=>{g.append("productId",E.id)}),n.submit(g,{method:"post"})},[t,n]),W=p.useCallback(()=>{if(t.length===0||!a)return;const g=t.map(E=>({...E,variants:E.variants.edges.map(T=>{const F=T.node,R=parseFloat(F.price),D=yn(R,a.ratio,h/100);return{...F,currentPrice:R,newPrice:D,priceChange:D-R,changed:D!==R}})}));x(g),v(!0)},[t,a,h]),z=p.useCallback(()=>{if(!a)return;const g=t.map(E=>({...E,variants:E.variants.edges.map(T=>T.node)}));n.submit({action:"updatePrices",selectedProducts:JSON.stringify(g),minPriceRate:h.toString()},{method:"post"}),v(!1)},[t,a,h,n]),I=k.map(g=>{var R;const E=t.some(D=>D.id===g.id),T=g.variants.edges,F=T.length>1?`¥${Math.min(...T.map(D=>parseFloat(D.node.price)))} - ¥${Math.max(...T.map(D=>parseFloat(D.node.price)))}`:`¥${((R=T[0])==null?void 0:R.node.price)||0}`;return[u.jsx(St,{checked:E,onChange:D=>H(g.id,D)}),g.title,u.jsx(ue,{status:g.status==="ACTIVE"?"success":"critical",children:g.status}),F,T.length]});return u.jsx(Xe,{title:"商品価格自動調整",subtitle:`${k.length}件の商品（全${i.length}件）`,primaryAction:{content:"価格調整プレビュー",onAction:W,disabled:t.length===0||!a,loading:n.state==="submitting"},children:u.jsxs(q,{children:[u.jsxs(q.Section,{children:[a&&u.jsx(G,{children:u.jsxs(J,{gap:"400",children:[u.jsxs(A,{align:"space-between",children:[u.jsx("h3",{children:"田中貴金属 金価格情報"}),u.jsx(ue,{tone:a.changeDirection==="up"?"attention":a.changeDirection==="down"?"success":"info",children:a.changeDirection==="up"?"上昇":a.changeDirection==="down"?"下落":"変動なし"})]}),u.jsxs(A,{gap:"600",children:[u.jsxs("div",{children:[u.jsx("p",{style:{color:"#6B7280",fontSize:"14px"},children:"店頭小売価格（税込）"}),u.jsx("p",{style:{fontSize:"18px",fontWeight:"bold"},children:a.retailPriceFormatted})]}),u.jsxs("div",{children:[u.jsx("p",{style:{color:"#6B7280",fontSize:"14px"},children:"前日比"}),u.jsx("p",{style:{fontSize:"18px",fontWeight:"bold",color:a.changeDirection==="up"?"#DC2626":a.changeDirection==="down"?"#059669":"#6B7280"},children:a.change})]})]}),u.jsx("div",{style:{padding:"12px",backgroundColor:"#F3F4F6",borderRadius:"8px"},children:u.jsxs("p",{style:{margin:0},children:[u.jsxs("strong",{children:["価格調整率: ",a.percentage,"%"]}),"（この変動率で商品価格を自動調整します）"]})}),u.jsxs("p",{style:{color:"#6B7280",fontSize:"12px",margin:0},children:["最終更新: ",new Date(a.lastUpdated).toLocaleString("ja-JP")]})]})}),!a&&u.jsx(Q,{tone:"critical",children:"金価格情報の取得に失敗しました。価格調整機能をご利用いただけません。"})]}),u.jsx(q.Section,{children:u.jsx(G,{children:u.jsxs(J,{gap:"400",children:[u.jsxs(A,{gap:"400",children:[u.jsx("div",{style:{flex:1},children:u.jsx(Le,{label:"商品検索",value:o,onChange:l,placeholder:"商品名またはハンドルで検索...",clearButton:!0,onClearButtonClick:()=>l("")})}),u.jsx("div",{style:{minWidth:"150px"},children:u.jsx(kt,{label:"商品フィルター",options:[{label:"すべての商品",value:"all"},{label:"K18商品のみ",value:"k18"}],value:d,onChange:f})})]}),u.jsx(Le,{label:"価格下限設定 (%)",type:"number",value:h.toString(),onChange:g=>m(parseInt(g)||93),suffix:"%",helpText:"現在価格に対する最低価格の割合（例: 93% = 7%以上は下がらない）",min:"50",max:"100"}),u.jsxs(xt,{children:[u.jsx(ne,{onClick:()=>L(!0),disabled:k.length===0,children:"すべて選択"}),u.jsx(ne,{onClick:()=>L(!1),disabled:t.length===0,children:"選択解除"}),u.jsx(ne,{onClick:_,disabled:n.state==="submitting",variant:"primary",children:"選択を保存"})]}),s&&s.length>0&&u.jsxs(Q,{tone:"info",children:["現在 ",s.length," 件の商品が自動更新対象として保存されています"]}),((M=n.data)==null?void 0:M.message)&&u.jsx(Q,{tone:"success",children:n.data.message})]})})}),u.jsx(q.Section,{children:u.jsx(G,{children:u.jsx(Qt,{columnContentTypes:["text","text","text","text","numeric"],headings:["選択","商品名","ステータス","価格","バリエーション"],rows:I,pagination:{hasNext:!1,hasPrevious:!1}})})}),u.jsx(Fe,{open:C,onClose:()=>v(!1),title:"価格調整プレビュー",primaryAction:{content:"価格を更新",onAction:z,loading:n.state==="submitting"},secondaryActions:[{content:"キャンセル",onAction:()=>v(!1)}],large:!0,children:u.jsx(Fe.Section,{children:u.jsx(J,{gap:"400",children:S.map(g=>u.jsx(G,{children:u.jsxs(J,{gap:"300",children:[u.jsx("h4",{children:g.title}),g.variants.map(E=>u.jsxs(A,{align:"space-between",children:[u.jsx("span",{children:E.title||"デフォルト"}),u.jsxs(A,{gap:"200",children:[u.jsxs("span",{children:["¥",E.currentPrice," → ¥",E.newPrice]}),E.changed&&u.jsxs(ue,{tone:E.priceChange>0?"warning":"success",children:[E.priceChange>0?"+":"",E.priceChange,"円"]})]})]},E.id))]})},g.id))})})}),((j=n.data)==null?void 0:j.updateResults)&&u.jsx(q.Section,{children:u.jsx(G,{children:u.jsxs(J,{gap:"400",children:[u.jsx("h3",{children:"価格更新結果"}),n.data.summary&&u.jsx(G,{background:"bg-surface-secondary",children:u.jsxs(A,{gap:"400",children:[u.jsxs("div",{children:["合計: ",u.jsx("strong",{children:n.data.summary.total}),"件"]}),u.jsxs("div",{children:["成功: ",u.jsx("strong",{style:{color:"green"},children:n.data.summary.success}),"件"]}),u.jsxs("div",{children:["失敗: ",u.jsx("strong",{style:{color:"red"},children:n.data.summary.failed}),"件"]})]})}),n.data.error&&u.jsx(Q,{tone:"critical",children:n.data.error}),n.data.message&&u.jsx(Q,{tone:"info",children:n.data.message}),n.data.updateResults.map((g,E)=>{var T,F;return u.jsx(Q,{tone:g.success?"success":"critical",children:g.success?`${g.product} - ${g.variant}: ¥${(T=g.oldPrice)==null?void 0:T.toLocaleString()} → ¥${(F=g.newPrice)==null?void 0:F.toLocaleString()}`:`${g.product} - ${g.variant}: ${g.error}`},E)})]})})})]})})}function wn(){const i=nt(),{goldPrice:a,selectedProductIds:s,shopSetting:e}=i;return u.jsx(p.Suspense,{fallback:u.jsx(Xe,{title:"商品価格自動調整",subtitle:"読み込み中...",children:u.jsxs(q,{children:[u.jsx(q.Section,{children:a&&u.jsx(G,{children:u.jsxs(J,{gap:"400",children:[u.jsxs(A,{align:"space-between",children:[u.jsx("h3",{children:"田中貴金属 金価格情報"}),u.jsx(ue,{tone:a.changeDirection==="up"?"attention":a.changeDirection==="down"?"success":"info",children:a.changeDirection==="up"?"上昇":a.changeDirection==="down"?"下落":"変動なし"})]}),u.jsxs(A,{gap:"600",children:[u.jsxs("div",{children:[u.jsx("p",{style:{color:"#6B7280",fontSize:"14px"},children:"店頭小売価格（税込）"}),u.jsx("p",{style:{fontSize:"18px",fontWeight:"bold"},children:a.retailPriceFormatted})]}),u.jsxs("div",{children:[u.jsx("p",{style:{color:"#6B7280",fontSize:"14px"},children:"前日比"}),u.jsx("p",{style:{fontSize:"18px",fontWeight:"bold",color:a.changeDirection==="up"?"#DC2626":a.changeDirection==="down"?"#059669":"#6B7280"},children:a.change})]})]}),u.jsx("div",{style:{padding:"12px",backgroundColor:"#F3F4F6",borderRadius:"8px"},children:u.jsxs("p",{style:{margin:0},children:[u.jsxs("strong",{children:["価格調整率: ",a.percentage,"%"]}),"（この変動率で商品価格を自動調整します）"]})}),u.jsxs("p",{style:{color:"#6B7280",fontSize:"12px",margin:0},children:["最終更新: ",new Date(a.lastUpdated).toLocaleString("ja-JP")]})]})})}),u.jsx(q.Section,{children:u.jsx(G,{children:u.jsx(J,{gap:"400",children:u.jsxs("div",{style:{textAlign:"center",padding:"60px 20px"},children:[u.jsx(Ze,{size:"large"}),u.jsx("p",{style:{marginTop:"20px",color:"#6B7280"},children:"商品データを読み込んでいます..."})]})})})})]})}),children:u.jsx(st,{resolve:i.products,children:n=>u.jsx(Sn,{products:n,goldPrice:a,selectedProductIds:s,shopSetting:e})})})}export{wn as default};
