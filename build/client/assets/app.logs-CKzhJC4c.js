import{g as ge,R as c,r as _,j as l}from"./index-OtPSfN_w.js";import{u as Ce}from"./components-C9-D01ZZ.js";import{g as ne,f as D,v as ye,j as xe,b as w,B as re,k as ve,l as Se,m as Te,T as b,d as oe,I as L,n as ce,P as je,c as F,C as I,e as B,a as Ee}from"./Page-DvMnY4Uh.js";import{S as de}from"./CheckCircleIcon.svg-BdEOQivI.js";import{L as ue}from"./Layout-BvDTjT3E.js";import{S as se}from"./ClockIcon.svg-Dq65wAvQ.js";import{S as he}from"./Select-DS1yuizv.js";import{h as ae,d as Fe,E as fe}from"./context-C9td0CMk.js";import{S as De,a as _e,A as ke,b as Pe}from"./Sticky-DAC3dAc4.js";var le,me;function He(){if(me)return le;me=1;var p=typeof Element<"u",h=typeof Map=="function",s=typeof Set=="function",e=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function r(t,i){if(t===i)return!0;if(t&&i&&typeof t=="object"&&typeof i=="object"){if(t.constructor!==i.constructor)return!1;var d,a,o;if(Array.isArray(t)){if(d=t.length,d!=i.length)return!1;for(a=d;a--!==0;)if(!r(t[a],i[a]))return!1;return!0}var n;if(h&&t instanceof Map&&i instanceof Map){if(t.size!==i.size)return!1;for(n=t.entries();!(a=n.next()).done;)if(!i.has(a.value[0]))return!1;for(n=t.entries();!(a=n.next()).done;)if(!r(a.value[1],i.get(a.value[0])))return!1;return!0}if(s&&t instanceof Set&&i instanceof Set){if(t.size!==i.size)return!1;for(n=t.entries();!(a=n.next()).done;)if(!i.has(a.value[0]))return!1;return!0}if(e&&ArrayBuffer.isView(t)&&ArrayBuffer.isView(i)){if(d=t.length,d!=i.length)return!1;for(a=d;a--!==0;)if(t[a]!==i[a])return!1;return!0}if(t.constructor===RegExp)return t.source===i.source&&t.flags===i.flags;if(t.valueOf!==Object.prototype.valueOf&&typeof t.valueOf=="function"&&typeof i.valueOf=="function")return t.valueOf()===i.valueOf();if(t.toString!==Object.prototype.toString&&typeof t.toString=="function"&&typeof i.toString=="function")return t.toString()===i.toString();if(o=Object.keys(t),d=o.length,d!==Object.keys(i).length)return!1;for(a=d;a--!==0;)if(!Object.prototype.hasOwnProperty.call(i,o[a]))return!1;if(p&&t instanceof Element)return!1;for(a=d;a--!==0;)if(!((o[a]==="_owner"||o[a]==="__v"||o[a]==="__o")&&t.$$typeof)&&!r(t[o[a]],i[o[a]]))return!1;return!0}return t!==t&&i!==i}return le=function(i,d){try{return r(i,d)}catch(a){if((a.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw a}},le}var Re=He();const Le=ge(Re);function we(p){return function(h,s){const{firstVisibleColumnIndex:e,tableLeftVisibleEdge:r,tableRightVisibleEdge:t}=p,i=h.offsetLeft,d=i+h.offsetWidth,a=be(i,r,t,"left"),o=be(d,r,t,"right"),n=a||o,f=h.offsetWidth;return n&&(p.firstVisibleColumnIndex=Math.min(e,s)),{leftEdge:i,rightEdge:d,isVisible:n,width:f,index:s}}}function be(p,h,s,e){return p>=h+(e==="left"?0:30)&&p<=s-30}function Ne(p,h){const{firstVisibleColumnIndex:s}=p,e=Math.max(s-1,0),r=h[e],t=h[s];return{previousColumn:r,currentColumn:t}}var u={DataTable:"Polaris-DataTable",condensed:"Polaris-DataTable--condensed",Navigation:"Polaris-DataTable__Navigation",Pip:"Polaris-DataTable__Pip","Pip-visible":"Polaris-DataTable__Pip--visible",ScrollContainer:"Polaris-DataTable__ScrollContainer",Table:"Polaris-DataTable__Table",TableRow:"Polaris-DataTable__TableRow",Cell:"Polaris-DataTable__Cell",IncreasedTableDensity:"Polaris-DataTable__IncreasedTableDensity",ZebraStripingOnData:"Polaris-DataTable__ZebraStripingOnData",RowCountIsEven:"Polaris-DataTable__RowCountIsEven",ShowTotalsInFooter:"Polaris-DataTable__ShowTotalsInFooter","Cell-separate":"Polaris-DataTable__Cell--separate","Cell-firstColumn":"Polaris-DataTable__Cell--firstColumn","Cell-numeric":"Polaris-DataTable__Cell--numeric","Cell-truncated":"Polaris-DataTable__Cell--truncated","Cell-header":"Polaris-DataTable__Cell--header","Cell-sortable":"Polaris-DataTable__Cell--sortable","Heading-left":"Polaris-DataTable__Heading--left","Cell-verticalAlignTop":"Polaris-DataTable__Cell--verticalAlignTop","Cell-verticalAlignBottom":"Polaris-DataTable__Cell--verticalAlignBottom","Cell-verticalAlignMiddle":"Polaris-DataTable__Cell--verticalAlignMiddle","Cell-verticalAlignBaseline":"Polaris-DataTable__Cell--verticalAlignBaseline",hoverable:"Polaris-DataTable--hoverable","Cell-hovered":"Polaris-DataTable__Cell--hovered",Icon:"Polaris-DataTable__Icon",Heading:"Polaris-DataTable__Heading",StickyHeaderEnabled:"Polaris-DataTable__StickyHeaderEnabled",StickyHeaderWrapper:"Polaris-DataTable__StickyHeaderWrapper","Cell-sorted":"Polaris-DataTable__Cell--sorted","Cell-total":"Polaris-DataTable__Cell--total",ShowTotals:"Polaris-DataTable__ShowTotals","Cell-total-footer":"Polaris-DataTable--cellTotalFooter",Footer:"Polaris-DataTable__Footer",StickyHeaderInner:"Polaris-DataTable__StickyHeaderInner","StickyHeaderInner-isSticky":"Polaris-DataTable__StickyHeaderInner--isSticky",StickyHeaderTable:"Polaris-DataTable__StickyHeaderTable",FixedFirstColumn:"Polaris-DataTable__FixedFirstColumn",StickyTableHeadingsRow:"Polaris-DataTable__StickyTableHeadingsRow",TooltipContent:"Polaris-DataTable__TooltipContent"};function q({content:p,contentType:h,nthColumn:s,firstColumn:e,truncate:r,header:t,total:i,totalInFooter:d,sorted:a,sortable:o,sortDirection:n,inFixedNthColumn:f,verticalAlign:m="top",defaultSortDirection:g="ascending",onSort:y,colSpan:v,setRef:S=()=>{},stickyHeadingCell:T=!1,stickyCellWidth:P,hovered:V=!1,handleFocus:H=()=>{},hasFixedNthColumn:N=!1,fixedCellVisible:W=!1,firstColumnMinWidth:k,style:E,lastFixedFirstColumn:j}){const M=ne(),O=h==="numeric",A=D(u.Cell,u[`Cell-${ye("verticalAlign",m)}`],e&&u["Cell-firstColumn"],r&&u["Cell-truncated"],t&&u["Cell-header"],i&&u["Cell-total"],d&&u["Cell-total-footer"],O&&u["Cell-numeric"],o&&u["Cell-sortable"],a&&u["Cell-sorted"],T&&u.StickyHeaderCell,V&&u["Cell-hovered"],j&&f&&W&&u["Cell-separate"],s&&f&&T&&u.FixedFirstColumn),Q=D(t&&u.Heading,t&&h==="text"&&u["Heading-left"]),U=D(o&&u.Icon),z=a&&n?n:g,J=z==="descending"?De:_e,G=n==="ascending"?"descending":"ascending",K=M.translate("Polaris.DataTable.sortAccessibilityLabel",{direction:a?G:z}),Z=c.createElement("span",{className:U},c.createElement(w,{source:J,accessibilityLabel:K})),X=!(T&&N&&s&&!f),$=o?c.createElement("button",{className:Q,onClick:y,onFocus:H,tabIndex:X?0:-1},Z,p):p,R=v&&v>1?{colSpan:v}:{},C=s&&k?{minWidth:k}:{minWidth:P},x=c.createElement("th",Object.assign({ref:S},ae.props,R,{className:A,"aria-sort":n,style:{...E,...C},"data-index-table-sticky-heading":!0}),$),ee=t?c.createElement("th",Object.assign({},ae.props,{"aria-sort":n},R,{ref:S,className:A,scope:"col",style:{...C}}),$):c.createElement("th",Object.assign({},R,{ref:S,className:A,scope:"row",style:{...C}}),r?c.createElement(Me,{className:u.TooltipContent},p):p),te=t||e||s?ee:c.createElement("td",Object.assign({className:A},R),p);return T?x:te}const Me=({children:p,className:h=""})=>{const s=_.useRef(null),{current:e}=s,r=c.createElement("span",{ref:s,className:h},p);return(e==null?void 0:e.scrollWidth)>(e==null?void 0:e.offsetWidth)?c.createElement(xe,{content:s.current.innerText},r):r};function Ae({columnVisibilityData:p,isScrolledFarthestLeft:h,isScrolledFarthestRight:s,navigateTableLeft:e,navigateTableRight:r,fixedFirstColumns:t,setRef:i=()=>{}}){const d=ne(),a=p.map((f,m)=>{if(m<t)return;const g=D(u.Pip,f.isVisible&&u["Pip-visible"]);return c.createElement("div",{className:g,key:`pip-${m}`})}),o=d.translate("Polaris.DataTable.navAccessibilityLabel",{direction:"left"}),n=d.translate("Polaris.DataTable.navAccessibilityLabel",{direction:"right"});return c.createElement("div",{className:u.Navigation,ref:i},c.createElement(re,{variant:"tertiary",icon:ve,disabled:h,accessibilityLabel:o,onClick:e}),a,c.createElement(re,{variant:"tertiary",icon:Se,disabled:s,accessibilityLabel:n,onClick:r}))}const pe=p=>{const h=[];return p&&p.forEach(s=>{h.push(s.clientHeight)}),h};class Ie extends _.PureComponent{constructor(...h){super(...h),this.state={condensed:!1,columnVisibilityData:[],isScrolledFarthestLeft:!0,isScrolledFarthestRight:!1,rowHovered:void 0},this.dataTable=_.createRef(),this.scrollContainer=_.createRef(),this.table=_.createRef(),this.stickyTable=_.createRef(),this.stickyNav=null,this.headerNav=null,this.tableHeadings=[],this.stickyHeadings=[],this.tableHeadingWidths=[],this.stickyHeaderActive=!1,this.scrollStopTimer=null,this.handleResize=Fe(()=>{const{table:{current:s},scrollContainer:{current:e}}=this;let r=!1;s&&e&&(r=s.scrollWidth>e.clientWidth+1),this.setState({condensed:r,...this.calculateColumnVisibilityData(r)})}),this.setCellRef=({ref:s,index:e,inStickyHeader:r})=>{if(s!=null)if(r){this.stickyHeadings[e]=s;const t=s.querySelector("button");if(t==null)return;t.addEventListener("focus",this.handleHeaderButtonFocus)}else this.tableHeadings[e]=s,this.tableHeadingWidths[e]=s.clientWidth},this.changeHeadingFocus=()=>{const{tableHeadings:s,stickyHeadings:e,stickyNav:r,headerNav:t}=this,i=e.findIndex(g=>{var y;return g===((y=document.activeElement)==null?void 0:y.parentElement)}),d=s.findIndex(g=>{var y;return g===((y=document.activeElement)==null?void 0:y.parentElement)}),a=r==null?void 0:r.querySelectorAll("button"),o=t==null?void 0:t.querySelectorAll("button");let n=-1;a==null||a.forEach((g,y)=>{g===document.activeElement&&(n=y)});let f=-1;if(o==null||o.forEach((g,y)=>{g===document.activeElement&&(f=y)}),i<0&&d<0&&n<0&&f<0)return null;let m;if(i>=0?m=s[i].querySelector("button"):d>=0&&(m=e[d].querySelector("button")),n>=0?m=o==null?void 0:o[n]:f>=0&&(m=a==null?void 0:a[f]),m==null)return null;m.style.visibility="visible",m.focus(),m.style.removeProperty("visibility")},this.calculateColumnVisibilityData=s=>{const e=this.fixedFirstColumns(),{table:{current:r},scrollContainer:{current:t},dataTable:{current:i}}=this,{stickyHeader:d}=this.props;if((d||s)&&r&&t&&i){const a=r.querySelectorAll(ae.selector),o=a[e-1],n=e?o.offsetLeft+o.offsetWidth:0;if(a.length>0){const f=a.length-1,m=t.scrollLeft+n,g=t.scrollLeft+i.offsetWidth,y={firstVisibleColumnIndex:f,tableLeftVisibleEdge:m,tableRightVisibleEdge:g},v=[...a].map(we(y)),S=v[v.length-1],T=e?m===n:m===0;return{columnVisibilityData:v,...Ne(y,v),isScrolledFarthestLeft:T,isScrolledFarthestRight:S.rightEdge<=g}}}return{columnVisibilityData:[],previousColumn:void 0,currentColumn:void 0}},this.handleHeaderButtonFocus=s=>{var m;const e=this.fixedFirstColumns();if(this.scrollContainer.current==null||s.target==null||this.state.columnVisibilityData.length===0)return;const t=s.target.parentNode,i=this.scrollContainer.current.scrollLeft,d=this.scrollContainer.current.offsetWidth,a=i+d,o=this.state.columnVisibilityData.length>0?(m=this.state.columnVisibilityData[e])==null?void 0:m.rightEdge:0,n=t.offsetLeft,f=t.offsetLeft+t.offsetWidth;i>n-o&&(this.scrollContainer.current.scrollLeft=n-o),f>a&&(this.scrollContainer.current.scrollLeft=f-d)},this.stickyHeaderScrolling=()=>{const{current:s}=this.stickyTable,{current:e}=this.scrollContainer;s==null||e==null||(s.scrollLeft=e.scrollLeft)},this.scrollListener=()=>{var s;this.scrollStopTimer&&clearTimeout(this.scrollStopTimer),this.scrollStopTimer=setTimeout(()=>{this.setState(e=>({...this.calculateColumnVisibilityData(e.condensed)}))},100),this.setState({isScrolledFarthestLeft:((s=this.scrollContainer.current)==null?void 0:s.scrollLeft)===0}),this.props.stickyHeader&&this.stickyHeaderActive&&this.stickyHeaderScrolling()},this.handleHover=s=>()=>{this.setState({rowHovered:s})},this.handleFocus=s=>{var o;const e=this.fixedFirstColumns();if(this.scrollContainer.current==null||s.target==null)return;const r=s.target.parentNode,i=this.props?(o=this.state.columnVisibilityData[e])==null?void 0:o.rightEdge:0,a=r.offsetLeft-i;this.scrollContainer.current.scrollLeft>a&&(this.scrollContainer.current.scrollLeft=a)},this.navigateTable=s=>{var n;const e=this.fixedFirstColumns(),{currentColumn:r,previousColumn:t}=this.state,i=(n=this.state.columnVisibilityData[e-1])==null?void 0:n.rightEdge;if(!r||!t)return;let d=0;for(let f=0;f<r.index;f++)d+=this.state.columnVisibilityData[f].width;const{current:a}=this.scrollContainer;return()=>{let f=0;e?f=s==="right"?d-i+r.width:d-t.width-i:f=s==="right"?r.rightEdge:t.leftEdge,a&&(a.scrollLeft=f,requestAnimationFrame(()=>{this.setState(m=>({...this.calculateColumnVisibilityData(m.condensed)}))}))}},this.renderHeading=({heading:s,headingIndex:e,inFixedNthColumn:r,inStickyHeader:t})=>{var E;const{sortable:i,truncate:d=!1,columnContentTypes:a,defaultSortDirection:o,initialSortColumnIndex:n=0,verticalAlign:f,firstColumnMinWidth:m}=this.props,g=this.fixedFirstColumns(),{sortDirection:y=o,sortedColumnIndex:v=n,isScrolledFarthestLeft:S}=this.state;let T;const P=`heading-cell-${e}`,V=`stickyheader-${e}`,H=t?V:P;if(i){const j=i[e],M=j&&v===e;T={defaultSortDirection:o,sorted:M,sortable:j,sortDirection:M?y:"none",onSort:this.defaultOnSort(e),fixedNthColumn:g,inFixedNthColumn:g}}const N=t?this.tableHeadingWidths[e]:void 0,W=!S,k={header:!0,stickyHeadingCell:t,content:s,contentType:a[e],nthColumn:e<g,fixedFirstColumns:g,truncate:d,headingIndex:e,...T,verticalAlign:f,handleFocus:this.handleFocus,stickyCellWidth:N,fixedCellVisible:W,firstColumnMinWidth:m};return r&&t?[c.createElement(q,Object.assign({key:H},k,{setRef:j=>{this.setCellRef({ref:j,index:e,inStickyHeader:t})},inFixedNthColumn:!1})),c.createElement(q,Object.assign({key:`${H}-sticky`},k,{setRef:j=>{this.setCellRef({ref:j,index:e,inStickyHeader:t})},inFixedNthColumn:!!g,lastFixedFirstColumn:e===g-1,style:{left:(E=this.state.columnVisibilityData[e])==null?void 0:E.leftEdge}}))]:c.createElement(q,Object.assign({key:H},k,{setRef:j=>{this.setCellRef({ref:j,index:e,inStickyHeader:t})},lastFixedFirstColumn:e===g-1,inFixedNthColumn:r}))},this.totalsRowHeading=()=>{const{i18n:s,totals:e,totalsName:r}=this.props,t=r||{singular:s.translate("Polaris.DataTable.totalRowHeading"),plural:s.translate("Polaris.DataTable.totalsRowHeading")};return e&&e.filter(i=>i!=="").length>1?t.plural:t.singular},this.renderTotals=({total:s,index:e})=>{const r=this.fixedFirstColumns(),t=`totals-cell-${e}`,{truncate:i=!1,verticalAlign:d,columnContentTypes:a}=this.props;let o,n;e===0&&(o=this.totalsRowHeading()),s!==""&&e>0&&(n=a[e],o=s);const f=this.props.showTotalsInFooter;return c.createElement(q,{total:!0,totalInFooter:f,nthColumn:e<=r-1,firstColumn:e===0,key:t,content:o,contentType:n,truncate:i,verticalAlign:d})},this.getColSpan=(s,e,r,t)=>{if(this.fixedFirstColumns())return 1;const d=s||1,a=e||r,o=Math.floor(a/d),n=a%d;return t===0?o+n:o},this.defaultRenderRow=({row:s,index:e,inFixedNthColumn:r,rowHeights:t})=>{const{columnContentTypes:i,truncate:d=!1,verticalAlign:a,hoverable:o=!0,headings:n}=this.props,{condensed:f}=this.state,m=this.fixedFirstColumns(),g=D(u.TableRow,o&&u.hoverable);return c.createElement("tr",{key:`row-${e}`,className:g,onMouseEnter:this.handleHover(e),onMouseLeave:this.handleHover()},s.map((y,v)=>{const S=e===this.state.rowHovered,T=`cell-${v}-row-${e}`,P=this.getColSpan(s.length,n.length,i.length,v);return c.createElement(q,{key:T,content:y,contentType:i[v],nthColumn:v<=m-1,firstColumn:v===0,truncate:d,verticalAlign:a,colSpan:P,hovered:S,style:t?{height:`${t[e]}px`}:{},inFixedNthColumn:f&&r})}))},this.defaultOnSort=s=>{const{onSort:e,defaultSortDirection:r="ascending",initialSortColumnIndex:t}=this.props,{sortDirection:i=r,sortedColumnIndex:d=t}=this.state;let a=r;return d===s&&(a=i==="ascending"?"descending":"ascending"),()=>{this.setState({sortDirection:a,sortedColumnIndex:s},()=>{e&&e(s,a)})}}}componentDidMount(){this.handleResize()}componentDidUpdate(h){Le(h,this.props)||this.handleResize()}componentWillUnmount(){this.handleResize.cancel()}render(){var Y,$,R;const{headings:h,totals:s,showTotalsInFooter:e,rows:r,footerContent:t,hideScrollIndicator:i=!1,increasedTableDensity:d=!1,hasZebraStripingOnData:a=!1,stickyHeader:o=!1,hasFixedFirstColumn:n=!1,pagination:f}=this.props,{condensed:m,columnVisibilityData:g,isScrolledFarthestLeft:y,isScrolledFarthestRight:v}=this.state,S=this.fixedFirstColumns(),T=r.length%2===0,P=D(u.DataTable,m&&u.condensed,s&&u.ShowTotals,e&&u.ShowTotalsInFooter,a&&u.ZebraStripingOnData,a&&T&&u.RowCountIsEven),V=D(u.TableWrapper,m&&u.condensed,d&&u.IncreasedTableDensity,o&&u.StickyHeaderEnabled),H=c.createElement("tr",null,h.map((C,x)=>this.renderHeading({heading:C,headingIndex:x,inFixedNthColumn:!1,inStickyHeader:!1}))),N=s?c.createElement("tr",null,s.map((C,x)=>this.renderTotals({total:C,index:x}))):null,W=r.map(C=>C.slice(0,S)),k=h.slice(0,S),E=s==null?void 0:s.slice(0,S),j=(Y=this.table.current)==null?void 0:Y.children[0].childNodes,M=($=this.table.current)==null?void 0:$.children[1].childNodes,O=pe(j),A=pe(M),Q=m&&S!==0&&c.createElement("table",{className:D(u.FixedFirstColumn,!y&&u.separate),style:{width:`${(R=g[S-1])==null?void 0:R.rightEdge}px`}},c.createElement("thead",null,c.createElement("tr",{style:{height:`${O[0]}px`}},k.map((C,x)=>this.renderHeading({heading:C,headingIndex:x,inFixedNthColumn:!0,inStickyHeader:!1}))),s&&!e&&c.createElement("tr",{style:{height:`${O[1]}px`}},E==null?void 0:E.map((C,x)=>this.renderTotals({total:C,index:x})))),c.createElement("tbody",null,W.map((C,x)=>this.defaultRenderRow({row:C,index:x,inFixedNthColumn:!0,rowHeights:A}))),s&&e&&c.createElement("tfoot",null,c.createElement("tr",null,E==null?void 0:E.map((C,x)=>this.renderTotals({total:C,index:x}))))),U=r.map((C,x)=>this.defaultRenderRow({row:C,index:x,inFixedNthColumn:!1})),z=t?c.createElement("div",{className:u.Footer},t):null,J=f?c.createElement(Te,Object.assign({type:"table"},f)):null,G=e?null:N,K=e?c.createElement("tfoot",null,N):null,Z=C=>i?null:c.createElement(Ae,{columnVisibilityData:g,isScrolledFarthestLeft:y,isScrolledFarthestRight:v,navigateTableLeft:this.navigateTable("left"),navigateTableRight:this.navigateTable("right"),fixedFirstColumns:S,setRef:x=>{C==="header"?this.headerNav=x:C==="sticky"&&(this.stickyNav=x)}}),X=o?c.createElement(ke,null,c.createElement("div",{className:u.StickyHeaderWrapper,role:"presentation"},c.createElement(Pe,{boundingElement:this.dataTable.current,onStickyChange:C=>{this.changeHeadingFocus(),this.stickyHeaderActive=C}},C=>{const x=D(u.StickyHeaderInner,C&&u["StickyHeaderInner-isSticky"]),ee=D(u.StickyHeaderTable,!y&&u.separate);return c.createElement("div",{className:x},c.createElement("div",null,Z("sticky")),c.createElement("table",{className:ee,ref:this.stickyTable},c.createElement("thead",null,c.createElement("tr",{className:u.StickyTableHeadingsRow},h.map((te,ie)=>this.renderHeading({heading:te,headingIndex:ie,inFixedNthColumn:!!(ie<=S-1&&S),inStickyHeader:!0}))))))}))):null;return c.createElement("div",{className:V,ref:this.dataTable},X,Z("header"),c.createElement("div",{className:P},c.createElement("div",{className:u.ScrollContainer,ref:this.scrollContainer},c.createElement(fe,{event:"resize",handler:this.handleResize}),c.createElement(fe,{capture:!0,passive:!0,event:"scroll",handler:this.scrollListener}),Q,c.createElement("table",{className:u.Table,ref:this.table},c.createElement("thead",null,H,G),c.createElement("tbody",null,U),K)),J,z))}fixedFirstColumns(){const{hasFixedFirstColumn:h,fixedFirstColumns:s=0,headings:e}=this.props,r=h&&!s?1:s;return r>=e.length?0:r}}function Ve(p){const h=ne();return c.createElement(Ie,Object.assign({},p,{i18n:h}))}function Je(){const{logs:p,stats:h}=Ce(),[s,e]=_.useState(""),[r,t]=_.useState("all"),[i,d]=_.useState("all"),a=p.filter(n=>{var y;const f=s===""||((y=n.errorMessage)==null?void 0:y.toLowerCase().includes(s.toLowerCase())),m=r==="all"||r==="success"&&n.success||r==="failed"&&!n.success,g=i==="all"||n.executionType===i;return f&&m&&g}),o=a.map(n=>[l.jsxs("div",{children:[l.jsx(b,{variant:"bodyMd",as:"p",children:new Date(n.executedAt).toLocaleDateString("ja-JP")}),l.jsx(b,{variant:"bodySm",tone:"subdued",children:new Date(n.executedAt).toLocaleTimeString("ja-JP")})]},`time-${n.id}`),l.jsx(oe,{tone:n.executionType==="auto"?"info":"warning",children:n.executionType==="auto"?"自動実行":"手動実行"},`type-${n.id}`),l.jsxs(L,{gap:"200",blockAlign:"center",children:[l.jsx(w,{source:n.success?de:ce,tone:n.success?"success":"critical"}),l.jsx(oe,{tone:n.success?"success":"critical",children:n.success?"成功":"失敗"})]},`status-${n.id}`),l.jsx("div",{children:n.goldRatio!==null&&n.goldRatio!==void 0?l.jsxs(L,{gap:"100",blockAlign:"center",children:[l.jsx(b,{variant:"bodyMd",tone:n.goldRatio>=0?"critical":"success",children:n.goldRatio>=0?"📈":"📉"}),l.jsxs(b,{children:[(n.goldRatio*100).toFixed(2),"%"]})]}):l.jsx(b,{tone:"subdued",children:"-"})},`ratio-${n.id}`),l.jsxs(b,{children:[n.minPricePct||"-","%"]},`min-${n.id}`),l.jsxs(b,{children:[n.totalProducts||0,"件"]},`products-${n.id}`),l.jsxs(L,{gap:"200",children:[l.jsx(b,{tone:"success",children:n.updatedCount||0}),l.jsx(b,{tone:"subdued",children:"/"}),l.jsx(b,{tone:"critical",children:n.failedCount||0})]},`counts-${n.id}`),l.jsx("div",{children:n.errorMessage?l.jsx("div",{style:{padding:"8px",background:"#fecaca",borderRadius:"50%"},children:l.jsx(b,{variant:"bodySm",tone:"critical",children:n.errorMessage.length>50?n.errorMessage.substring(0,50)+"...":n.errorMessage})}):l.jsx(b,{tone:"subdued",children:"-"})},`error-${n.id}`)]);return l.jsx(je,{title:"実行ログ",subtitle:`${p.length}件の実行履歴を表示`,children:l.jsxs(F,{gap:"500",children:[l.jsx(ue,{children:l.jsx(ue.Section,{children:l.jsxs(L,{gap:"400",children:[l.jsx(I,{children:l.jsx(B,{padding:"400",children:l.jsxs(F,{gap:"300",align:"center",children:[l.jsx(w,{source:se,tone:"info"}),l.jsx(b,{variant:"heading2xl",as:"p",children:h.totalExecutions}),l.jsx(b,{variant:"bodyMd",tone:"subdued",children:"総実行回数"})]})})}),l.jsx(I,{children:l.jsx(B,{padding:"400",children:l.jsxs(F,{gap:"300",align:"center",children:[l.jsx(w,{source:de,tone:"success"}),l.jsx(b,{variant:"heading2xl",as:"p",children:h.totalSuccess}),l.jsx(b,{variant:"bodyMd",tone:"subdued",children:"成功更新数"})]})})}),l.jsx(I,{children:l.jsx(B,{padding:"400",children:l.jsxs(F,{gap:"300",align:"center",children:[l.jsx(w,{source:ce,tone:h.totalFailed>0?"critical":"subdued"}),l.jsx(b,{variant:"heading2xl",as:"p",children:h.totalFailed}),l.jsx(b,{variant:"bodyMd",tone:"subdued",children:"失敗更新数"})]})})})]})})}),l.jsx(I,{children:l.jsxs(F,{gap:"400",children:[l.jsx(b,{variant:"headingMd",as:"h3",children:"フィルター"}),l.jsxs(L,{gap:"400",children:[l.jsx("div",{style:{minWidth:"200px"},children:l.jsx(Ee,{label:"エラーメッセージ検索",value:s,onChange:e,placeholder:"エラー内容で検索...",clearButton:!0,onClearButtonClick:()=>e("")})}),l.jsx("div",{style:{minWidth:"150px"},children:l.jsx(he,{label:"実行結果",options:[{label:"すべて",value:"all"},{label:"成功のみ",value:"success"},{label:"失敗のみ",value:"failed"}],value:r,onChange:t})}),l.jsx("div",{style:{minWidth:"150px"},children:l.jsx(he,{label:"実行タイプ",options:[{label:"すべて",value:"all"},{label:"自動実行",value:"auto"},{label:"手動実行",value:"manual"}],value:i,onChange:d})})]}),l.jsxs(b,{variant:"bodySm",tone:"subdued",children:[a.length,"件 / ",p.length,"件を表示"]})]})}),l.jsx(I,{children:a.length===0?l.jsx(B,{padding:"800",children:l.jsxs(F,{gap:"400",align:"center",children:[l.jsx(w,{source:se,tone:"subdued"}),l.jsx(b,{variant:"headingMd",tone:"subdued",children:p.length===0?"まだ実行ログがありません":"フィルター条件に一致するログがありません"}),l.jsx(b,{variant:"bodyMd",tone:"subdued",children:p.length===0?"商品価格調整を実行すると、ここに履歴が表示されます。":"フィルター条件を変更してください。"})]})}):l.jsx(Ve,{columnContentTypes:["text","text","text","text","text","text","text","text"],headings:["実行日時","種類","結果","金価格変動率","価格下限","対象商品","成功/失敗","エラー詳細"],rows:o,pagination:{hasNext:!1,hasPrevious:!1}})}),l.jsx(I,{children:l.jsx(B,{padding:"400",children:l.jsxs(F,{gap:"300",children:[l.jsxs(L,{gap:"200",blockAlign:"center",children:[l.jsx(w,{source:se,tone:"base"}),l.jsx(b,{variant:"headingMd",as:"h3",children:"ログの見方"})]}),l.jsxs(L,{gap:"600",children:[l.jsxs(F,{gap:"200",children:[l.jsx(b,{variant:"bodyMd",fontWeight:"semibold",children:"実行タイプ"}),l.jsx(b,{variant:"bodySm",tone:"subdued",children:"• 自動実行: スケジュールによる定期実行"}),l.jsx(b,{variant:"bodySm",tone:"subdued",children:"• 手動実行: UIからの手動実行"})]}),l.jsxs(F,{gap:"200",children:[l.jsx(b,{variant:"bodyMd",fontWeight:"semibold",children:"金価格変動率"}),l.jsx(b,{variant:"bodySm",tone:"subdued",children:"• 田中貴金属から取得した前日比"}),l.jsx(b,{variant:"bodySm",tone:"subdued",children:"• この変動率で商品価格を調整"})]}),l.jsxs(F,{gap:"200",children:[l.jsx(b,{variant:"bodyMd",fontWeight:"semibold",children:"価格下限"}),l.jsx(b,{variant:"bodySm",tone:"subdued",children:"• 価格下落時の最低価格率"}),l.jsx(b,{variant:"bodySm",tone:"subdued",children:"• 例: 93% = 7%以上は下がらない"})]})]})]})})})]})})}export{Je as default};
