import{R as r,r as h,g as St,d as Ee,j as g}from"./index-OtPSfN_w.js";import{u as kt,a as Pt}from"./components-CzBC-wXh.js";import{c as T,v as be,g as dt,e as pe,s as ut,T as re,f as Nt,h as ge,j as Tt,M as je,W as Le,u as ue,b as ee,k as ft,a as L,I as $,B as X,l as wt,m as Ft,S as _t,n as Mt,o as It,p as xe,K as Fe,q as _e,r as Dt,t as Rt,x as Ht,y as jt,z as Ze,w as Lt,A as Ot,D as Bt,E as At,F as $t,G as Vt,L as Wt,H as Ut,J as qe,P as zt,C as le,d as Ge}from"./Page-J_DpkFPJ.js";import{B as Zt,L as fe}from"./Layout-CEE4ZotV.js";import{h as qt,j as Me,u as Gt,f as Kt,k as Xt,d as Jt,E as Ie,p as Yt,l as Qt}from"./context-AaFCZbCq.js";import{S as en,F as tn}from"./context-Dqc0DVKX.js";var ht=function(s){return r.createElement("svg",Object.assign({viewBox:"0 0 20 20"},s),r.createElement("path",{d:"M10 6a.75.75 0 0 1 .75.75v3.5a.75.75 0 0 1-1.5 0v-3.5a.75.75 0 0 1 .75-.75Z"}),r.createElement("path",{d:"M11 13a1 1 0 1 1-2 0 1 1 0 0 1 2 0Z"}),r.createElement("path",{fillRule:"evenodd",d:"M11.237 3.177a1.75 1.75 0 0 0-2.474 0l-5.586 5.585a1.75 1.75 0 0 0 0 2.475l5.586 5.586a1.75 1.75 0 0 0 2.474 0l5.586-5.586a1.75 1.75 0 0 0 0-2.475l-5.586-5.585Zm-1.414 1.06a.25.25 0 0 1 .354 0l5.586 5.586a.25.25 0 0 1 0 .354l-5.586 5.585a.25.25 0 0 1-.354 0l-5.586-5.585a.25.25 0 0 1 0-.354l5.586-5.586Z"}))};ht.displayName="AlertDiamondIcon";var pt=function(s){return r.createElement("svg",Object.assign({viewBox:"0 0 20 20"},s),r.createElement("path",{d:"M10 6.75a.75.75 0 0 1 .75.75v3.5a.75.75 0 1 1-1.5 0v-3.5a.75.75 0 0 1 .75-.75Z"}),r.createElement("path",{d:"M11 13.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0Z"}),r.createElement("path",{fillRule:"evenodd",d:"M10 3.5c-1.045 0-1.784.702-2.152 1.447a449.26 449.26 0 0 1-2.005 3.847l-.028.052a403.426 403.426 0 0 0-2.008 3.856c-.372.752-.478 1.75.093 2.614.57.863 1.542 1.184 2.464 1.184h7.272c.922 0 1.895-.32 2.464-1.184.57-.864.465-1.862.093-2.614-.21-.424-1.113-2.147-2.004-3.847l-.032-.061a429.497 429.497 0 0 1-2.005-3.847c-.368-.745-1.107-1.447-2.152-1.447Zm-.808 2.112c.404-.816 1.212-.816 1.616 0 .202.409 1.112 2.145 2.022 3.88a418.904 418.904 0 0 1 2.018 3.875c.404.817 0 1.633-1.212 1.633h-7.272c-1.212 0-1.617-.816-1.212-1.633.202-.408 1.113-2.147 2.023-3.883a421.932 421.932 0 0 0 2.017-3.872Z"}))};pt.displayName="AlertTriangleIcon";var mt=function(s){return r.createElement("svg",Object.assign({viewBox:"0 0 20 20"},s),r.createElement("path",{fillRule:"evenodd",d:"M15.78 5.97a.75.75 0 0 1 0 1.06l-6.5 6.5a.75.75 0 0 1-1.06 0l-3.25-3.25a.75.75 0 1 1 1.06-1.06l2.72 2.72 5.97-5.97a.75.75 0 0 1 1.06 0Z"}))};mt.displayName="CheckIcon";var gt=function(s){return r.createElement("svg",Object.assign({viewBox:"0 0 20 20"},s),r.createElement("path",{d:"M10 14a.75.75 0 0 1-.75-.75v-3.5a.75.75 0 0 1 1.5 0v3.5a.75.75 0 0 1-.75.75Z"}),r.createElement("path",{d:"M9 7a1 1 0 1 1 2 0 1 1 0 0 1-2 0Z"}),r.createElement("path",{fillRule:"evenodd",d:"M17 10a7 7 0 1 1-14 0 7 7 0 0 1 14 0Zm-1.5 0a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0Z"}))};gt.displayName="InfoIcon";var bt=function(s){return r.createElement("svg",Object.assign({viewBox:"0 0 20 20"},s),r.createElement("path",{fillRule:"evenodd",d:"M5 10c0-.414.336-.75.75-.75h8.5c.414 0 .75.336.75.75s-.336.75-.75.75h-8.5c-.414 0-.75-.336-.75-.75Z"}))};bt.displayName="MinusIcon";var Et=function(s){return r.createElement("svg",Object.assign({viewBox:"0 0 20 20"},s),r.createElement("path",{fillRule:"evenodd",d:"M9.116 4.323a1.25 1.25 0 0 1 1.768 0l2.646 2.647a.75.75 0 0 1-1.06 1.06l-2.47-2.47-2.47 2.47a.75.75 0 1 1-1.06-1.06l2.646-2.647Z"}),r.createElement("path",{fillOpacity:.33,fillRule:"evenodd",d:"M9.116 15.677a1.25 1.25 0 0 0 1.768 0l2.646-2.647a.75.75 0 0 0-1.06-1.06l-2.47 2.47-2.47-2.47a.75.75 0 0 0-1.06 1.06l2.646 2.647Z"}))};Et.displayName="SortAscendingIcon";var Ct=function(s){return r.createElement("svg",Object.assign({viewBox:"0 0 20 20"},s),r.createElement("path",{fillOpacity:.33,fillRule:"evenodd",d:"M9.116 4.823a1.25 1.25 0 0 1 1.768 0l2.646 2.647a.75.75 0 0 1-1.06 1.06l-2.47-2.47-2.47 2.47a.75.75 0 1 1-1.06-1.06l2.646-2.647Z"}),r.createElement("path",{fillRule:"evenodd",d:"M9.116 15.177a1.25 1.25 0 0 0 1.768 0l2.646-2.647a.75.75 0 0 0-1.06-1.06l-2.47 2.47-2.47-2.47a.75.75 0 0 0-1.06 1.06l2.646 2.647Z"}))};Ct.displayName="SortDescendingIcon";var Oe=function(s){return r.createElement("svg",Object.assign({viewBox:"0 0 20 20"},s),r.createElement("path",{d:"M13.97 15.03a.75.75 0 1 0 1.06-1.06l-3.97-3.97 3.97-3.97a.75.75 0 0 0-1.06-1.06l-3.97 3.97-3.97-3.97a.75.75 0 0 0-1.06 1.06l3.97 3.97-3.97 3.97a.75.75 0 1 0 1.06 1.06l3.97-3.97 3.97 3.97Z"}))};Oe.displayName="XIcon";const nn=h.createContext(!1);var G={Checkbox:"Polaris-Checkbox",ChoiceLabel:"Polaris-Checkbox__ChoiceLabel",Backdrop:"Polaris-Checkbox__Backdrop",Input:"Polaris-Checkbox__Input","Input-indeterminate":"Polaris-Checkbox__Input--indeterminate",Icon:"Polaris-Checkbox__Icon",animated:"Polaris-Checkbox--animated",toneMagic:"Polaris-Checkbox--toneMagic",hover:"Polaris-Checkbox--hover",error:"Polaris-Checkbox--error",checked:"Polaris-Checkbox--checked",pathAnimation:"Polaris-Checkbox--pathAnimation"},Q={Choice:"Polaris-Choice",labelHidden:"Polaris-Choice--labelHidden",Label:"Polaris-Choice__Label",Control:"Polaris-Choice__Control",disabled:"Polaris-Choice--disabled",toneMagic:"Polaris-Choice--toneMagic",Descriptions:"Polaris-Choice__Descriptions",HelpText:"Polaris-Choice__HelpText"};function an({id:a,label:s,disabled:i,error:e,children:n,labelHidden:t,helpText:l,onClick:c,labelClassName:o,fill:d,bleed:u,bleedBlockStart:f,bleedBlockEnd:p,bleedInlineStart:b,bleedInlineEnd:E,tone:y}){const v=T(Q.Choice,t&&Q.labelHidden,i&&Q.disabled,y&&Q[be("tone",y)],o),S={...pe("choice","bleed-block-end","space",p||u),...pe("choice","bleed-block-start","space",f||u),...pe("choice","bleed-inline-start","space",b||u),...pe("choice","bleed-inline-end","space",E||u),...Object.fromEntries(Object.entries(dt("choice","fill",d)).map(([B,j])=>[B,j?"100%":"auto"]))},F=r.createElement("label",{className:v,htmlFor:a,onClick:c,style:ut(S)},r.createElement("span",{className:Q.Control},n),r.createElement("span",{className:Q.Label},r.createElement(re,{as:"span",variant:"bodyMd"},s))),H=l?r.createElement("div",{className:Q.HelpText,id:vt(a)},r.createElement(re,{as:"span",tone:i?void 0:"subdued"},l)):null,N=e&&typeof e!="boolean"&&r.createElement("div",{className:Q.Error},r.createElement(Nt,{message:e,fieldID:a})),O=H||N?r.createElement("div",{className:Q.Descriptions},N,H):null;return O?r.createElement("div",null,F,O):F}function vt(a){return`${a}HelpText`}const sn=h.forwardRef(function({ariaControls:s,ariaDescribedBy:i,label:e,labelHidden:n,checked:t=!1,helpText:l,disabled:c,id:o,name:d,value:u,error:f,onChange:p,onFocus:b,onBlur:E,labelClassName:y,fill:v,bleed:S,bleedBlockStart:F,bleedBlockEnd:H,bleedInlineStart:N,bleedInlineEnd:O,tone:B},j){const _=h.useRef(null),D=h.useId(),m=o??D,x=h.useContext(nn);h.useImperativeHandle(j,()=>({focus:()=>{_.current&&_.current.focus()}}));const k=()=>{E&&E()},M=()=>{p==null||_.current==null||c||(p(_.current.checked,m),_.current.focus())},w=[];f&&typeof f!="boolean"&&w.push(Tt(m)),l&&w.push(vt(m)),i&&w.push(i);const I=w.length?w.join(" "):void 0,Y=T(G.Checkbox,f&&G.error),W=t==="indeterminate",V=!W&&!!t,q=W?{indeterminate:"true","aria-checked":"mixed"}:{"aria-checked":V},te=r.createElement("svg",{viewBox:"0 0 16 16",shapeRendering:"geometricPrecision",textRendering:"geometricPrecision"},r.createElement("path",{className:T(t&&G.checked),d:"M1.5,5.5L3.44655,8.22517C3.72862,8.62007,4.30578,8.64717,4.62362,8.28044L10.5,1.5",transform:"translate(2 2.980376)",opacity:"0",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",pathLength:"1"})),U=T(G.Input,W&&G["Input-indeterminate"],B&&G[be("tone",B)]),z={helpText:l,error:f,bleed:S,bleedBlockStart:F,bleedBlockEnd:H,bleedInlineStart:N,bleedInlineEnd:O};return r.createElement(an,Object.assign({id:m,label:e,labelHidden:n,disabled:c,labelClassName:T(G.ChoiceLabel,y),fill:v,tone:B},z),r.createElement("span",{className:Y},r.createElement("input",Object.assign({ref:_,id:m,name:d,value:u,type:"checkbox",checked:V,disabled:c,className:U,onBlur:k,onChange:rn,onClick:M,onFocus:b,"aria-invalid":f!=null,"aria-controls":s,"aria-describedby":I,role:x?"presentation":"checkbox"},q)),r.createElement("span",{className:G.Backdrop,onClick:Ke,onKeyUp:Ke}),r.createElement("span",{className:T(G.Icon,!W&&G.animated)},W?r.createElement(ge,{source:bt}):te)))});function rn(){}function Ke(a){a.stopPropagation()}var ke={Backdrop:"Polaris-Backdrop",transparent:"Polaris-Backdrop--transparent",belowNavigation:"Polaris-Backdrop--belowNavigation"};function ln(){const a=h.useContext(en);if(!a)throw new je("No ScrollLockManager was provided.");return a}function on(a){const s=ln();return h.useEffect(()=>(s.registerScrollLock(),()=>{s.unregisterScrollLock()}),[s]),null}function cn(a){const{onClick:s,onTouchStart:i,belowNavigation:e,transparent:n,setClosing:t}=a,l=T(ke.Backdrop,e&&ke.belowNavigation,n&&ke.transparent),c=()=>{t&&t(!0)},o=()=>{t&&t(!1),s&&s()};return r.createElement(r.Fragment,null,r.createElement(on,null),r.createElement("div",{className:l,onClick:o,onTouchStart:i,onMouseDown:c}))}var ie={Banner:"Polaris-Banner",keyFocused:"Polaris-Banner--keyFocused",withinContentContainer:"Polaris-Banner--withinContentContainer",withinPage:"Polaris-Banner--withinPage",DismissIcon:"Polaris-Banner__DismissIcon","text-success-on-bg-fill":"Polaris-Banner--textSuccessOnBgFill","text-success":"Polaris-Banner__text--success","text-warning-on-bg-fill":"Polaris-Banner--textWarningOnBgFill","text-warning":"Polaris-Banner__text--warning","text-critical-on-bg-fill":"Polaris-Banner--textCriticalOnBgFill","text-critical":"Polaris-Banner__text--critical","text-info-on-bg-fill":"Polaris-Banner--textInfoOnBgFill","text-info":"Polaris-Banner__text--info","icon-secondary":"Polaris-Banner__icon--secondary"};const Pe={success:{withinPage:{background:"bg-fill-success",text:"text-success-on-bg-fill",icon:"text-success-on-bg-fill"},withinContentContainer:{background:"bg-surface-success",text:"text-success",icon:"text-success"},icon:mt},warning:{withinPage:{background:"bg-fill-warning",text:"text-warning-on-bg-fill",icon:"text-warning-on-bg-fill"},withinContentContainer:{background:"bg-surface-warning",text:"text-warning",icon:"text-warning"},icon:pt},critical:{withinPage:{background:"bg-fill-critical",text:"text-critical-on-bg-fill",icon:"text-critical-on-bg-fill"},withinContentContainer:{background:"bg-surface-critical",text:"text-critical",icon:"text-critical"},icon:ht},info:{withinPage:{background:"bg-fill-info",text:"text-info-on-bg-fill",icon:"text-info-on-bg-fill"},withinContentContainer:{background:"bg-surface-info",text:"text-info",icon:"text-info"},icon:gt}};function dn(a){const s=h.useRef(null),[i,e]=h.useState(!1);return h.useImperativeHandle(a,()=>({focus:()=>{var c;(c=s.current)==null||c.focus(),e(!0)}}),[]),{wrapperRef:s,handleKeyUp:c=>{c.target===s.current&&e(!0)},handleBlur:()=>e(!1),handleMouseUp:c=>{c.currentTarget.blur(),e(!1)},shouldShowFocus:i}}const oe=h.forwardRef(function(s,i){const{tone:e,stopAnnouncements:n}=s,t=h.useContext(Le),{wrapperRef:l,handleKeyUp:c,handleBlur:o,handleMouseUp:d,shouldShowFocus:u}=dn(i),f=T(ie.Banner,u&&ie.keyFocused,t?ie.withinContentContainer:ie.withinPage);return r.createElement(Zt.Provider,{value:!0},r.createElement("div",{className:f,tabIndex:0,ref:l,role:e==="warning"||e==="critical"?"alert":"status","aria-live":n?"off":"polite",onMouseUp:d,onKeyUp:c,onBlur:o},r.createElement(un,s)))});function un({tone:a="info",icon:s,hideIcon:i,onDismiss:e,action:n,secondaryAction:t,title:l,children:c}){const o=ue(),d=h.useContext(Le),u=!l&&!d,f=Object.keys(Pe).includes(a)?a:"info",p=Pe[f][d?"withinContentContainer":"withinPage"],b={backgroundColor:p.background,textColor:p.text,bannerTitle:l?r.createElement(re,{as:"h2",variant:"headingSm",breakWord:!0},l):null,bannerIcon:i?null:r.createElement("span",{className:ie[p.icon]},r.createElement(ge,{source:s??Pe[f].icon})),actionButtons:n||t?r.createElement(ft,null,n&&r.createElement(ee,Object.assign({onClick:n.onAction},n),n.content),t&&r.createElement(ee,Object.assign({onClick:t.onAction},t),t.content)):null,dismissButton:e?r.createElement(ee,{variant:"tertiary",icon:r.createElement("span",{className:ie[u?"icon-secondary":p.icon]},r.createElement(ge,{source:Oe})),onClick:e,accessibilityLabel:o.translate("Polaris.Banner.dismissButton")}):null},E=c?r.createElement(re,{as:"span",variant:"bodyMd"},c):null;return d?r.createElement(pn,b,E):u?r.createElement(hn,b,E):r.createElement(fn,b,E)}function fn({backgroundColor:a,textColor:s,bannerTitle:i,bannerIcon:e,actionButtons:n,dismissButton:t,children:l}){const{smUp:c}=qt(),o=l||n;return r.createElement(L,{width:"100%"},r.createElement(X,{align:"space-between"},r.createElement(L,{background:a,color:s,borderStartStartRadius:c?"300":void 0,borderStartEndRadius:c?"300":void 0,borderEndStartRadius:!o&&c?"300":void 0,borderEndEndRadius:!o&&c?"300":void 0,padding:"300"},r.createElement($,{align:"space-between",blockAlign:"center",gap:"200",wrap:!1},r.createElement($,{gap:"100",wrap:!1},e,i),t)),o&&r.createElement(L,{padding:{xs:"300",md:"400"},paddingBlockStart:"300"},r.createElement(X,{gap:"200"},r.createElement("div",null,l),n))))}function hn({backgroundColor:a,bannerIcon:s,actionButtons:i,dismissButton:e,children:n}){const[t,l]=h.useState("center"),c=h.useRef(null),o=h.useRef(null),d=h.useRef(null),u=h.useCallback(()=>{var b,E,y;const f=(b=c.current)==null?void 0:b.offsetHeight,p=((E=o.current)==null?void 0:E.offsetHeight)||((y=d.current)==null?void 0:y.offsetHeight);!f||!p||(f>p?l("start"):l("center"))},[]);return h.useEffect(()=>u(),[u]),wt("resize",u),r.createElement(L,{width:"100%",padding:"300",borderRadius:"300"},r.createElement($,{align:"space-between",blockAlign:t,wrap:!1},r.createElement(L,{width:"100%"},r.createElement($,{gap:"200",wrap:!1,blockAlign:t},s?r.createElement("div",{ref:o},r.createElement(L,{background:a,borderRadius:"200",padding:"100"},s)):null,r.createElement(L,{ref:c,width:"100%"},r.createElement(X,{gap:"200"},r.createElement("div",null,n),i)))),r.createElement("div",{ref:d,className:ie.DismissIcon},e)))}function pn({backgroundColor:a,textColor:s,bannerTitle:i,bannerIcon:e,actionButtons:n,dismissButton:t,children:l}){return r.createElement(L,{width:"100%",background:a,padding:"200",borderRadius:"200",color:s},r.createElement($,{align:"space-between",blockAlign:"start",wrap:!1,gap:"200"},r.createElement($,{gap:"150",wrap:!1},e,r.createElement(L,{width:"100%"},r.createElement(X,{gap:"200"},r.createElement(X,{gap:"050"},i,r.createElement("div",null,l)),n))),t))}var mn={InlineGrid:"Polaris-InlineGrid"};function gn({children:a,columns:s,gap:i,alignItems:e}){const n={...dt("inline-grid","grid-template-columns",bn(s)),...pe("inline-grid","gap","space",i),"--pc-inline-grid-align-items":e};return r.createElement("div",{className:mn.InlineGrid,style:ut(n)},a)}function bn(a){return typeof a=="object"&&a!==null&&!Array.isArray(a)?Object.fromEntries(Object.entries(a).map(([s,i])=>[s,Xe(i)])):Xe(a)}function Xe(a){if(a)return typeof a=="number"||!isNaN(Number(a))?`repeat(${Number(a)}, minmax(0, 1fr))`:typeof a=="string"?a:a.map(s=>{switch(s){case"oneThird":return"minmax(0, 1fr)";case"oneHalf":return"minmax(0, 1fr)";case"twoThirds":return"minmax(0, 2fr)"}}).join(" ")}const En=h.createContext(void 0);var Ne,Je;function Cn(){if(Je)return Ne;Je=1;var a=typeof Element<"u",s=typeof Map=="function",i=typeof Set=="function",e=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function n(t,l){if(t===l)return!0;if(t&&l&&typeof t=="object"&&typeof l=="object"){if(t.constructor!==l.constructor)return!1;var c,o,d;if(Array.isArray(t)){if(c=t.length,c!=l.length)return!1;for(o=c;o--!==0;)if(!n(t[o],l[o]))return!1;return!0}var u;if(s&&t instanceof Map&&l instanceof Map){if(t.size!==l.size)return!1;for(u=t.entries();!(o=u.next()).done;)if(!l.has(o.value[0]))return!1;for(u=t.entries();!(o=u.next()).done;)if(!n(o.value[1],l.get(o.value[0])))return!1;return!0}if(i&&t instanceof Set&&l instanceof Set){if(t.size!==l.size)return!1;for(u=t.entries();!(o=u.next()).done;)if(!l.has(o.value[0]))return!1;return!0}if(e&&ArrayBuffer.isView(t)&&ArrayBuffer.isView(l)){if(c=t.length,c!=l.length)return!1;for(o=c;o--!==0;)if(t[o]!==l[o])return!1;return!0}if(t.constructor===RegExp)return t.source===l.source&&t.flags===l.flags;if(t.valueOf!==Object.prototype.valueOf&&typeof t.valueOf=="function"&&typeof l.valueOf=="function")return t.valueOf()===l.valueOf();if(t.toString!==Object.prototype.toString&&typeof t.toString=="function"&&typeof l.toString=="function")return t.toString()===l.toString();if(d=Object.keys(t),c=d.length,c!==Object.keys(l).length)return!1;for(o=c;o--!==0;)if(!Object.prototype.hasOwnProperty.call(l,d[o]))return!1;if(a&&t instanceof Element)return!1;for(o=c;o--!==0;)if(!((d[o]==="_owner"||d[o]==="__v"||d[o]==="__o")&&t.$$typeof)&&!n(t[d[o]],l[d[o]]))return!1;return!0}return t!==t&&l!==l}return Ne=function(l,c){try{return n(l,c)}catch(o){if((o.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw o}},Ne}var vn=Cn();const xn=St(vn);function yn(a){return function(s,i){const{firstVisibleColumnIndex:e,tableLeftVisibleEdge:n,tableRightVisibleEdge:t}=a,l=s.offsetLeft,c=l+s.offsetWidth,o=Ye(l,n,t,"left"),d=Ye(c,n,t,"right"),u=o||d,f=s.offsetWidth;return u&&(a.firstVisibleColumnIndex=Math.min(e,i)),{leftEdge:l,rightEdge:c,isVisible:u,width:f,index:i}}}function Ye(a,s,i,e){return a>=s+(e==="left"?0:30)&&a<=i-30}function Sn(a,s){const{firstVisibleColumnIndex:i}=a,e=Math.max(i-1,0),n=s[e],t=s[i];return{previousColumn:n,currentColumn:t}}var C={DataTable:"Polaris-DataTable",condensed:"Polaris-DataTable--condensed",Navigation:"Polaris-DataTable__Navigation",Pip:"Polaris-DataTable__Pip","Pip-visible":"Polaris-DataTable__Pip--visible",ScrollContainer:"Polaris-DataTable__ScrollContainer",Table:"Polaris-DataTable__Table",TableRow:"Polaris-DataTable__TableRow",Cell:"Polaris-DataTable__Cell",IncreasedTableDensity:"Polaris-DataTable__IncreasedTableDensity",ZebraStripingOnData:"Polaris-DataTable__ZebraStripingOnData",RowCountIsEven:"Polaris-DataTable__RowCountIsEven",ShowTotalsInFooter:"Polaris-DataTable__ShowTotalsInFooter","Cell-separate":"Polaris-DataTable__Cell--separate","Cell-firstColumn":"Polaris-DataTable__Cell--firstColumn","Cell-numeric":"Polaris-DataTable__Cell--numeric","Cell-truncated":"Polaris-DataTable__Cell--truncated","Cell-header":"Polaris-DataTable__Cell--header","Cell-sortable":"Polaris-DataTable__Cell--sortable","Heading-left":"Polaris-DataTable__Heading--left","Cell-verticalAlignTop":"Polaris-DataTable__Cell--verticalAlignTop","Cell-verticalAlignBottom":"Polaris-DataTable__Cell--verticalAlignBottom","Cell-verticalAlignMiddle":"Polaris-DataTable__Cell--verticalAlignMiddle","Cell-verticalAlignBaseline":"Polaris-DataTable__Cell--verticalAlignBaseline",hoverable:"Polaris-DataTable--hoverable","Cell-hovered":"Polaris-DataTable__Cell--hovered",Icon:"Polaris-DataTable__Icon",Heading:"Polaris-DataTable__Heading",StickyHeaderEnabled:"Polaris-DataTable__StickyHeaderEnabled",StickyHeaderWrapper:"Polaris-DataTable__StickyHeaderWrapper","Cell-sorted":"Polaris-DataTable__Cell--sorted","Cell-total":"Polaris-DataTable__Cell--total",ShowTotals:"Polaris-DataTable__ShowTotals","Cell-total-footer":"Polaris-DataTable--cellTotalFooter",Footer:"Polaris-DataTable__Footer",StickyHeaderInner:"Polaris-DataTable__StickyHeaderInner","StickyHeaderInner-isSticky":"Polaris-DataTable__StickyHeaderInner--isSticky",StickyHeaderTable:"Polaris-DataTable__StickyHeaderTable",FixedFirstColumn:"Polaris-DataTable__FixedFirstColumn",StickyTableHeadingsRow:"Polaris-DataTable__StickyTableHeadingsRow",TooltipContent:"Polaris-DataTable__TooltipContent"};function he({content:a,contentType:s,nthColumn:i,firstColumn:e,truncate:n,header:t,total:l,totalInFooter:c,sorted:o,sortable:d,sortDirection:u,inFixedNthColumn:f,verticalAlign:p="top",defaultSortDirection:b="ascending",onSort:E,colSpan:y,setRef:v=()=>{},stickyHeadingCell:S=!1,stickyCellWidth:F,hovered:H=!1,handleFocus:N=()=>{},hasFixedNthColumn:O=!1,fixedCellVisible:B=!1,firstColumnMinWidth:j,style:_,lastFixedFirstColumn:D}){const m=ue(),x=s==="numeric",k=T(C.Cell,C[`Cell-${be("verticalAlign",p)}`],e&&C["Cell-firstColumn"],n&&C["Cell-truncated"],t&&C["Cell-header"],l&&C["Cell-total"],c&&C["Cell-total-footer"],x&&C["Cell-numeric"],d&&C["Cell-sortable"],o&&C["Cell-sorted"],S&&C.StickyHeaderCell,H&&C["Cell-hovered"],D&&f&&B&&C["Cell-separate"],i&&f&&S&&C.FixedFirstColumn),M=T(t&&C.Heading,t&&s==="text"&&C["Heading-left"]),w=T(d&&C.Icon),I=o&&u?u:b,Y=I==="descending"?Ct:Et,W=u==="ascending"?"descending":"ascending",V=m.translate("Polaris.DataTable.sortAccessibilityLabel",{direction:o?W:I}),q=r.createElement("span",{className:w},r.createElement(ge,{source:Y,accessibilityLabel:V})),te=!(S&&O&&i&&!f),z=d?r.createElement("button",{className:M,onClick:E,onFocus:N,tabIndex:te?0:-1},q,a):a,Z=y&&y>1?{colSpan:y}:{},P=i&&j?{minWidth:j}:{minWidth:F},R=r.createElement("th",Object.assign({ref:v},Me.props,Z,{className:k,"aria-sort":u,style:{..._,...P},"data-index-table-sticky-heading":!0}),z),ye=t?r.createElement("th",Object.assign({},Me.props,{"aria-sort":u},Z,{ref:v,className:k,scope:"col",style:{...P}}),z):r.createElement("th",Object.assign({},Z,{ref:v,className:k,scope:"row",style:{...P}}),n?r.createElement(kn,{className:C.TooltipContent},a):a),Se=t||e||i?ye:r.createElement("td",Object.assign({className:k},Z),a);return S?R:Se}const kn=({children:a,className:s=""})=>{const i=h.useRef(null),{current:e}=i,n=r.createElement("span",{ref:i,className:s},a);return(e==null?void 0:e.scrollWidth)>(e==null?void 0:e.offsetWidth)?r.createElement(Ft,{content:i.current.innerText},n):n};function Pn({children:a,onMount:s,fallback:i=null}){const e=Gt(),n=e?a:i;return h.useEffect(()=>{e&&s&&s()},[e,s]),r.createElement(r.Fragment,null,n)}function Nn(){const a=h.useContext(Kt);if(!a)throw new je("No StickyManager was provided.");return a}class Tn extends h.Component{constructor(...s){super(...s),this.state={isSticky:!1,style:{}},this.placeHolderNode=null,this.stickyNode=null,this.setPlaceHolderNode=i=>{this.placeHolderNode=i},this.setStickyNode=i=>{this.stickyNode=i},this.handlePositioning=(i,e=0,n=0,t=0)=>{const{isSticky:l}=this.state;(i&&!l||!i&&l)&&(this.adjustPlaceHolderNode(i),this.setState({isSticky:!l},()=>{if(this.props.onStickyChange==null||(this.props.onStickyChange(!l),this.props.boundingElement==null))return null;this.props.boundingElement.toggleAttribute("data-sticky-active")}));const c=i?{position:"fixed",top:e,left:n,width:t}:{};this.setState({style:c})},this.adjustPlaceHolderNode=i=>{this.placeHolderNode&&this.stickyNode&&(this.placeHolderNode.style.paddingBottom=i?`${Xt(this.stickyNode).height}px`:"0px")}}componentDidMount(){const{boundingElement:s,offset:i=!1,disableWhenStacked:e=!1,stickyManager:n}=this.props;!this.stickyNode||!this.placeHolderNode||n.registerStickyItem({stickyNode:this.stickyNode,placeHolderNode:this.placeHolderNode,handlePositioning:this.handlePositioning,offset:i,boundingElement:s,disableWhenStacked:e})}componentDidUpdate(){const{boundingElement:s,offset:i=!1,disableWhenStacked:e=!1,stickyManager:n}=this.props;if(!this.stickyNode||!this.placeHolderNode)return;const t=n.getStickyItem(this.stickyNode);(!t||s!==t.boundingElement||i!==t.offset||e!==t.disableWhenStacked)&&(n.unregisterStickyItem(this.stickyNode),n.registerStickyItem({stickyNode:this.stickyNode,placeHolderNode:this.placeHolderNode,handlePositioning:this.handlePositioning,offset:i,boundingElement:s,disableWhenStacked:e}))}componentWillUnmount(){const{stickyManager:s}=this.props;this.stickyNode&&s.unregisterStickyItem(this.stickyNode)}render(){const{style:s,isSticky:i}=this.state,{children:e}=this.props,n=wn(e)?e(i):e;return r.createElement("div",null,r.createElement("div",{ref:this.setPlaceHolderNode}),r.createElement("div",{ref:this.setStickyNode,style:s},n))}}function wn(a){return typeof a=="function"}function Fn(a){const s=Nn();return r.createElement(Tn,Object.assign({},a,{stickyManager:s}))}function _n({columnVisibilityData:a,isScrolledFarthestLeft:s,isScrolledFarthestRight:i,navigateTableLeft:e,navigateTableRight:n,fixedFirstColumns:t,setRef:l=()=>{}}){const c=ue(),o=a.map((f,p)=>{if(p<t)return;const b=T(C.Pip,f.isVisible&&C["Pip-visible"]);return r.createElement("div",{className:b,key:`pip-${p}`})}),d=c.translate("Polaris.DataTable.navAccessibilityLabel",{direction:"left"}),u=c.translate("Polaris.DataTable.navAccessibilityLabel",{direction:"right"});return r.createElement("div",{className:C.Navigation,ref:l},r.createElement(ee,{variant:"tertiary",icon:_t,disabled:s,accessibilityLabel:d,onClick:e}),o,r.createElement(ee,{variant:"tertiary",icon:Mt,disabled:i,accessibilityLabel:u,onClick:n}))}const Qe=a=>{const s=[];return a&&a.forEach(i=>{s.push(i.clientHeight)}),s};class Mn extends h.PureComponent{constructor(...s){super(...s),this.state={condensed:!1,columnVisibilityData:[],isScrolledFarthestLeft:!0,isScrolledFarthestRight:!1,rowHovered:void 0},this.dataTable=h.createRef(),this.scrollContainer=h.createRef(),this.table=h.createRef(),this.stickyTable=h.createRef(),this.stickyNav=null,this.headerNav=null,this.tableHeadings=[],this.stickyHeadings=[],this.tableHeadingWidths=[],this.stickyHeaderActive=!1,this.scrollStopTimer=null,this.handleResize=Jt(()=>{const{table:{current:i},scrollContainer:{current:e}}=this;let n=!1;i&&e&&(n=i.scrollWidth>e.clientWidth+1),this.setState({condensed:n,...this.calculateColumnVisibilityData(n)})}),this.setCellRef=({ref:i,index:e,inStickyHeader:n})=>{if(i!=null)if(n){this.stickyHeadings[e]=i;const t=i.querySelector("button");if(t==null)return;t.addEventListener("focus",this.handleHeaderButtonFocus)}else this.tableHeadings[e]=i,this.tableHeadingWidths[e]=i.clientWidth},this.changeHeadingFocus=()=>{const{tableHeadings:i,stickyHeadings:e,stickyNav:n,headerNav:t}=this,l=e.findIndex(b=>{var E;return b===((E=document.activeElement)==null?void 0:E.parentElement)}),c=i.findIndex(b=>{var E;return b===((E=document.activeElement)==null?void 0:E.parentElement)}),o=n==null?void 0:n.querySelectorAll("button"),d=t==null?void 0:t.querySelectorAll("button");let u=-1;o==null||o.forEach((b,E)=>{b===document.activeElement&&(u=E)});let f=-1;if(d==null||d.forEach((b,E)=>{b===document.activeElement&&(f=E)}),l<0&&c<0&&u<0&&f<0)return null;let p;if(l>=0?p=i[l].querySelector("button"):c>=0&&(p=e[c].querySelector("button")),u>=0?p=d==null?void 0:d[u]:f>=0&&(p=o==null?void 0:o[f]),p==null)return null;p.style.visibility="visible",p.focus(),p.style.removeProperty("visibility")},this.calculateColumnVisibilityData=i=>{const e=this.fixedFirstColumns(),{table:{current:n},scrollContainer:{current:t},dataTable:{current:l}}=this,{stickyHeader:c}=this.props;if((c||i)&&n&&t&&l){const o=n.querySelectorAll(Me.selector),d=o[e-1],u=e?d.offsetLeft+d.offsetWidth:0;if(o.length>0){const f=o.length-1,p=t.scrollLeft+u,b=t.scrollLeft+l.offsetWidth,E={firstVisibleColumnIndex:f,tableLeftVisibleEdge:p,tableRightVisibleEdge:b},y=[...o].map(yn(E)),v=y[y.length-1],S=e?p===u:p===0;return{columnVisibilityData:y,...Sn(E,y),isScrolledFarthestLeft:S,isScrolledFarthestRight:v.rightEdge<=b}}}return{columnVisibilityData:[],previousColumn:void 0,currentColumn:void 0}},this.handleHeaderButtonFocus=i=>{var p;const e=this.fixedFirstColumns();if(this.scrollContainer.current==null||i.target==null||this.state.columnVisibilityData.length===0)return;const t=i.target.parentNode,l=this.scrollContainer.current.scrollLeft,c=this.scrollContainer.current.offsetWidth,o=l+c,d=this.state.columnVisibilityData.length>0?(p=this.state.columnVisibilityData[e])==null?void 0:p.rightEdge:0,u=t.offsetLeft,f=t.offsetLeft+t.offsetWidth;l>u-d&&(this.scrollContainer.current.scrollLeft=u-d),f>o&&(this.scrollContainer.current.scrollLeft=f-c)},this.stickyHeaderScrolling=()=>{const{current:i}=this.stickyTable,{current:e}=this.scrollContainer;i==null||e==null||(i.scrollLeft=e.scrollLeft)},this.scrollListener=()=>{var i;this.scrollStopTimer&&clearTimeout(this.scrollStopTimer),this.scrollStopTimer=setTimeout(()=>{this.setState(e=>({...this.calculateColumnVisibilityData(e.condensed)}))},100),this.setState({isScrolledFarthestLeft:((i=this.scrollContainer.current)==null?void 0:i.scrollLeft)===0}),this.props.stickyHeader&&this.stickyHeaderActive&&this.stickyHeaderScrolling()},this.handleHover=i=>()=>{this.setState({rowHovered:i})},this.handleFocus=i=>{var d;const e=this.fixedFirstColumns();if(this.scrollContainer.current==null||i.target==null)return;const n=i.target.parentNode,l=this.props?(d=this.state.columnVisibilityData[e])==null?void 0:d.rightEdge:0,o=n.offsetLeft-l;this.scrollContainer.current.scrollLeft>o&&(this.scrollContainer.current.scrollLeft=o)},this.navigateTable=i=>{var u;const e=this.fixedFirstColumns(),{currentColumn:n,previousColumn:t}=this.state,l=(u=this.state.columnVisibilityData[e-1])==null?void 0:u.rightEdge;if(!n||!t)return;let c=0;for(let f=0;f<n.index;f++)c+=this.state.columnVisibilityData[f].width;const{current:o}=this.scrollContainer;return()=>{let f=0;e?f=i==="right"?c-l+n.width:c-t.width-l:f=i==="right"?n.rightEdge:t.leftEdge,o&&(o.scrollLeft=f,requestAnimationFrame(()=>{this.setState(p=>({...this.calculateColumnVisibilityData(p.condensed)}))}))}},this.renderHeading=({heading:i,headingIndex:e,inFixedNthColumn:n,inStickyHeader:t})=>{var _;const{sortable:l,truncate:c=!1,columnContentTypes:o,defaultSortDirection:d,initialSortColumnIndex:u=0,verticalAlign:f,firstColumnMinWidth:p}=this.props,b=this.fixedFirstColumns(),{sortDirection:E=d,sortedColumnIndex:y=u,isScrolledFarthestLeft:v}=this.state;let S;const F=`heading-cell-${e}`,H=`stickyheader-${e}`,N=t?H:F;if(l){const D=l[e],m=D&&y===e;S={defaultSortDirection:d,sorted:m,sortable:D,sortDirection:m?E:"none",onSort:this.defaultOnSort(e),fixedNthColumn:b,inFixedNthColumn:b}}const O=t?this.tableHeadingWidths[e]:void 0,B=!v,j={header:!0,stickyHeadingCell:t,content:i,contentType:o[e],nthColumn:e<b,fixedFirstColumns:b,truncate:c,headingIndex:e,...S,verticalAlign:f,handleFocus:this.handleFocus,stickyCellWidth:O,fixedCellVisible:B,firstColumnMinWidth:p};return n&&t?[r.createElement(he,Object.assign({key:N},j,{setRef:D=>{this.setCellRef({ref:D,index:e,inStickyHeader:t})},inFixedNthColumn:!1})),r.createElement(he,Object.assign({key:`${N}-sticky`},j,{setRef:D=>{this.setCellRef({ref:D,index:e,inStickyHeader:t})},inFixedNthColumn:!!b,lastFixedFirstColumn:e===b-1,style:{left:(_=this.state.columnVisibilityData[e])==null?void 0:_.leftEdge}}))]:r.createElement(he,Object.assign({key:N},j,{setRef:D=>{this.setCellRef({ref:D,index:e,inStickyHeader:t})},lastFixedFirstColumn:e===b-1,inFixedNthColumn:n}))},this.totalsRowHeading=()=>{const{i18n:i,totals:e,totalsName:n}=this.props,t=n||{singular:i.translate("Polaris.DataTable.totalRowHeading"),plural:i.translate("Polaris.DataTable.totalsRowHeading")};return e&&e.filter(l=>l!=="").length>1?t.plural:t.singular},this.renderTotals=({total:i,index:e})=>{const n=this.fixedFirstColumns(),t=`totals-cell-${e}`,{truncate:l=!1,verticalAlign:c,columnContentTypes:o}=this.props;let d,u;e===0&&(d=this.totalsRowHeading()),i!==""&&e>0&&(u=o[e],d=i);const f=this.props.showTotalsInFooter;return r.createElement(he,{total:!0,totalInFooter:f,nthColumn:e<=n-1,firstColumn:e===0,key:t,content:d,contentType:u,truncate:l,verticalAlign:c})},this.getColSpan=(i,e,n,t)=>{if(this.fixedFirstColumns())return 1;const c=i||1,o=e||n,d=Math.floor(o/c),u=o%c;return t===0?d+u:d},this.defaultRenderRow=({row:i,index:e,inFixedNthColumn:n,rowHeights:t})=>{const{columnContentTypes:l,truncate:c=!1,verticalAlign:o,hoverable:d=!0,headings:u}=this.props,{condensed:f}=this.state,p=this.fixedFirstColumns(),b=T(C.TableRow,d&&C.hoverable);return r.createElement("tr",{key:`row-${e}`,className:b,onMouseEnter:this.handleHover(e),onMouseLeave:this.handleHover()},i.map((E,y)=>{const v=e===this.state.rowHovered,S=`cell-${y}-row-${e}`,F=this.getColSpan(i.length,u.length,l.length,y);return r.createElement(he,{key:S,content:E,contentType:l[y],nthColumn:y<=p-1,firstColumn:y===0,truncate:c,verticalAlign:o,colSpan:F,hovered:v,style:t?{height:`${t[e]}px`}:{},inFixedNthColumn:f&&n})}))},this.defaultOnSort=i=>{const{onSort:e,defaultSortDirection:n="ascending",initialSortColumnIndex:t}=this.props,{sortDirection:l=n,sortedColumnIndex:c=t}=this.state;let o=n;return c===i&&(o=l==="ascending"?"descending":"ascending"),()=>{this.setState({sortDirection:o,sortedColumnIndex:i},()=>{e&&e(i,o)})}}}componentDidMount(){this.handleResize()}componentDidUpdate(s){xn(s,this.props)||this.handleResize()}componentWillUnmount(){this.handleResize.cancel()}render(){var U,z,Z;const{headings:s,totals:i,showTotalsInFooter:e,rows:n,footerContent:t,hideScrollIndicator:l=!1,increasedTableDensity:c=!1,hasZebraStripingOnData:o=!1,stickyHeader:d=!1,hasFixedFirstColumn:u=!1,pagination:f}=this.props,{condensed:p,columnVisibilityData:b,isScrolledFarthestLeft:E,isScrolledFarthestRight:y}=this.state,v=this.fixedFirstColumns(),S=n.length%2===0,F=T(C.DataTable,p&&C.condensed,i&&C.ShowTotals,e&&C.ShowTotalsInFooter,o&&C.ZebraStripingOnData,o&&S&&C.RowCountIsEven),H=T(C.TableWrapper,p&&C.condensed,c&&C.IncreasedTableDensity,d&&C.StickyHeaderEnabled),N=r.createElement("tr",null,s.map((P,R)=>this.renderHeading({heading:P,headingIndex:R,inFixedNthColumn:!1,inStickyHeader:!1}))),O=i?r.createElement("tr",null,i.map((P,R)=>this.renderTotals({total:P,index:R}))):null,B=n.map(P=>P.slice(0,v)),j=s.slice(0,v),_=i==null?void 0:i.slice(0,v),D=(U=this.table.current)==null?void 0:U.children[0].childNodes,m=(z=this.table.current)==null?void 0:z.children[1].childNodes,x=Qe(D),k=Qe(m),M=p&&v!==0&&r.createElement("table",{className:T(C.FixedFirstColumn,!E&&C.separate),style:{width:`${(Z=b[v-1])==null?void 0:Z.rightEdge}px`}},r.createElement("thead",null,r.createElement("tr",{style:{height:`${x[0]}px`}},j.map((P,R)=>this.renderHeading({heading:P,headingIndex:R,inFixedNthColumn:!0,inStickyHeader:!1}))),i&&!e&&r.createElement("tr",{style:{height:`${x[1]}px`}},_==null?void 0:_.map((P,R)=>this.renderTotals({total:P,index:R})))),r.createElement("tbody",null,B.map((P,R)=>this.defaultRenderRow({row:P,index:R,inFixedNthColumn:!0,rowHeights:k}))),i&&e&&r.createElement("tfoot",null,r.createElement("tr",null,_==null?void 0:_.map((P,R)=>this.renderTotals({total:P,index:R}))))),w=n.map((P,R)=>this.defaultRenderRow({row:P,index:R,inFixedNthColumn:!1})),I=t?r.createElement("div",{className:C.Footer},t):null,Y=f?r.createElement(It,Object.assign({type:"table"},f)):null,W=e?null:O,V=e?r.createElement("tfoot",null,O):null,q=P=>l?null:r.createElement(_n,{columnVisibilityData:b,isScrolledFarthestLeft:E,isScrolledFarthestRight:y,navigateTableLeft:this.navigateTable("left"),navigateTableRight:this.navigateTable("right"),fixedFirstColumns:v,setRef:R=>{P==="header"?this.headerNav=R:P==="sticky"&&(this.stickyNav=R)}}),te=d?r.createElement(Pn,null,r.createElement("div",{className:C.StickyHeaderWrapper,role:"presentation"},r.createElement(Fn,{boundingElement:this.dataTable.current,onStickyChange:P=>{this.changeHeadingFocus(),this.stickyHeaderActive=P}},P=>{const R=T(C.StickyHeaderInner,P&&C["StickyHeaderInner-isSticky"]),ye=T(C.StickyHeaderTable,!E&&C.separate);return r.createElement("div",{className:R},r.createElement("div",null,q("sticky")),r.createElement("table",{className:ye,ref:this.stickyTable},r.createElement("thead",null,r.createElement("tr",{className:C.StickyTableHeadingsRow},s.map((Se,ze)=>this.renderHeading({heading:Se,headingIndex:ze,inFixedNthColumn:!!(ze<=v-1&&v),inStickyHeader:!0}))))))}))):null;return r.createElement("div",{className:H,ref:this.dataTable},te,q("header"),r.createElement("div",{className:F},r.createElement("div",{className:C.ScrollContainer,ref:this.scrollContainer},r.createElement(Ie,{event:"resize",handler:this.handleResize}),r.createElement(Ie,{capture:!0,passive:!0,event:"scroll",handler:this.scrollListener}),M,r.createElement("table",{className:C.Table,ref:this.table},r.createElement("thead",null,N,W),r.createElement("tbody",null,w),V)),Y,I))}fixedFirstColumns(){const{hasFixedFirstColumn:s,fixedFirstColumns:i=0,headings:e}=this.props,n=s&&!i?1:i;return n>=e.length?0:n}}function In(a){const s=ue();return r.createElement(Mn,Object.assign({},a,{i18n:s}))}const Dn=h.memo(function({children:s,disabled:i,root:e}){return h.useEffect(()=>{if(i||!e)return;const n=Rn(e)?e.current:e;!n||n.querySelector("[autofocus]")||xe(n,!1)},[i,e]),r.createElement(r.Fragment,null,s)});function Rn(a){return a.current!==void 0}function Ce(){return Ce=Object.assign?Object.assign.bind():function(a){for(var s=1;s<arguments.length;s++){var i=arguments[s];for(var e in i)({}).hasOwnProperty.call(i,e)&&(a[e]=i[e])}return a},Ce.apply(null,arguments)}function Be(a,s){if(a==null)return{};var i={};for(var e in a)if({}.hasOwnProperty.call(a,e)){if(s.indexOf(e)!==-1)continue;i[e]=a[e]}return i}function De(a,s){return De=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,e){return i.__proto__=e,i},De(a,s)}function Ae(a,s){a.prototype=Object.create(s.prototype),a.prototype.constructor=a,De(a,s)}function Hn(a,s){return a.classList?!!s&&a.classList.contains(s):(" "+(a.className.baseVal||a.className)+" ").indexOf(" "+s+" ")!==-1}function jn(a,s){a.classList?a.classList.add(s):Hn(a,s)||(typeof a.className=="string"?a.className=a.className+" "+s:a.setAttribute("class",(a.className&&a.className.baseVal||"")+" "+s))}function et(a,s){return a.replace(new RegExp("(^|\\s)"+s+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function Ln(a,s){a.classList?a.classList.remove(s):typeof a.className=="string"?a.className=et(a.className,s):a.setAttribute("class",et(a.className&&a.className.baseVal||"",s))}const tt={disabled:!1},ve=r.createContext(null);var xt=function(s){return s.scrollTop},me="unmounted",ne="exited",ae="entering",de="entered",Re="exiting",J=(function(a){Ae(s,a);function s(e,n){var t;t=a.call(this,e,n)||this;var l=n,c=l&&!l.isMounting?e.enter:e.appear,o;return t.appearStatus=null,e.in?c?(o=ne,t.appearStatus=ae):o=de:e.unmountOnExit||e.mountOnEnter?o=me:o=ne,t.state={status:o},t.nextCallback=null,t}s.getDerivedStateFromProps=function(n,t){var l=n.in;return l&&t.status===me?{status:ne}:null};var i=s.prototype;return i.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},i.componentDidUpdate=function(n){var t=null;if(n!==this.props){var l=this.state.status;this.props.in?l!==ae&&l!==de&&(t=ae):(l===ae||l===de)&&(t=Re)}this.updateStatus(!1,t)},i.componentWillUnmount=function(){this.cancelNextCallback()},i.getTimeouts=function(){var n=this.props.timeout,t,l,c;return t=l=c=n,n!=null&&typeof n!="number"&&(t=n.exit,l=n.enter,c=n.appear!==void 0?n.appear:l),{exit:t,enter:l,appear:c}},i.updateStatus=function(n,t){if(n===void 0&&(n=!1),t!==null)if(this.cancelNextCallback(),t===ae){if(this.props.unmountOnExit||this.props.mountOnEnter){var l=this.props.nodeRef?this.props.nodeRef.current:Ee.findDOMNode(this);l&&xt(l)}this.performEnter(n)}else this.performExit();else this.props.unmountOnExit&&this.state.status===ne&&this.setState({status:me})},i.performEnter=function(n){var t=this,l=this.props.enter,c=this.context?this.context.isMounting:n,o=this.props.nodeRef?[c]:[Ee.findDOMNode(this),c],d=o[0],u=o[1],f=this.getTimeouts(),p=c?f.appear:f.enter;if(!n&&!l||tt.disabled){this.safeSetState({status:de},function(){t.props.onEntered(d)});return}this.props.onEnter(d,u),this.safeSetState({status:ae},function(){t.props.onEntering(d,u),t.onTransitionEnd(p,function(){t.safeSetState({status:de},function(){t.props.onEntered(d,u)})})})},i.performExit=function(){var n=this,t=this.props.exit,l=this.getTimeouts(),c=this.props.nodeRef?void 0:Ee.findDOMNode(this);if(!t||tt.disabled){this.safeSetState({status:ne},function(){n.props.onExited(c)});return}this.props.onExit(c),this.safeSetState({status:Re},function(){n.props.onExiting(c),n.onTransitionEnd(l.exit,function(){n.safeSetState({status:ne},function(){n.props.onExited(c)})})})},i.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},i.safeSetState=function(n,t){t=this.setNextCallback(t),this.setState(n,t)},i.setNextCallback=function(n){var t=this,l=!0;return this.nextCallback=function(c){l&&(l=!1,t.nextCallback=null,n(c))},this.nextCallback.cancel=function(){l=!1},this.nextCallback},i.onTransitionEnd=function(n,t){this.setNextCallback(t);var l=this.props.nodeRef?this.props.nodeRef.current:Ee.findDOMNode(this),c=n==null&&!this.props.addEndListener;if(!l||c){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var o=this.props.nodeRef?[this.nextCallback]:[l,this.nextCallback],d=o[0],u=o[1];this.props.addEndListener(d,u)}n!=null&&setTimeout(this.nextCallback,n)},i.render=function(){var n=this.state.status;if(n===me)return null;var t=this.props,l=t.children;t.in,t.mountOnEnter,t.unmountOnExit,t.appear,t.enter,t.exit,t.timeout,t.addEndListener,t.onEnter,t.onEntering,t.onEntered,t.onExit,t.onExiting,t.onExited,t.nodeRef;var c=Be(t,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return r.createElement(ve.Provider,{value:null},typeof l=="function"?l(n,c):r.cloneElement(r.Children.only(l),c))},s})(r.Component);J.contextType=ve;J.propTypes={};function ce(){}J.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:ce,onEntering:ce,onEntered:ce,onExit:ce,onExiting:ce,onExited:ce};J.UNMOUNTED=me;J.EXITED=ne;J.ENTERING=ae;J.ENTERED=de;J.EXITING=Re;var On=function(s,i){return s&&i&&i.split(" ").forEach(function(e){return jn(s,e)})},Te=function(s,i){return s&&i&&i.split(" ").forEach(function(e){return Ln(s,e)})},$e=(function(a){Ae(s,a);function s(){for(var e,n=arguments.length,t=new Array(n),l=0;l<n;l++)t[l]=arguments[l];return e=a.call.apply(a,[this].concat(t))||this,e.appliedClasses={appear:{},enter:{},exit:{}},e.onEnter=function(c,o){var d=e.resolveArguments(c,o),u=d[0],f=d[1];e.removeClasses(u,"exit"),e.addClass(u,f?"appear":"enter","base"),e.props.onEnter&&e.props.onEnter(c,o)},e.onEntering=function(c,o){var d=e.resolveArguments(c,o),u=d[0],f=d[1],p=f?"appear":"enter";e.addClass(u,p,"active"),e.props.onEntering&&e.props.onEntering(c,o)},e.onEntered=function(c,o){var d=e.resolveArguments(c,o),u=d[0],f=d[1],p=f?"appear":"enter";e.removeClasses(u,p),e.addClass(u,p,"done"),e.props.onEntered&&e.props.onEntered(c,o)},e.onExit=function(c){var o=e.resolveArguments(c),d=o[0];e.removeClasses(d,"appear"),e.removeClasses(d,"enter"),e.addClass(d,"exit","base"),e.props.onExit&&e.props.onExit(c)},e.onExiting=function(c){var o=e.resolveArguments(c),d=o[0];e.addClass(d,"exit","active"),e.props.onExiting&&e.props.onExiting(c)},e.onExited=function(c){var o=e.resolveArguments(c),d=o[0];e.removeClasses(d,"exit"),e.addClass(d,"exit","done"),e.props.onExited&&e.props.onExited(c)},e.resolveArguments=function(c,o){return e.props.nodeRef?[e.props.nodeRef.current,c]:[c,o]},e.getClassNames=function(c){var o=e.props.classNames,d=typeof o=="string",u=d&&o?o+"-":"",f=d?""+u+c:o[c],p=d?f+"-active":o[c+"Active"],b=d?f+"-done":o[c+"Done"];return{baseClassName:f,activeClassName:p,doneClassName:b}},e}var i=s.prototype;return i.addClass=function(n,t,l){var c=this.getClassNames(t)[l+"ClassName"],o=this.getClassNames("enter"),d=o.doneClassName;t==="appear"&&l==="done"&&d&&(c+=" "+d),l==="active"&&n&&xt(n),c&&(this.appliedClasses[t][l]=c,On(n,c))},i.removeClasses=function(n,t){var l=this.appliedClasses[t],c=l.base,o=l.active,d=l.done;this.appliedClasses[t]={},c&&Te(n,c),o&&Te(n,o),d&&Te(n,d)},i.render=function(){var n=this.props;n.classNames;var t=Be(n,["classNames"]);return r.createElement(J,Ce({},t,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},s})(r.Component);$e.defaultProps={classNames:""};$e.propTypes={};function Bn(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Ve(a,s){var i=function(t){return s&&h.isValidElement(t)?s(t):t},e=Object.create(null);return a&&h.Children.map(a,function(n){return n}).forEach(function(n){e[n.key]=i(n)}),e}function An(a,s){a=a||{},s=s||{};function i(u){return u in s?s[u]:a[u]}var e=Object.create(null),n=[];for(var t in a)t in s?n.length&&(e[t]=n,n=[]):n.push(t);var l,c={};for(var o in s){if(e[o])for(l=0;l<e[o].length;l++){var d=e[o][l];c[e[o][l]]=i(d)}c[o]=i(o)}for(l=0;l<n.length;l++)c[n[l]]=i(n[l]);return c}function se(a,s,i){return i[s]!=null?i[s]:a.props[s]}function $n(a,s){return Ve(a.children,function(i){return h.cloneElement(i,{onExited:s.bind(null,i),in:!0,appear:se(i,"appear",a),enter:se(i,"enter",a),exit:se(i,"exit",a)})})}function Vn(a,s,i){var e=Ve(a.children),n=An(s,e);return Object.keys(n).forEach(function(t){var l=n[t];if(h.isValidElement(l)){var c=t in s,o=t in e,d=s[t],u=h.isValidElement(d)&&!d.props.in;o&&(!c||u)?n[t]=h.cloneElement(l,{onExited:i.bind(null,l),in:!0,exit:se(l,"exit",a),enter:se(l,"enter",a)}):!o&&c&&!u?n[t]=h.cloneElement(l,{in:!1}):o&&c&&h.isValidElement(d)&&(n[t]=h.cloneElement(l,{onExited:i.bind(null,l),in:d.props.in,exit:se(l,"exit",a),enter:se(l,"enter",a)}))}}),n}var Wn=Object.values||function(a){return Object.keys(a).map(function(s){return a[s]})},Un={component:"div",childFactory:function(s){return s}},We=(function(a){Ae(s,a);function s(e,n){var t;t=a.call(this,e,n)||this;var l=t.handleExited.bind(Bn(t));return t.state={contextValue:{isMounting:!0},handleExited:l,firstRender:!0},t}var i=s.prototype;return i.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},i.componentWillUnmount=function(){this.mounted=!1},s.getDerivedStateFromProps=function(n,t){var l=t.children,c=t.handleExited,o=t.firstRender;return{children:o?$n(n,c):Vn(n,l,c),firstRender:!1}},i.handleExited=function(n,t){var l=Ve(this.props.children);n.key in l||(n.props.onExited&&n.props.onExited(t),this.mounted&&this.setState(function(c){var o=Ce({},c.children);return delete o[n.key],{children:o}}))},i.render=function(){var n=this.props,t=n.component,l=n.childFactory,c=Be(n,["component","childFactory"]),o=this.state.contextValue,d=Wn(this.state.children).map(l);return delete c.appear,delete c.enter,delete c.exit,t===null?r.createElement(ve.Provider,{value:o},d):r.createElement(ve.Provider,{value:o},r.createElement(t,c,d))},s})(r.Component);We.propTypes={};We.defaultProps=Un;var we={Body:"Polaris-Modal__Body",NoScrollBody:"Polaris-Modal__NoScrollBody",IFrame:"Polaris-Modal__IFrame"},nt={Section:"Polaris-Modal-Section",titleHidden:"Polaris-Modal-Section--titleHidden"};function yt({children:a,flush:s=!1,subdued:i=!1,titleHidden:e=!1}){const n=T(nt.Section,e&&nt.titleHidden);return r.createElement("div",{className:n},r.createElement(L,Object.assign({as:"section",padding:s?"0":"400"},e&&{paddingInlineEnd:"0"},i&&{background:"bg-surface-tertiary"}),a))}var A={Container:"Polaris-Modal-Dialog__Container",Dialog:"Polaris-Modal-Dialog",Modal:"Polaris-Modal-Dialog__Modal",limitHeight:"Polaris-Modal-Dialog--limitHeight",sizeSmall:"Polaris-Modal-Dialog--sizeSmall",sizeLarge:"Polaris-Modal-Dialog--sizeLarge",sizeFullScreen:"Polaris-Modal-Dialog--sizeFullScreen",animateFadeUp:"Polaris-Modal-Dialog--animateFadeUp",entering:"Polaris-Modal-Dialog--entering",exiting:"Polaris-Modal-Dialog--exiting",exited:"Polaris-Modal-Dialog--exited",entered:"Polaris-Modal-Dialog--entered"};function zn({trapping:a}){const s=h.useContext(tn),i=h.useId();if(!s)throw new je("No FocusManager was provided.");const{trapFocusList:e,add:n,remove:t}=s,l=e[0]===i,c=h.useMemo(()=>({canSafelyFocus:l}),[l]);return h.useEffect(()=>{if(a)return n(i),()=>{t(i)}},[n,i,t,a]),c}function Zn({trapping:a=!0,children:s}){const{canSafelyFocus:i}=zn({trapping:a}),e=h.useRef(null),[n,t]=h.useState(!0);h.useEffect(()=>{const o=i&&!(e.current&&e.current.contains(document.activeElement))?!a:!0;t(o)},[i,a]);const l=o=>{const d=e.current&&e.current.contains(document.activeElement);a===!1||!e.current||d||o.target instanceof Element&&o.target.matches(`${Yt.selector} *`)||i&&o.target instanceof HTMLElement&&e.current!==o.target&&!e.current.contains(o.target)&&xe(e.current)},c=o=>{if(a===!1||!e.current)return;const d=Dt(e.current),u=Rt(e.current);o.target===u&&!o.shiftKey&&(o.preventDefault(),Ht(e.current)),o.target===d&&o.shiftKey&&(o.preventDefault(),jt(e.current))};return r.createElement(Dn,{disabled:n,root:e.current},r.createElement("div",{ref:e},r.createElement(Ie,{event:"focusin",handler:l}),r.createElement(Fe,{keyCode:_e.Tab,keyEvent:"keydown",handler:c}),s))}function qn({instant:a,labelledBy:s,children:i,limitHeight:e,size:n,onClose:t,onExited:l,onEntered:c,setClosing:o,hasToasts:d,...u}){const f=Qt(),p=h.useRef(null),b=h.useContext(En);let E;b&&(E=b.toastMessages);const y=T(A.Modal,n&&A[be("size",n)],e&&A.limitHeight),v=a?J:Kn;h.useEffect(()=>{p.current&&!p.current.contains(document.activeElement)&&xe(p.current)},[]);const S=()=>{o&&o(!0)},F=()=>{o&&o(!1),t()},H=r.createElement("div",{"aria-live":"assertive"},E?E.map(N=>r.createElement(re,{visuallyHidden:!0,as:"p",key:N.id},N.content)):null);return r.createElement(v,Object.assign({},u,{nodeRef:p,mountOnEnter:!0,unmountOnExit:!0,timeout:parseInt(f.motion["motion-duration-200"],10),onEntered:c,onExited:l}),r.createElement("div",{className:A.Container,"data-polaris-layer":!0,"data-polaris-overlay":!0,ref:p},r.createElement(Zn,null,r.createElement("div",{role:"dialog","aria-modal":!0,"aria-label":s,"aria-labelledby":s,tabIndex:-1,className:A.Dialog},r.createElement("div",{className:y},r.createElement(Fe,{keyCode:_e.Escape,keyEvent:"keydown",handler:S}),r.createElement(Fe,{keyCode:_e.Escape,handler:F}),i),H))))}const Gn={appear:T(A.animateFadeUp,A.entering),appearActive:T(A.animateFadeUp,A.entered),enter:T(A.animateFadeUp,A.entering),enterActive:T(A.animateFadeUp,A.entered),exit:T(A.animateFadeUp,A.exiting),exitActive:T(A.animateFadeUp,A.exited)};function Kn({children:a,...s}){return r.createElement($e,Object.assign({},s,{classNames:Gn}),a)}function at({pressed:a,onClick:s}){const i=ue();return r.createElement(ee,{variant:"tertiary",pressed:a,icon:Oe,onClick:s,accessibilityLabel:i.translate("Polaris.Common.close")})}function Xn({id:a,children:s,closing:i,titleHidden:e,onClose:n}){return e||!s?r.createElement(L,{position:"absolute",insetInlineEnd:"400",insetBlockStart:"400",zIndex:"1"},r.createElement(at,{onClick:n})):r.createElement(L,{paddingBlockStart:"400",paddingBlockEnd:"400",paddingInlineStart:"400",paddingInlineEnd:"400",borderBlockEndWidth:"025",borderColor:"border",background:"bg-surface-tertiary"},r.createElement(gn,{columns:{xs:"1fr auto"},gap:"400"},r.createElement($,{gap:"400",blockAlign:"center"},r.createElement(re,{id:a,as:"h2",variant:"headingMd",breakWord:!0},s)),r.createElement(at,{pressed:i,onClick:n})))}function Jn({primaryAction:a,secondaryActions:s,children:i}){const e=a&&Ze(a,{variant:"primary"})||null,n=s&&Ze(s)||null,t=e||n?r.createElement($,{gap:"200"},n,e):null;return r.createElement($,{gap:"400",blockAlign:"center"},r.createElement(L,{borderColor:"border",borderBlockStartWidth:"025",padding:"400",width:"100%"},r.createElement($,{gap:"400",blockAlign:"center",align:"space-between"},r.createElement(L,null,i),t)))}const it=200,Yn=400,He=function({children:s,title:i,titleHidden:e=!1,src:n,iFrameName:t,open:l,instant:c,sectioned:o,loading:d,size:u,limitHeight:f,footer:p,primaryAction:b,secondaryActions:E,onScrolledToBottom:y,activator:v,activatorWrapper:S="div",onClose:F,onIFrameLoad:H,onTransitionEnd:N,noScroll:O}){const[B,j]=h.useState(it),[_,D]=h.useState(!1),m=h.useId(),x=h.useRef(null),M=ue().translate("Polaris.Modal.iFrameTitle");let w,I;const Y=h.useCallback(()=>{N&&N()},[N]),W=h.useCallback(()=>{j(it);const U=v&&st(v)?v&&v.current:x.current;U&&requestAnimationFrame(()=>xe(U))},[v]),V=h.useCallback(U=>{const z=U.target;if(z&&z.contentWindow)try{j(z.contentWindow.document.body.scrollHeight)}catch{j(Yn)}H!=null&&H(U)},[H]);if(l){const U=!p&&!b&&!E?null:r.createElement(Jn,{primaryAction:b,secondaryActions:E},p),z=o?Lt(s,yt,{titleHidden:e}):s,Z=d?r.createElement(L,{padding:"400"},r.createElement($,{gap:"400",align:"center",blockAlign:"center"},r.createElement(At,null))):z,P=O?r.createElement("div",{className:we.NoScrollBody},r.createElement(L,{width:"100%",overflowX:"hidden",overflowY:"hidden"},Z)):r.createElement(Bt,{shadow:!0,className:we.Body,onScrolledToBottom:y},Z),R=n?r.createElement("iframe",{name:t,title:M,src:n,className:we.IFrame,onLoad:V,style:{height:`${B}px`}}):P;w=r.createElement(qn,{instant:c,labelledBy:m,onClose:F,onEntered:Y,onExited:W,size:u,limitHeight:f,setClosing:D},r.createElement(Xn,{titleHidden:e,id:m,closing:_,onClose:F},i),R,U),I=r.createElement(cn,{setClosing:D,onClick:F})}const q=!c,te=v&&!st(v)?r.createElement(L,{ref:x,as:S},v):null;return r.createElement(Le.Provider,{value:!0},te,r.createElement(Ot,{idPrefix:"modal"},r.createElement(We,{appear:q,enter:q,exit:q},w),I))};function st(a){return Object.prototype.hasOwnProperty.call(a,"current")}He.Section=yt;var K={Select:"Polaris-Select",disabled:"Polaris-Select--disabled",error:"Polaris-Select--error",Backdrop:"Polaris-Select__Backdrop",Input:"Polaris-Select__Input",Content:"Polaris-Select__Content",InlineLabel:"Polaris-Select__InlineLabel",Icon:"Polaris-Select__Icon",SelectedOption:"Polaris-Select__SelectedOption",Prefix:"Polaris-Select__Prefix",hover:"Polaris-Select--hover",toneMagic:"Polaris-Select--toneMagic"};const rt="";function Qn({options:a,label:s,labelAction:i,labelHidden:e,labelInline:n,disabled:t,helpText:l,placeholder:c,id:o,name:d,value:u=rt,error:f,onChange:p,onFocus:b,onBlur:E,requiredIndicator:y,tone:v}){const{value:S,toggle:F}=$t(!1),H=h.useId(),N=o??H,O=n?!0:e,B=T(K.Select,f&&K.error,v&&K[be("tone",v)],t&&K.disabled),j=h.useCallback(V=>{F(),b==null||b(V)},[b,F]),_=h.useCallback(V=>{F(),E==null||E(V)},[E,F]),D=p?V=>p(V.currentTarget.value,N):void 0,m=[];l&&m.push(Ut(N)),f&&m.push(`${N}Error`);let k=(a||[]).map(ea);c&&(k=[{label:c,value:rt,disabled:!0},...k]);const M=n&&r.createElement(L,{paddingInlineEnd:"100"},r.createElement(re,{as:"span",variant:"bodyMd",tone:v&&v==="magic"&&!S?"magic-subdued":"subdued",truncate:!0},s)),w=ta(k,u),I=w.prefix&&r.createElement("div",{className:K.Prefix},w.prefix),Y=r.createElement("div",{className:K.Content,"aria-hidden":!0,"aria-disabled":t},M,I,r.createElement("span",{className:K.SelectedOption},w.label),r.createElement("span",{className:K.Icon},r.createElement(ge,{source:Vt}))),W=k.map(aa);return r.createElement(Wt,{id:N,label:s,error:f,action:i,labelHidden:O,helpText:l,requiredIndicator:y,disabled:t},r.createElement("div",{className:B},r.createElement("select",{id:N,name:d,value:u,className:K.Input,disabled:t,onFocus:j,onBlur:_,onChange:D,"aria-invalid":!!f,"aria-describedby":m.length?m.join(" "):void 0,"aria-required":y},W),Y,r.createElement("div",{className:K.Backdrop})))}function lt(a){return typeof a=="string"}function Ue(a){return typeof a=="object"&&"options"in a&&a.options!=null}function ot(a){return{label:a,value:a}}function ea(a){if(lt(a))return ot(a);if(Ue(a)){const{title:s,options:i}=a;return{title:s,options:i.map(e=>lt(e)?ot(e):e)}}return a}function ta(a,s){const i=na(a);let e=i.find(n=>s===n.value);return e===void 0&&(e=i.find(n=>!n.hidden)),e||{value:"",label:""}}function na(a){let s=[];return a.forEach(i=>{Ue(i)?s=s.concat(i.options):s.push(i)}),s}function ct(a){const{value:s,label:i,prefix:e,key:n,...t}=a;return r.createElement("option",Object.assign({key:n??s,value:s},t),i)}function aa(a){if(Ue(a)){const{title:s,options:i}=a;return r.createElement("optgroup",{label:s,key:s},i.map(ct))}return ct(a)}function ia(a,s,i="all"){let e=a;return i==="k18"&&(e=a.filter(n=>n.title.includes("K18")||n.title.includes("18金"))),s&&(e=e.filter(n=>n.title.toLowerCase().includes(s.toLowerCase())||n.handle.toLowerCase().includes(s.toLowerCase()))),e}function sa(a,s,i=.93){const e=a*(1+s),n=a*i,t=Math.max(e,n);return Math.ceil(t/10)*10}function fa(){var _,D;const{products:a,goldPrice:s,selectedProductIds:i,shopSetting:e}=kt(),n=Pt(),[t,l]=h.useState([]),[c,o]=h.useState(""),[d,u]=h.useState("all"),[f,p]=h.useState((e==null?void 0:e.minPricePct)||93),[b,E]=h.useState(!1),[y,v]=h.useState([]);h.useEffect(()=>{if(i&&i.length>0){const m=a.filter(x=>i.includes(x.id));l(m)}},[a,i]);const S=ia(a,c,d),F=h.useCallback((m,x)=>{const k=a.find(M=>M.id===m);l(x?M=>[...M,k]:M=>M.filter(w=>w.id!==m))},[a]),H=h.useCallback(m=>{l(m?S:[])},[S]),N=h.useCallback(()=>{const m=new FormData;m.append("action","saveSelection"),t.forEach(x=>{m.append("productId",x.id)}),n.submit(m,{method:"post"})},[t,n]),O=h.useCallback(()=>{if(t.length===0||!s)return;const m=t.map(x=>({...x,variants:x.variants.edges.map(k=>{const M=k.node,w=parseFloat(M.price),I=sa(w,s.ratio,f/100);return{...M,currentPrice:w,newPrice:I,priceChange:I-w,changed:I!==w}})}));v(m),E(!0)},[t,s,f]),B=h.useCallback(()=>{if(!s)return;const m=t.map(x=>({...x,variants:x.variants.edges.map(k=>k.node)}));n.submit({action:"updatePrices",selectedProducts:JSON.stringify(m),minPriceRate:f.toString()},{method:"post"}),E(!1)},[t,s,f,n]),j=S.map(m=>{var w;const x=t.some(I=>I.id===m.id),k=m.variants.edges,M=k.length>1?`¥${Math.min(...k.map(I=>parseFloat(I.node.price)))} - ¥${Math.max(...k.map(I=>parseFloat(I.node.price)))}`:`¥${((w=k[0])==null?void 0:w.node.price)||0}`;return[g.jsx(sn,{checked:x,onChange:I=>F(m.id,I)}),m.title,g.jsx(qe,{status:m.status==="ACTIVE"?"success":"critical",children:m.status}),M,k.length]});return g.jsx(zt,{title:"商品価格自動調整",subtitle:`${S.length}件の商品（全${a.length}件）`,primaryAction:{content:"価格調整プレビュー",onAction:O,disabled:t.length===0||!s,loading:n.state==="submitting"},children:g.jsxs(fe,{children:[g.jsxs(fe.Section,{children:[s&&g.jsx(le,{children:g.jsxs(X,{gap:"300",children:[g.jsx("h3",{children:"田中貴金属 金価格情報"}),g.jsxs("p",{children:["前日比: ",g.jsxs("strong",{children:[s.change,"%"]})]}),g.jsxs("p",{children:[g.jsxs("strong",{children:["価格調整率: ",(s.ratio*100).toFixed(2),"%"]}),"（この変動率で商品価格を自動調整します）"]})]})}),!s&&g.jsx(oe,{tone:"critical",children:"金価格情報の取得に失敗しました。価格調整機能をご利用いただけません。"})]}),g.jsx(fe.Section,{children:g.jsx(le,{children:g.jsxs(X,{gap:"400",children:[g.jsxs($,{gap:"400",children:[g.jsx("div",{style:{flex:1},children:g.jsx(Ge,{label:"商品検索",value:c,onChange:o,placeholder:"商品名またはハンドルで検索...",clearButton:!0,onClearButtonClick:()=>o("")})}),g.jsx("div",{style:{minWidth:"150px"},children:g.jsx(Qn,{label:"商品フィルター",options:[{label:"すべての商品",value:"all"},{label:"K18商品のみ",value:"k18"}],value:d,onChange:u})})]}),g.jsx(Ge,{label:"価格下限設定 (%)",type:"number",value:f.toString(),onChange:m=>p(parseInt(m)||93),suffix:"%",helpText:"現在価格に対する最低価格の割合（例: 93% = 7%以上は下がらない）",min:"50",max:"100"}),g.jsxs(ft,{children:[g.jsx(ee,{onClick:()=>H(!0),disabled:S.length===0,children:"すべて選択"}),g.jsx(ee,{onClick:()=>H(!1),disabled:t.length===0,children:"選択解除"}),g.jsx(ee,{onClick:N,disabled:n.state==="submitting",variant:"primary",children:"選択を保存"})]}),i&&i.length>0&&g.jsxs(oe,{tone:"info",children:["現在 ",i.length," 件の商品が自動更新対象として保存されています"]}),((_=n.data)==null?void 0:_.message)&&g.jsx(oe,{tone:"success",children:n.data.message})]})})}),g.jsx(fe.Section,{children:g.jsx(le,{children:g.jsx(In,{columnContentTypes:["text","text","text","text","numeric"],headings:["選択","商品名","ステータス","価格","バリエーション"],rows:j,pagination:{hasNext:!1,hasPrevious:!1}})})}),g.jsx(He,{open:b,onClose:()=>E(!1),title:"価格調整プレビュー",primaryAction:{content:"価格を更新",onAction:B,loading:n.state==="submitting"},secondaryActions:[{content:"キャンセル",onAction:()=>E(!1)}],large:!0,children:g.jsx(He.Section,{children:g.jsx(X,{gap:"400",children:y.map(m=>g.jsx(le,{children:g.jsxs(X,{gap:"300",children:[g.jsx("h4",{children:m.title}),m.variants.map(x=>g.jsxs($,{align:"space-between",children:[g.jsx("span",{children:x.title||"デフォルト"}),g.jsxs($,{gap:"200",children:[g.jsxs("span",{children:["¥",x.currentPrice," → ¥",x.newPrice]}),x.changed&&g.jsxs(qe,{tone:x.priceChange>0?"warning":"success",children:[x.priceChange>0?"+":"",x.priceChange,"円"]})]})]},x.id))]})},m.id))})})}),((D=n.data)==null?void 0:D.updateResults)&&g.jsx(fe.Section,{children:g.jsx(le,{children:g.jsxs(X,{gap:"400",children:[g.jsx("h3",{children:"価格更新結果"}),n.data.summary&&g.jsx(le,{background:"bg-surface-secondary",children:g.jsxs($,{gap:"400",children:[g.jsxs("div",{children:["合計: ",g.jsx("strong",{children:n.data.summary.total}),"件"]}),g.jsxs("div",{children:["成功: ",g.jsx("strong",{style:{color:"green"},children:n.data.summary.success}),"件"]}),g.jsxs("div",{children:["失敗: ",g.jsx("strong",{style:{color:"red"},children:n.data.summary.failed}),"件"]})]})}),n.data.error&&g.jsx(oe,{tone:"critical",children:n.data.error}),n.data.message&&g.jsx(oe,{tone:"info",children:n.data.message}),n.data.updateResults.map((m,x)=>{var k,M;return g.jsx(oe,{tone:m.success?"success":"critical",children:m.success?`${m.product} - ${m.variant}: ¥${(k=m.oldPrice)==null?void 0:k.toLocaleString()} → ¥${(M=m.newPrice)==null?void 0:M.toLocaleString()}`:`${m.product} - ${m.variant}: ${m.error}`},x)})]})})})]})})}export{fa as default};
