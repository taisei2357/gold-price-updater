import{g as ae,R as i,r as w}from"./index-Dfrec1kz.js";import{h as K,d as ne,E as Y}from"./context-JUMp7zSJ.js";import{j as Q,f as F,v as ie,k as re,d as oe,c as ee,l as ce,m as ue,n as de}from"./Page-BFDl36QU.js";import{S as fe,a as he,A as me,b as be}from"./Sticky-DoFvUJj_.js";var J,te;function Ce(){if(te)return J;te=1;var C=typeof Element<"u",f=typeof Map=="function",l=typeof Set=="function",e=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function n(t,a){if(t===a)return!0;if(t&&a&&typeof t=="object"&&typeof a=="object"){if(t.constructor!==a.constructor)return!1;var o,s,r;if(Array.isArray(t)){if(o=t.length,o!=a.length)return!1;for(s=o;s--!==0;)if(!n(t[s],a[s]))return!1;return!0}var u;if(f&&t instanceof Map&&a instanceof Map){if(t.size!==a.size)return!1;for(u=t.entries();!(s=u.next()).done;)if(!a.has(s.value[0]))return!1;for(u=t.entries();!(s=u.next()).done;)if(!n(s.value[1],a.get(s.value[0])))return!1;return!0}if(l&&t instanceof Set&&a instanceof Set){if(t.size!==a.size)return!1;for(u=t.entries();!(s=u.next()).done;)if(!a.has(s.value[0]))return!1;return!0}if(e&&ArrayBuffer.isView(t)&&ArrayBuffer.isView(a)){if(o=t.length,o!=a.length)return!1;for(s=o;s--!==0;)if(t[s]!==a[s])return!1;return!0}if(t.constructor===RegExp)return t.source===a.source&&t.flags===a.flags;if(t.valueOf!==Object.prototype.valueOf&&typeof t.valueOf=="function"&&typeof a.valueOf=="function")return t.valueOf()===a.valueOf();if(t.toString!==Object.prototype.toString&&typeof t.toString=="function"&&typeof a.toString=="function")return t.toString()===a.toString();if(r=Object.keys(t),o=r.length,o!==Object.keys(a).length)return!1;for(s=o;s--!==0;)if(!Object.prototype.hasOwnProperty.call(a,r[s]))return!1;if(C&&t instanceof Element)return!1;for(s=o;s--!==0;)if(!((r[s]==="_owner"||r[s]==="__v"||r[s]==="__o")&&t.$$typeof)&&!n(t[r[s]],a[r[s]]))return!1;return!0}return t!==t&&a!==a}return J=function(a,o){try{return n(a,o)}catch(s){if((s.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw s}},J}var pe=Ce();const ge=ae(pe);function ye(C){return function(f,l){const{firstVisibleColumnIndex:e,tableLeftVisibleEdge:n,tableRightVisibleEdge:t}=C,a=f.offsetLeft,o=a+f.offsetWidth,s=le(a,n,t,"left"),r=le(o,n,t,"right"),u=s||r,d=f.offsetWidth;return u&&(C.firstVisibleColumnIndex=Math.min(e,l)),{leftEdge:a,rightEdge:o,isVisible:u,width:d,index:l}}}function le(C,f,l,e){return C>=f+(e==="left"?0:30)&&C<=l-30}function Te(C,f){const{firstVisibleColumnIndex:l}=C,e=Math.max(l-1,0),n=f[e],t=f[l];return{previousColumn:n,currentColumn:t}}var c={DataTable:"Polaris-DataTable",condensed:"Polaris-DataTable--condensed",Navigation:"Polaris-DataTable__Navigation",Pip:"Polaris-DataTable__Pip","Pip-visible":"Polaris-DataTable__Pip--visible",ScrollContainer:"Polaris-DataTable__ScrollContainer",Table:"Polaris-DataTable__Table",TableRow:"Polaris-DataTable__TableRow",Cell:"Polaris-DataTable__Cell",IncreasedTableDensity:"Polaris-DataTable__IncreasedTableDensity",ZebraStripingOnData:"Polaris-DataTable__ZebraStripingOnData",RowCountIsEven:"Polaris-DataTable__RowCountIsEven",ShowTotalsInFooter:"Polaris-DataTable__ShowTotalsInFooter","Cell-separate":"Polaris-DataTable__Cell--separate","Cell-firstColumn":"Polaris-DataTable__Cell--firstColumn","Cell-numeric":"Polaris-DataTable__Cell--numeric","Cell-truncated":"Polaris-DataTable__Cell--truncated","Cell-header":"Polaris-DataTable__Cell--header","Cell-sortable":"Polaris-DataTable__Cell--sortable","Heading-left":"Polaris-DataTable__Heading--left","Cell-verticalAlignTop":"Polaris-DataTable__Cell--verticalAlignTop","Cell-verticalAlignBottom":"Polaris-DataTable__Cell--verticalAlignBottom","Cell-verticalAlignMiddle":"Polaris-DataTable__Cell--verticalAlignMiddle","Cell-verticalAlignBaseline":"Polaris-DataTable__Cell--verticalAlignBaseline",hoverable:"Polaris-DataTable--hoverable","Cell-hovered":"Polaris-DataTable__Cell--hovered",Icon:"Polaris-DataTable__Icon",Heading:"Polaris-DataTable__Heading",StickyHeaderEnabled:"Polaris-DataTable__StickyHeaderEnabled",StickyHeaderWrapper:"Polaris-DataTable__StickyHeaderWrapper","Cell-sorted":"Polaris-DataTable__Cell--sorted","Cell-total":"Polaris-DataTable__Cell--total",ShowTotals:"Polaris-DataTable__ShowTotals","Cell-total-footer":"Polaris-DataTable--cellTotalFooter",Footer:"Polaris-DataTable__Footer",StickyHeaderInner:"Polaris-DataTable__StickyHeaderInner","StickyHeaderInner-isSticky":"Polaris-DataTable__StickyHeaderInner--isSticky",StickyHeaderTable:"Polaris-DataTable__StickyHeaderTable",FixedFirstColumn:"Polaris-DataTable__FixedFirstColumn",StickyTableHeadingsRow:"Polaris-DataTable__StickyTableHeadingsRow",TooltipContent:"Polaris-DataTable__TooltipContent"};function I({content:C,contentType:f,nthColumn:l,firstColumn:e,truncate:n,header:t,total:a,totalInFooter:o,sorted:s,sortable:r,sortDirection:u,inFixedNthColumn:d,verticalAlign:h="top",defaultSortDirection:m="ascending",onSort:p,colSpan:y,setRef:T=()=>{},stickyHeadingCell:v=!1,stickyCellWidth:_,hovered:L=!1,handleFocus:H=()=>{},hasFixedNthColumn:P=!1,fixedCellVisible:N=!1,firstColumnMinWidth:D,style:S,lastFixedFirstColumn:E}){const R=Q(),A=f==="numeric",x=F(c.Cell,c[`Cell-${ie("verticalAlign",h)}`],e&&c["Cell-firstColumn"],n&&c["Cell-truncated"],t&&c["Cell-header"],a&&c["Cell-total"],o&&c["Cell-total-footer"],A&&c["Cell-numeric"],r&&c["Cell-sortable"],s&&c["Cell-sorted"],v&&c.StickyHeaderCell,L&&c["Cell-hovered"],E&&d&&N&&c["Cell-separate"],l&&d&&v&&c.FixedFirstColumn),O=F(t&&c.Heading,t&&f==="text"&&c["Heading-left"]),j=F(r&&c.Icon),W=s&&u?u:m,B=W==="descending"?fe:he,$=u==="ascending"?"descending":"ascending",q=R.translate("Polaris.DataTable.sortAccessibilityLabel",{direction:s?$:W}),M=i.createElement("span",{className:j},i.createElement(oe,{source:B,accessibilityLabel:q})),z=!(v&&P&&l&&!d),V=r?i.createElement("button",{className:O,onClick:p,onFocus:H,tabIndex:z?0:-1},M,C):C,k=y&&y>1?{colSpan:y}:{},b=l&&D?{minWidth:D}:{minWidth:_},g=i.createElement("th",Object.assign({ref:T},K.props,k,{className:x,"aria-sort":u,style:{...S,...b},"data-index-table-sticky-heading":!0}),V),U=t?i.createElement("th",Object.assign({},K.props,{"aria-sort":u},k,{ref:T,className:x,scope:"col",style:{...b}}),V):i.createElement("th",Object.assign({},k,{ref:T,className:x,scope:"row",style:{...b}}),n?i.createElement(ve,{className:c.TooltipContent},C):C),G=t||e||l?U:i.createElement("td",Object.assign({className:x},k),C);return v?g:G}const ve=({children:C,className:f=""})=>{const l=w.useRef(null),{current:e}=l,n=i.createElement("span",{ref:l,className:f},C);return(e==null?void 0:e.scrollWidth)>(e==null?void 0:e.offsetWidth)?i.createElement(re,{content:l.current.innerText},n):n};function Ee({columnVisibilityData:C,isScrolledFarthestLeft:f,isScrolledFarthestRight:l,navigateTableLeft:e,navigateTableRight:n,fixedFirstColumns:t,setRef:a=()=>{}}){const o=Q(),s=C.map((d,h)=>{if(h<t)return;const m=F(c.Pip,d.isVisible&&c["Pip-visible"]);return i.createElement("div",{className:m,key:`pip-${h}`})}),r=o.translate("Polaris.DataTable.navAccessibilityLabel",{direction:"left"}),u=o.translate("Polaris.DataTable.navAccessibilityLabel",{direction:"right"});return i.createElement("div",{className:c.Navigation,ref:a},i.createElement(ee,{variant:"tertiary",icon:ce,disabled:f,accessibilityLabel:r,onClick:e}),s,i.createElement(ee,{variant:"tertiary",icon:ue,disabled:l,accessibilityLabel:u,onClick:n}))}const se=C=>{const f=[];return C&&C.forEach(l=>{f.push(l.clientHeight)}),f};class Se extends w.PureComponent{constructor(...f){super(...f),this.state={condensed:!1,columnVisibilityData:[],isScrolledFarthestLeft:!0,isScrolledFarthestRight:!1,rowHovered:void 0},this.dataTable=w.createRef(),this.scrollContainer=w.createRef(),this.table=w.createRef(),this.stickyTable=w.createRef(),this.stickyNav=null,this.headerNav=null,this.tableHeadings=[],this.stickyHeadings=[],this.tableHeadingWidths=[],this.stickyHeaderActive=!1,this.scrollStopTimer=null,this.handleResize=ne(()=>{const{table:{current:l},scrollContainer:{current:e}}=this;let n=!1;l&&e&&(n=l.scrollWidth>e.clientWidth+1),this.setState({condensed:n,...this.calculateColumnVisibilityData(n)})}),this.setCellRef=({ref:l,index:e,inStickyHeader:n})=>{if(l!=null)if(n){this.stickyHeadings[e]=l;const t=l.querySelector("button");if(t==null)return;t.addEventListener("focus",this.handleHeaderButtonFocus)}else this.tableHeadings[e]=l,this.tableHeadingWidths[e]=l.clientWidth},this.changeHeadingFocus=()=>{const{tableHeadings:l,stickyHeadings:e,stickyNav:n,headerNav:t}=this,a=e.findIndex(m=>{var p;return m===((p=document.activeElement)==null?void 0:p.parentElement)}),o=l.findIndex(m=>{var p;return m===((p=document.activeElement)==null?void 0:p.parentElement)}),s=n==null?void 0:n.querySelectorAll("button"),r=t==null?void 0:t.querySelectorAll("button");let u=-1;s==null||s.forEach((m,p)=>{m===document.activeElement&&(u=p)});let d=-1;if(r==null||r.forEach((m,p)=>{m===document.activeElement&&(d=p)}),a<0&&o<0&&u<0&&d<0)return null;let h;if(a>=0?h=l[a].querySelector("button"):o>=0&&(h=e[o].querySelector("button")),u>=0?h=r==null?void 0:r[u]:d>=0&&(h=s==null?void 0:s[d]),h==null)return null;h.style.visibility="visible",h.focus(),h.style.removeProperty("visibility")},this.calculateColumnVisibilityData=l=>{const e=this.fixedFirstColumns(),{table:{current:n},scrollContainer:{current:t},dataTable:{current:a}}=this,{stickyHeader:o}=this.props;if((o||l)&&n&&t&&a){const s=n.querySelectorAll(K.selector),r=s[e-1],u=e?r.offsetLeft+r.offsetWidth:0;if(s.length>0){const d=s.length-1,h=t.scrollLeft+u,m=t.scrollLeft+a.offsetWidth,p={firstVisibleColumnIndex:d,tableLeftVisibleEdge:h,tableRightVisibleEdge:m},y=[...s].map(ye(p)),T=y[y.length-1],v=e?h===u:h===0;return{columnVisibilityData:y,...Te(p,y),isScrolledFarthestLeft:v,isScrolledFarthestRight:T.rightEdge<=m}}}return{columnVisibilityData:[],previousColumn:void 0,currentColumn:void 0}},this.handleHeaderButtonFocus=l=>{var h;const e=this.fixedFirstColumns();if(this.scrollContainer.current==null||l.target==null||this.state.columnVisibilityData.length===0)return;const t=l.target.parentNode,a=this.scrollContainer.current.scrollLeft,o=this.scrollContainer.current.offsetWidth,s=a+o,r=this.state.columnVisibilityData.length>0?(h=this.state.columnVisibilityData[e])==null?void 0:h.rightEdge:0,u=t.offsetLeft,d=t.offsetLeft+t.offsetWidth;a>u-r&&(this.scrollContainer.current.scrollLeft=u-r),d>s&&(this.scrollContainer.current.scrollLeft=d-o)},this.stickyHeaderScrolling=()=>{const{current:l}=this.stickyTable,{current:e}=this.scrollContainer;l==null||e==null||(l.scrollLeft=e.scrollLeft)},this.scrollListener=()=>{var l;this.scrollStopTimer&&clearTimeout(this.scrollStopTimer),this.scrollStopTimer=setTimeout(()=>{this.setState(e=>({...this.calculateColumnVisibilityData(e.condensed)}))},100),this.setState({isScrolledFarthestLeft:((l=this.scrollContainer.current)==null?void 0:l.scrollLeft)===0}),this.props.stickyHeader&&this.stickyHeaderActive&&this.stickyHeaderScrolling()},this.handleHover=l=>()=>{this.setState({rowHovered:l})},this.handleFocus=l=>{var r;const e=this.fixedFirstColumns();if(this.scrollContainer.current==null||l.target==null)return;const n=l.target.parentNode,a=this.props?(r=this.state.columnVisibilityData[e])==null?void 0:r.rightEdge:0,s=n.offsetLeft-a;this.scrollContainer.current.scrollLeft>s&&(this.scrollContainer.current.scrollLeft=s)},this.navigateTable=l=>{var u;const e=this.fixedFirstColumns(),{currentColumn:n,previousColumn:t}=this.state,a=(u=this.state.columnVisibilityData[e-1])==null?void 0:u.rightEdge;if(!n||!t)return;let o=0;for(let d=0;d<n.index;d++)o+=this.state.columnVisibilityData[d].width;const{current:s}=this.scrollContainer;return()=>{let d=0;e?d=l==="right"?o-a+n.width:o-t.width-a:d=l==="right"?n.rightEdge:t.leftEdge,s&&(s.scrollLeft=d,requestAnimationFrame(()=>{this.setState(h=>({...this.calculateColumnVisibilityData(h.condensed)}))}))}},this.renderHeading=({heading:l,headingIndex:e,inFixedNthColumn:n,inStickyHeader:t})=>{var S;const{sortable:a,truncate:o=!1,columnContentTypes:s,defaultSortDirection:r,initialSortColumnIndex:u=0,verticalAlign:d,firstColumnMinWidth:h}=this.props,m=this.fixedFirstColumns(),{sortDirection:p=r,sortedColumnIndex:y=u,isScrolledFarthestLeft:T}=this.state;let v;const _=`heading-cell-${e}`,L=`stickyheader-${e}`,H=t?L:_;if(a){const E=a[e],R=E&&y===e;v={defaultSortDirection:r,sorted:R,sortable:E,sortDirection:R?p:"none",onSort:this.defaultOnSort(e),fixedNthColumn:m,inFixedNthColumn:m}}const P=t?this.tableHeadingWidths[e]:void 0,N=!T,D={header:!0,stickyHeadingCell:t,content:l,contentType:s[e],nthColumn:e<m,fixedFirstColumns:m,truncate:o,headingIndex:e,...v,verticalAlign:d,handleFocus:this.handleFocus,stickyCellWidth:P,fixedCellVisible:N,firstColumnMinWidth:h};return n&&t?[i.createElement(I,Object.assign({key:H},D,{setRef:E=>{this.setCellRef({ref:E,index:e,inStickyHeader:t})},inFixedNthColumn:!1})),i.createElement(I,Object.assign({key:`${H}-sticky`},D,{setRef:E=>{this.setCellRef({ref:E,index:e,inStickyHeader:t})},inFixedNthColumn:!!m,lastFixedFirstColumn:e===m-1,style:{left:(S=this.state.columnVisibilityData[e])==null?void 0:S.leftEdge}}))]:i.createElement(I,Object.assign({key:H},D,{setRef:E=>{this.setCellRef({ref:E,index:e,inStickyHeader:t})},lastFixedFirstColumn:e===m-1,inFixedNthColumn:n}))},this.totalsRowHeading=()=>{const{i18n:l,totals:e,totalsName:n}=this.props,t=n||{singular:l.translate("Polaris.DataTable.totalRowHeading"),plural:l.translate("Polaris.DataTable.totalsRowHeading")};return e&&e.filter(a=>a!=="").length>1?t.plural:t.singular},this.renderTotals=({total:l,index:e})=>{const n=this.fixedFirstColumns(),t=`totals-cell-${e}`,{truncate:a=!1,verticalAlign:o,columnContentTypes:s}=this.props;let r,u;e===0&&(r=this.totalsRowHeading()),l!==""&&e>0&&(u=s[e],r=l);const d=this.props.showTotalsInFooter;return i.createElement(I,{total:!0,totalInFooter:d,nthColumn:e<=n-1,firstColumn:e===0,key:t,content:r,contentType:u,truncate:a,verticalAlign:o})},this.getColSpan=(l,e,n,t)=>{if(this.fixedFirstColumns())return 1;const o=l||1,s=e||n,r=Math.floor(s/o),u=s%o;return t===0?r+u:r},this.defaultRenderRow=({row:l,index:e,inFixedNthColumn:n,rowHeights:t})=>{const{columnContentTypes:a,truncate:o=!1,verticalAlign:s,hoverable:r=!0,headings:u}=this.props,{condensed:d}=this.state,h=this.fixedFirstColumns(),m=F(c.TableRow,r&&c.hoverable);return i.createElement("tr",{key:`row-${e}`,className:m,onMouseEnter:this.handleHover(e),onMouseLeave:this.handleHover()},l.map((p,y)=>{const T=e===this.state.rowHovered,v=`cell-${y}-row-${e}`,_=this.getColSpan(l.length,u.length,a.length,y);return i.createElement(I,{key:v,content:p,contentType:a[y],nthColumn:y<=h-1,firstColumn:y===0,truncate:o,verticalAlign:s,colSpan:_,hovered:T,style:t?{height:`${t[e]}px`}:{},inFixedNthColumn:d&&n})}))},this.defaultOnSort=l=>{const{onSort:e,defaultSortDirection:n="ascending",initialSortColumnIndex:t}=this.props,{sortDirection:a=n,sortedColumnIndex:o=t}=this.state;let s=n;return o===l&&(s=a==="ascending"?"descending":"ascending"),()=>{this.setState({sortDirection:s,sortedColumnIndex:l},()=>{e&&e(l,s)})}}}componentDidMount(){this.handleResize()}componentDidUpdate(f){ge(f,this.props)||this.handleResize()}componentWillUnmount(){this.handleResize.cancel()}render(){var Z,V,k;const{headings:f,totals:l,showTotalsInFooter:e,rows:n,footerContent:t,hideScrollIndicator:a=!1,increasedTableDensity:o=!1,hasZebraStripingOnData:s=!1,stickyHeader:r=!1,hasFixedFirstColumn:u=!1,pagination:d}=this.props,{condensed:h,columnVisibilityData:m,isScrolledFarthestLeft:p,isScrolledFarthestRight:y}=this.state,T=this.fixedFirstColumns(),v=n.length%2===0,_=F(c.DataTable,h&&c.condensed,l&&c.ShowTotals,e&&c.ShowTotalsInFooter,s&&c.ZebraStripingOnData,s&&v&&c.RowCountIsEven),L=F(c.TableWrapper,h&&c.condensed,o&&c.IncreasedTableDensity,r&&c.StickyHeaderEnabled),H=i.createElement("tr",null,f.map((b,g)=>this.renderHeading({heading:b,headingIndex:g,inFixedNthColumn:!1,inStickyHeader:!1}))),P=l?i.createElement("tr",null,l.map((b,g)=>this.renderTotals({total:b,index:g}))):null,N=n.map(b=>b.slice(0,T)),D=f.slice(0,T),S=l==null?void 0:l.slice(0,T),E=(Z=this.table.current)==null?void 0:Z.children[0].childNodes,R=(V=this.table.current)==null?void 0:V.children[1].childNodes,A=se(E),x=se(R),O=h&&T!==0&&i.createElement("table",{className:F(c.FixedFirstColumn,!p&&c.separate),style:{width:`${(k=m[T-1])==null?void 0:k.rightEdge}px`}},i.createElement("thead",null,i.createElement("tr",{style:{height:`${A[0]}px`}},D.map((b,g)=>this.renderHeading({heading:b,headingIndex:g,inFixedNthColumn:!0,inStickyHeader:!1}))),l&&!e&&i.createElement("tr",{style:{height:`${A[1]}px`}},S==null?void 0:S.map((b,g)=>this.renderTotals({total:b,index:g})))),i.createElement("tbody",null,N.map((b,g)=>this.defaultRenderRow({row:b,index:g,inFixedNthColumn:!0,rowHeights:x}))),l&&e&&i.createElement("tfoot",null,i.createElement("tr",null,S==null?void 0:S.map((b,g)=>this.renderTotals({total:b,index:g}))))),j=n.map((b,g)=>this.defaultRenderRow({row:b,index:g,inFixedNthColumn:!1})),W=t?i.createElement("div",{className:c.Footer},t):null,B=d?i.createElement(de,Object.assign({type:"table"},d)):null,$=e?null:P,q=e?i.createElement("tfoot",null,P):null,M=b=>a?null:i.createElement(Ee,{columnVisibilityData:m,isScrolledFarthestLeft:p,isScrolledFarthestRight:y,navigateTableLeft:this.navigateTable("left"),navigateTableRight:this.navigateTable("right"),fixedFirstColumns:T,setRef:g=>{b==="header"?this.headerNav=g:b==="sticky"&&(this.stickyNav=g)}}),z=r?i.createElement(me,null,i.createElement("div",{className:c.StickyHeaderWrapper,role:"presentation"},i.createElement(be,{boundingElement:this.dataTable.current,onStickyChange:b=>{this.changeHeadingFocus(),this.stickyHeaderActive=b}},b=>{const g=F(c.StickyHeaderInner,b&&c["StickyHeaderInner-isSticky"]),U=F(c.StickyHeaderTable,!p&&c.separate);return i.createElement("div",{className:g},i.createElement("div",null,M("sticky")),i.createElement("table",{className:U,ref:this.stickyTable},i.createElement("thead",null,i.createElement("tr",{className:c.StickyTableHeadingsRow},f.map((G,X)=>this.renderHeading({heading:G,headingIndex:X,inFixedNthColumn:!!(X<=T-1&&T),inStickyHeader:!0}))))))}))):null;return i.createElement("div",{className:L,ref:this.dataTable},z,M("header"),i.createElement("div",{className:_},i.createElement("div",{className:c.ScrollContainer,ref:this.scrollContainer},i.createElement(Y,{event:"resize",handler:this.handleResize}),i.createElement(Y,{capture:!0,passive:!0,event:"scroll",handler:this.scrollListener}),O,i.createElement("table",{className:c.Table,ref:this.table},i.createElement("thead",null,H,$),i.createElement("tbody",null,j),q)),B,W))}fixedFirstColumns(){const{hasFixedFirstColumn:f,fixedFirstColumns:l=0,headings:e}=this.props,n=f&&!l?1:l;return n>=e.length?0:n}}function ke(C){const f=Q();return i.createElement(Se,Object.assign({},C,{i18n:f}))}export{ke as D};
