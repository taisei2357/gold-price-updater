import{R as s,r as o,j as e}from"./index-OtPSfN_w.js";import{u as U,b as D}from"./components-B6iG4OGC.js";import{P as R,I as l,e as x,T as t,C as m,b as r,f as S,a as b,B as $}from"./Page-tPcJA2Wd.js";import{L as d}from"./Layout-DylFXOet.js";import{B as f,C as F,S as H}from"./Select-BvGNw0HV.js";import{F as y}from"./FormLayout-D7OHCHJE.js";import"./context-AaFCZbCq.js";var E=function(a){return s.createElement("svg",Object.assign({viewBox:"0 0 20 20"},a),s.createElement("path",{d:"M13.28 9.03a.75.75 0 0 0-1.06-1.06l-2.97 2.97-1.22-1.22a.75.75 0 0 0-1.06 1.06l1.75 1.75a.75.75 0 0 0 1.06 0l3.5-3.5Z"}),s.createElement("path",{fillRule:"evenodd",d:"M17 10a7 7 0 1 1-14 0 7 7 0 0 1 14 0Zm-1.5 0a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0Z"}))};E.displayName="CheckCircleIcon";var C=function(a){return s.createElement("svg",Object.assign({viewBox:"0 0 20 20"},a),s.createElement("path",{d:"M10.75 6a.75.75 0 0 0-1.5 0v4c0 .199.079.39.22.53l2 2a.75.75 0 1 0 1.06-1.06l-1.78-1.78v-3.69Z"}),s.createElement("path",{fillRule:"evenodd",d:"M17 10a7 7 0 1 1-14 0 7 7 0 0 1 14 0Zm-1.5 0a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0Z"}))};C.displayName="ClockIcon";var I=function(a){return s.createElement("svg",Object.assign({viewBox:"0 0 20 20"},a),s.createElement("path",{fillRule:"evenodd",d:"m7.252 14.424-2.446-.281c-1.855-.213-2.38-2.659-.778-3.616l.065-.038a2.887 2.887 0 0 0 1.407-2.48v-.509a4.5 4.5 0 0 1 9 0v.51c0 1.016.535 1.958 1.408 2.479l.065.038c1.602.957 1.076 3.403-.778 3.616l-2.543.292v.365a2.7 2.7 0 0 1-5.4 0v-.376Zm3.9.076h-2.4v.3a1.2 1.2 0 0 0 2.4 0v-.3Zm-3.152-1.5h4l3.024-.348a.452.452 0 0 0 .18-.837l-.065-.038a4.414 4.414 0 0 1-.747-.562 4.387 4.387 0 0 1-1.392-3.205v-.51a3 3 0 0 0-6 0v.51a4.387 4.387 0 0 1-2.138 3.767l-.065.038a.452.452 0 0 0 .18.838l3.023.347Z"}))};I.displayName="NotificationIcon";var M=function(a){return s.createElement("svg",Object.assign({viewBox:"0 0 20 20"},a),s.createElement("path",{fillRule:"evenodd",d:"M12.5 10a2.5 2.5 0 1 1-5 0 2.5 2.5 0 0 1 5 0Zm-1.5 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0Z"}),s.createElement("path",{fillRule:"evenodd",d:"M9.377 2.5c-.926 0-1.676.75-1.676 1.676v.688c0 .056-.043.17-.198.251-.153.08-.303.168-.448.262-.147.097-.268.076-.318.048l-.6-.346a1.676 1.676 0 0 0-2.29.613l-.622 1.08a1.676 1.676 0 0 0 .613 2.289l.648.374c.048.028.124.12.119.29a5.484 5.484 0 0 0 .005.465c.009.175-.07.27-.119.299l-.653.377a1.676 1.676 0 0 0-.613 2.29l.623 1.08a1.676 1.676 0 0 0 2.29.613l.7-.405c.048-.028.166-.048.312.043.115.071.233.139.353.202.155.08.198.195.198.251v.811c0 .926.75 1.676 1.676 1.676h1.246c.926 0 1.676-.75 1.676-1.676v-.81c0-.057.042-.171.197-.252.121-.063.239-.13.354-.202.146-.091.264-.07.312-.043l.7.405a1.676 1.676 0 0 0 2.29-.614l.623-1.08a1.676 1.676 0 0 0-.613-2.289l-.653-.377c-.05-.029-.128-.123-.119-.3a5.494 5.494 0 0 0 .005-.463c-.005-.171.07-.263.12-.291l.647-.374a1.676 1.676 0 0 0 .613-2.29l-.623-1.079a1.676 1.676 0 0 0-2.29-.613l-.6.346c-.049.028-.17.048-.318-.048a5.4 5.4 0 0 0-.448-.262c-.155-.081-.197-.195-.197-.251v-.688c0-.926-.75-1.676-1.676-1.676h-1.246Zm-.176 1.676c0-.097.078-.176.176-.176h1.246c.097 0 .176.079.176.176v.688c0 .728.462 1.298 1.003 1.58.11.058.219.122.323.19.517.337 1.25.458 1.888.09l.6-.346a.176.176 0 0 1 .24.064l.623 1.08a.176.176 0 0 1-.064.24l-.648.374c-.623.36-.888 1.034-.868 1.638a4.184 4.184 0 0 1-.004.337c-.032.615.23 1.31.867 1.677l.653.377a.176.176 0 0 1 .064.24l-.623 1.08a.176.176 0 0 1-.24.065l-.701-.405c-.624-.36-1.341-.251-1.855.069a3.91 3.91 0 0 1-.255.145c-.54.283-1.003.853-1.003 1.581v.811a.176.176 0 0 1-.176.176h-1.246a.176.176 0 0 1-.176-.176v-.81c0-.73-.462-1.3-1.003-1.582a3.873 3.873 0 0 1-.255-.146c-.514-.32-1.23-.428-1.855-.068l-.7.405a.176.176 0 0 1-.241-.065l-.623-1.08a.176.176 0 0 1 .064-.24l.653-.377c.637-.368.899-1.062.867-1.677a3.97 3.97 0 0 1-.004-.337c.02-.604-.245-1.278-.868-1.638l-.648-.374a.176.176 0 0 1-.064-.24l.623-1.08a.176.176 0 0 1 .24-.064l.6.346c.638.368 1.37.247 1.888-.09a3.85 3.85 0 0 1 .323-.19c.54-.282 1.003-.852 1.003-1.58v-.688Z"}))};M.displayName="SettingsIcon";var O={Divider:"Polaris-Divider"};const v=({borderColor:n="border-secondary",borderWidth:a="025"})=>{const c=n==="transparent"?n:`var(--p-color-${n})`;return s.createElement("hr",{className:O.Divider,style:{borderBlockStart:`var(--p-border-width-${a}) solid ${c}`}})};function q(){const{setting:n}=U(),a=D(),[c,k]=o.useState(n.autoUpdateEnabled),[h,Z]=o.useState(n.minPricePct.toString()),[j,B]=o.useState(n.autoUpdateHour.toString()),[g,P]=o.useState(n.notificationEmail||""),[T,p]=o.useState(!1);o.useEffect(()=>{var i;if((i=a.data)!=null&&i.success){p(!0);const u=setTimeout(()=>p(!1),3e3);return()=>clearTimeout(u)}},[a.data]);const w=[...Array(24)].map((i,u)=>({label:`${String(u).padStart(2,"0")}:00`,value:u.toString()})),N=()=>{const i=new FormData;i.append("autoUpdateEnabled",c.toString()),i.append("minPricePct",h),i.append("autoUpdateHour",j),i.append("notificationEmail",g),a.submit(i,{method:"post"})};return e.jsx(R,{title:"アプリ設定",subtitle:"自動価格調整の設定を管理します",titleMetadata:e.jsx(S,{tone:"info",children:"V2.0"}),children:e.jsxs(d,{children:[T&&e.jsx(d.Section,{children:e.jsx(f,{tone:"success",onDismiss:()=>p(!1),children:e.jsxs(l,{gap:"200",align:"center",children:[e.jsx(x,{source:E,tone:"success"}),e.jsx(t,{children:"設定が正常に保存されました"})]})})}),e.jsx(d.Section,{children:e.jsx(m,{children:e.jsxs(r,{gap:"500",children:[e.jsxs(l,{gap:"300",align:"start",children:[e.jsx(x,{source:M,tone:"base"}),e.jsxs(r,{gap:"200",children:[e.jsx(t,{variant:"headingMd",as:"h2",children:"自動更新設定"}),e.jsx(t,{variant:"bodySm",tone:"subdued",children:"田中貴金属の価格変動に基づいて商品価格を自動調整します"})]})]}),e.jsx(v,{}),e.jsxs(y,{children:[e.jsx(F,{label:"自動更新を有効化",helpText:"有効にすると設定時刻に自動で価格調整が実行されます",checked:c,onChange:k}),e.jsxs(l,{gap:"400",align:"start",children:[e.jsx("div",{style:{minWidth:"200px"},children:e.jsx(H,{label:"自動更新時刻（JST）",options:w,value:j,onChange:B,disabled:!c})}),e.jsx("div",{style:{paddingTop:"24px"},children:e.jsx(S,{tone:c?"info":"warning",children:c?"有効":"無効"})})]}),e.jsx(b,{label:"価格下限設定（%）",type:"number",value:h,onChange:Z,min:1,max:100,suffix:"%",helpText:`現在価格の${h}%を下限として保護します（例: ${h}% = ${100-parseInt(h)}%以上下がらない）`})]})]})})}),e.jsx(d.Section,{children:e.jsx(m,{children:e.jsxs(r,{gap:"500",children:[e.jsxs(l,{gap:"300",align:"start",children:[e.jsx(x,{source:I,tone:"base"}),e.jsxs(r,{gap:"200",children:[e.jsx(t,{variant:"headingMd",as:"h2",children:"通知設定"}),e.jsx(t,{variant:"bodySm",tone:"subdued",children:"価格更新の実行結果やエラーを通知します"})]})]}),e.jsx(v,{}),e.jsx(y,{children:e.jsx(b,{label:"通知メールアドレス（任意）",type:"email",value:g,onChange:P,placeholder:"you@example.com",helpText:"設定すると自動更新の結果がメールで通知されます"})})]})})}),e.jsx(d.Section,{children:e.jsx(m,{children:e.jsxs(r,{gap:"500",children:[e.jsxs(l,{gap:"300",align:"start",children:[e.jsx(x,{source:C,tone:"base"}),e.jsxs(r,{gap:"200",children:[e.jsx(t,{variant:"headingMd",as:"h2",children:"実行スケジュール"}),e.jsx(t,{variant:"bodySm",tone:"subdued",children:"自動更新の実行タイミングについて"})]})]}),e.jsx(v,{}),e.jsxs(r,{gap:"300",children:[e.jsxs(l,{gap:"600",children:[e.jsxs("div",{children:[e.jsx(t,{variant:"bodyMd",as:"p",fontWeight:"semibold",children:"実行曜日"}),e.jsx(t,{variant:"bodySm",tone:"subdued",children:"平日（月〜金曜日）"})]}),e.jsxs("div",{children:[e.jsx(t,{variant:"bodyMd",as:"p",fontWeight:"semibold",children:"実行時刻"}),e.jsxs(t,{variant:"bodySm",tone:"subdued",children:[String(n.autoUpdateHour||10).padStart(2,"0"),":00（日本時間）"]})]}),e.jsxs("div",{children:[e.jsx(t,{variant:"bodyMd",as:"p",fontWeight:"semibold",children:"祝日対応"}),e.jsx(t,{variant:"bodySm",tone:"subdued",children:"自動的にスキップ"})]})]}),e.jsx(f,{tone:"info",children:e.jsx(t,{children:"自動更新は平日の設定時刻に実行され、日本の祝日は自動的にスキップされます。 価格変動がない場合や取得エラー時は更新をスキップします。"})})]})]})})}),e.jsx(d.Section,{children:e.jsx(l,{align:"end",children:e.jsx($,{variant:"primary",size:"large",onClick:N,loading:a.state==="submitting",children:"設定を保存"})})})]})})}export{q as default};
