var ta=Object.defineProperty;var na=(e,t,i)=>t in e?ta(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i;var qt=(e,t,i)=>na(e,typeof t!="symbol"?t+"":t,i);import{R as s,r as o,d as ut,j as a}from"./index-OtPSfN_w.js";import{u as aa,A as ra,b as It,w as la}from"./components-C9-D01ZZ.js";import{M as hn,f as C,y as ia,j as We,B as Ee,b as sa,z as oa,u as Rt,A as fn,D as mn,T as F,g as Ne,x as ca,E as wt,I as B,v as nt,F as da,w as gn,p as ua,o as pa,s as ha,G as bt,e as K,K as _t,H as Nt,J as fa,N as ma,O as ga,Q as ba,R as Zt,W as xa,V as Sa,X as Ea,Y as Wt,m as va,d as Z,P as bn,C as be,c as pe,a as Yt}from"./Page-DvMnY4Uh.js";import{L as xe}from"./Layout-BvDTjT3E.js";import{C as rt,S as Ta,B as ge}from"./Banner-DRkmBrND.js";import{S as pt}from"./Select-DS1yuizv.js";import{E as xn,p as ya,l as ka,d as at,m as Ca}from"./context-C9td0CMk.js";import{a as Qt,S as en,b as Pa,A as ja}from"./Sticky-DAC3dAc4.js";import{S as Aa,F as Ia}from"./context-Dqc0DVKX.js";import"./banner-context-Bfu3e4If.js";var ht=function(t){return s.createElement("svg",Object.assign({viewBox:"0 0 20 20"},t),s.createElement("path",{d:"M3.5 9.25a.75.75 0 0 0 1.5 0 3 3 0 0 1 3-3h6.566l-1.123 1.248a.75.75 0 1 0 1.114 1.004l2.25-2.5a.75.75 0 0 0-.027-1.032l-2.25-2.25a.75.75 0 1 0-1.06 1.06l.97.97h-6.44a4.5 4.5 0 0 0-4.5 4.5Z"}),s.createElement("path",{d:"M16.5 10.75a.75.75 0 0 0-1.5 0 3 3 0 0 1-3 3h-6.566l1.123-1.248a.75.75 0 1 0-1.114-1.004l-2.25 2.5a.75.75 0 0 0 .027 1.032l2.25 2.25a.75.75 0 0 0 1.06-1.06l-.97-.97h6.44a4.5 4.5 0 0 0 4.5-4.5Z"}))};ht.displayName="RefreshIcon";const Sn=o.forwardRef(({alt:e,sourceSet:t,source:i,crossOrigin:n,onLoad:r,className:l,...p},u)=>{const d=t?t.map(({source:v,descriptor:b})=>`${v} ${b}`).join(","):null,h=o.useCallback(()=>{r&&r()},[r]);return s.createElement("img",Object.assign({ref:u,alt:e,src:i,crossOrigin:n,className:l,onLoad:h},d?{srcSet:d}:{},p))});Sn.displayName="Image";var Ct={Backdrop:"Polaris-Backdrop",transparent:"Polaris-Backdrop--transparent",belowNavigation:"Polaris-Backdrop--belowNavigation"};function wa(){const e=o.useContext(Aa);if(!e)throw new hn("No ScrollLockManager was provided.");return e}function _a(e){const t=wa();return o.useEffect(()=>(t.registerScrollLock(),()=>{t.unregisterScrollLock()}),[t]),null}function Na(e){const{onClick:t,onTouchStart:i,belowNavigation:n,transparent:r,setClosing:l}=e,p=C(Ct.Backdrop,n&&Ct.belowNavigation,r&&Ct.transparent),u=()=>{l&&l(!0)},d=()=>{l&&l(!1),t&&t()};return s.createElement(s.Fragment,null,s.createElement(_a,null),s.createElement("div",{className:p,onClick:d,onTouchStart:i,onMouseDown:u}))}function tn(e=[],t,i,n){const r=i.reduce((d,h)=>d+h,0),l=e.map((d,h)=>h),p=[],u=[];if(n>r)p.push(...l);else{let d=0,h=!1;l.forEach(v=>{const b=i[v];if(d+b>=n-t||h){u.push(v),h=!0;return}p.push(v),d+=b})}return{visiblePromotedActions:p,hiddenPromotedActions:u}}function La(e){const t=e.filter(i=>i.items);return e.length===t.length}function Ba(e){const t=e.filter(i=>!i.items);return e.length===t.length}function Lt(e){return"title"in e&&"actions"in e}function Ma(e){return"items"in e}function Ha(e){if(!(!e||e.length===0)){if(La(e))return e;if(Ba(e))return[{items:e}]}}function nn(e){var t;if(!e)return!1;for(const i of e)for(const n of i.items)if(((t=n.badge)==null?void 0:t.tone)==="new")return!0;return!1}var Ce={BulkActionsOuterLayout:"Polaris-BulkActions__BulkActionsOuterLayout",BulkActionsSelectAllWrapper:"Polaris-BulkActions__BulkActionsSelectAllWrapper",BulkActionsPromotedActionsWrapper:"Polaris-BulkActions__BulkActionsPromotedActionsWrapper",BulkActionsLayout:"Polaris-BulkActions__BulkActionsLayout","BulkActionsLayout--measuring":"Polaris-BulkActions--bulkActionsLayoutMeasuring",BulkActionsMeasurerLayout:"Polaris-BulkActions__BulkActionsMeasurerLayout",BulkActionButton:"Polaris-BulkActions__BulkActionButton",AllAction:"Polaris-BulkActions__AllAction"},an={Indicator:"Polaris-Indicator",pulseIndicator:"Polaris-Indicator--pulseIndicator"};function Ra({pulse:e=!0}){const t=C(an.Indicator,e&&an.pulseIndicator);return s.createElement("span",{className:t})}function Je({handleMeasurement:e,url:t,external:i,onAction:n,content:r,disclosure:l,accessibilityLabel:p,disabled:u,destructive:d,indicator:h,showContentInButton:v,size:b}){const T=o.useRef(null);ia(()=>{if(e&&T.current){const S=T.current.getBoundingClientRect().width;e(S)}});const y=l&&!v,M=y?void 0:r,H=s.createElement(Ee,{external:i,url:t,accessibilityLabel:y?r:p,tone:d?"critical":void 0,disclosure:l&&v,onClick:n,disabled:u,size:b,icon:y?s.createElement(sa,{source:oa,tone:"base"}):void 0},M);return s.createElement("div",{className:Ce.BulkActionButton,ref:T},y?s.createElement(We,{content:r,preferredPosition:"below"},H):H,h&&s.createElement(Ra,null))}function Wa({title:e,actions:t,isNewBadgeInBadgeActions:i,size:n}){const{value:r,toggle:l}=Rt(!1);return s.createElement(s.Fragment,null,s.createElement(fn,{active:r,activator:s.createElement(Je,{disclosure:!0,showContentInButton:!0,onAction:l,content:e,indicator:i,size:n}),onClose:l,preferInputActivator:!0},s.createElement(mn,{items:t,onActionAnyItem:l})))}var Pt={CheckableButton:"Polaris-CheckableButton",Checkbox:"Polaris-CheckableButton__Checkbox",Label:"Polaris-CheckableButton__Label"};const Da=o.forwardRef(function({accessibilityLabel:t,label:i="",onToggleAll:n,selected:r,disabled:l,ariaLive:p},u){const d=o.useRef(null);function h(){var v;(v=d==null?void 0:d.current)==null||v.focus()}return o.useImperativeHandle(u,()=>({focus:h})),s.createElement("div",{className:Pt.CheckableButton,onClick:n},s.createElement("div",{className:Pt.Checkbox},s.createElement(rt,{label:t,labelHidden:!0,checked:r,disabled:l,onChange:n,ref:d})),i?s.createElement("span",{className:Pt.Label,"aria-live":p},s.createElement(F,{as:"span",variant:"bodySm",fontWeight:"medium"},i)):null)}),Fa=4;function Oa({promotedActions:e=[],disabled:t,buttonSize:i,handleMeasurement:n}){const r=Ne(),l=o.useRef(null),p=r.translate("Polaris.ResourceList.BulkActions.moreActionsActivatorLabel"),u=s.createElement(Je,{disclosure:!0,content:p}),d=o.useCallback(()=>{if(!l.current)return;const v=l.current.offsetWidth,b=l.current.children,y=Array.from(b).map(H=>Math.ceil(H.getBoundingClientRect().width)+Fa),M=y.pop()||0;n({containerWidth:v,disclosureWidth:M,hiddenActionsWidths:y})},[n]);o.useEffect(()=>{d()},[d,e]);const h=e.map((v,b)=>Lt(v)?s.createElement(Je,{key:b,disclosure:!0,showContentInButton:!0,content:v.title,size:i}):s.createElement(Je,Object.assign({key:b,disabled:t},v,{size:i})));return ca("resize",d),s.createElement("div",{className:Ce.BulkActionsMeasurerLayout,ref:l},h,u)}const za=o.forwardRef(function({promotedActions:t,actions:i,disabled:n,buttonSize:r,paginatedSelectAllAction:l,paginatedSelectAllText:p,label:u,accessibilityLabel:d,selected:h,onToggleAll:v,onMoreActionPopoverToggle:b,width:T,selectMode:y},M){const H=Ne(),[S,A]=o.useState(!1),[k,R]=o.useReducer((w,j)=>({...w,...j}),{disclosureWidth:0,containerWidth:1/0,actionsWidths:[],visiblePromotedActions:[],hiddenPromotedActions:[],hasMeasured:!1}),{visiblePromotedActions:ee,hiddenPromotedActions:J,containerWidth:W,disclosureWidth:X,actionsWidths:_,hasMeasured:he}=k;o.useEffect(()=>{if(W===0||!t||t.length===0)return;const{visiblePromotedActions:w,hiddenPromotedActions:j}=tn(t,X,_,W);R({visiblePromotedActions:w,hiddenPromotedActions:j,hasMeasured:W!==1/0})},[W,X,t,_]);const D=!t||t&&ee.length===0?H.translate("Polaris.ResourceList.BulkActions.actionsActivatorLabel"):H.translate("Polaris.ResourceList.BulkActions.moreActionsActivatorLabel"),z=l?s.createElement(wt,{className:Ce.AllAction,onClick:l.onAction,size:"slim",disabled:n},s.createElement(F,{as:"span",variant:"bodySm",fontWeight:"medium"},l.content)):null,U=p&&l,ie={accessibilityLabel:d,label:U?p:u,selected:h,onToggleAll:v,disabled:n,ariaLive:U?"polite":void 0,ref:M},I=o.useCallback(()=>{b==null||b(S),A(w=>!w)},[b,S]),te=o.useCallback(w=>{const{hiddenActionsWidths:j,containerWidth:N,disclosureWidth:q}=w;if(!t||t.length===0)return;const{visiblePromotedActions:me,hiddenPromotedActions:Pe}=tn(t,q,j,N);R({visiblePromotedActions:me,hiddenPromotedActions:Pe,actionsWidths:j,containerWidth:N,disclosureWidth:q,hasMeasured:!0})},[t]),$=Ha(i),V=t?t.filter((w,j)=>!!ee.includes(j)).map((w,j)=>Lt(w)?s.createElement(Wa,Object.assign({key:j},w,{isNewBadgeInBadgeActions:nn($),size:r})):s.createElement(Je,Object.assign({key:j,disabled:n},w,{size:r}))):null,ne={items:J.map(w=>t==null?void 0:t[w]).reduce((w,j)=>j?Lt(j)?w.concat(j.actions):w.concat(j):w,[])},O=o.useMemo(()=>{if($)return $;if(!i)return[];let w=!0;return i.filter(j=>j).reduce((j,N)=>{if(Ma(N))return w=!1,j.concat(N);if(w){if(j.length===0)return[{items:[N]}];const q=j[j.length-1];return j.splice(j.length-1,1,{items:[...q.items,N]}),j}return w=!0,j.concat({items:[N]})},[])},[i,$]),fe=s.createElement(Je,{disclosure:!0,showContentInButton:!V,onAction:I,content:D,disabled:n,indicator:nn($),size:r}),Be=O.length>0?s.createElement(fn,{active:S,activator:fe,preferredAlignment:"right",onClose:I},s.createElement(mn,{sections:ne.items.length>0?[ne,...O]:O,onActionAnyItem:I})):null,Te=s.createElement(Oa,{promotedActions:t,disabled:n,buttonSize:r,handleMeasurement:te});return s.createElement("div",{className:Ce.BulkActions,style:T?{width:T}:void 0},s.createElement(B,{gap:"400",blockAlign:"center"},s.createElement("div",{className:Ce.BulkActionsSelectAllWrapper},s.createElement(Da,ie),z),y?s.createElement("div",{className:Ce.BulkActionsPromotedActionsWrapper},s.createElement(B,{gap:"100",blockAlign:"center"},s.createElement("div",{className:Ce.BulkActionsOuterLayout},Te,s.createElement("div",{className:C(Ce.BulkActionsLayout,!he&&Ce["BulkActionsLayout--measuring"])},V)),Be)):null))});var we={LegacyStack:"Polaris-LegacyStack",Item:"Polaris-LegacyStack__Item",noWrap:"Polaris-LegacyStack--noWrap",spacingNone:"Polaris-LegacyStack--spacingNone",spacingExtraTight:"Polaris-LegacyStack--spacingExtraTight",spacingTight:"Polaris-LegacyStack--spacingTight",spacingBaseTight:"Polaris-LegacyStack--spacingBaseTight",spacingLoose:"Polaris-LegacyStack--spacingLoose",spacingExtraLoose:"Polaris-LegacyStack--spacingExtraLoose",distributionLeading:"Polaris-LegacyStack--distributionLeading",distributionTrailing:"Polaris-LegacyStack--distributionTrailing",distributionCenter:"Polaris-LegacyStack--distributionCenter",distributionEqualSpacing:"Polaris-LegacyStack--distributionEqualSpacing",distributionFill:"Polaris-LegacyStack--distributionFill",distributionFillEvenly:"Polaris-LegacyStack--distributionFillEvenly",alignmentLeading:"Polaris-LegacyStack--alignmentLeading",alignmentTrailing:"Polaris-LegacyStack--alignmentTrailing",alignmentCenter:"Polaris-LegacyStack--alignmentCenter",alignmentFill:"Polaris-LegacyStack--alignmentFill",alignmentBaseline:"Polaris-LegacyStack--alignmentBaseline",vertical:"Polaris-LegacyStack--vertical","Item-fill":"Polaris-LegacyStack__Item--fill"};function En({children:e,fill:t}){const i=C(we.Item,t&&we["Item-fill"]);return s.createElement("div",{className:i},e)}const Dt=o.memo(function({children:t,vertical:i,spacing:n,distribution:r,alignment:l,wrap:p}){const u=C(we.LegacyStack,i&&we.vertical,n&&we[nt("spacing",n)],r&&we[nt("distribution",r)],l&&we[nt("alignment",l)],p===!1&&we.noWrap),d=da(t).map((h,v)=>gn(h,En,{key:v}));return s.createElement("div",{className:u},d)});Dt.Item=En;var $a={InlineGrid:"Polaris-InlineGrid"};function Ua({children:e,columns:t,gap:i,alignItems:n}){const r={...pa("inline-grid","grid-template-columns",Va(t)),...ua("inline-grid","gap","space",i),"--pc-inline-grid-align-items":n};return s.createElement("div",{className:$a.InlineGrid,style:ha(r)},e)}function Va(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)?Object.fromEntries(Object.entries(e).map(([t,i])=>[t,rn(i)])):rn(e)}function rn(e){if(e)return typeof e=="number"||!isNaN(Number(e))?`repeat(${Number(e)}, minmax(0, 1fr))`:typeof e=="string"?e:e.map(t=>{switch(t){case"oneThird":return"minmax(0, 1fr)";case"oneHalf":return"minmax(0, 1fr)";case"twoThirds":return"minmax(0, 2fr)"}}).join(" ")}const Ga=o.createContext(void 0);var Ka="data:image/svg+xml,%3csvg width='60' height='60' xmlns='http://www.w3.org/2000/svg'%3e%3cpath fill-rule='evenodd' d='M41.87 24a17.87 17.87 0 11-35.74 0 17.87 17.87 0 0135.74 0zm-3.15 18.96a24 24 0 114.24-4.24L59.04 54.8a3 3 0 11-4.24 4.24L38.72 42.96z' fill='%238C9196'/%3e%3c/svg%3e",Ja=Ka;function Xa({title:e,description:t,withIllustration:i}){const r=Ne().translate("Polaris.EmptySearchResult.altText"),l=t?s.createElement("p",null,t):null,p=i?s.createElement(Sn,{alt:r,source:Ja,draggable:!1}):null;return s.createElement(Dt,{alignment:"center",vertical:!0},p,s.createElement(F,{variant:"headingLg",as:"p"},e),s.createElement(F,{tone:"subdued",as:"span"},l))}const qa=o.memo(function({children:t,disabled:i,root:n}){return o.useEffect(()=>{if(i||!n)return;const r=Za(n)?n.current:n;!r||r.querySelector("[autofocus]")||bt(r,!1)},[i,n]),s.createElement(s.Fragment,null,t)});function Za(e){return e.current!==void 0}function ft(){return ft=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)({}).hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},ft.apply(null,arguments)}function Ft(e,t){if(e==null)return{};var i={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;i[n]=e[n]}return i}function Bt(e,t){return Bt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,n){return i.__proto__=n,i},Bt(e,t)}function Ot(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,Bt(e,t)}function Ya(e,t){return e.classList?!!t&&e.classList.contains(t):(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")!==-1}function Qa(e,t){e.classList?e.classList.add(t):Ya(e,t)||(typeof e.className=="string"?e.className=e.className+" "+t:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+t))}function ln(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function er(e,t){e.classList?e.classList.remove(t):typeof e.className=="string"?e.className=ln(e.className,t):e.setAttribute("class",ln(e.className&&e.className.baseVal||"",t))}const sn={disabled:!1},mt=s.createContext(null);var vn=function(t){return t.scrollTop},et="unmounted",He="exited",Re="entering",Ke="entered",Mt="exiting",ve=(function(e){Ot(t,e);function t(n,r){var l;l=e.call(this,n,r)||this;var p=r,u=p&&!p.isMounting?n.enter:n.appear,d;return l.appearStatus=null,n.in?u?(d=He,l.appearStatus=Re):d=Ke:n.unmountOnExit||n.mountOnEnter?d=et:d=He,l.state={status:d},l.nextCallback=null,l}t.getDerivedStateFromProps=function(r,l){var p=r.in;return p&&l.status===et?{status:He}:null};var i=t.prototype;return i.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},i.componentDidUpdate=function(r){var l=null;if(r!==this.props){var p=this.state.status;this.props.in?p!==Re&&p!==Ke&&(l=Re):(p===Re||p===Ke)&&(l=Mt)}this.updateStatus(!1,l)},i.componentWillUnmount=function(){this.cancelNextCallback()},i.getTimeouts=function(){var r=this.props.timeout,l,p,u;return l=p=u=r,r!=null&&typeof r!="number"&&(l=r.exit,p=r.enter,u=r.appear!==void 0?r.appear:p),{exit:l,enter:p,appear:u}},i.updateStatus=function(r,l){if(r===void 0&&(r=!1),l!==null)if(this.cancelNextCallback(),l===Re){if(this.props.unmountOnExit||this.props.mountOnEnter){var p=this.props.nodeRef?this.props.nodeRef.current:ut.findDOMNode(this);p&&vn(p)}this.performEnter(r)}else this.performExit();else this.props.unmountOnExit&&this.state.status===He&&this.setState({status:et})},i.performEnter=function(r){var l=this,p=this.props.enter,u=this.context?this.context.isMounting:r,d=this.props.nodeRef?[u]:[ut.findDOMNode(this),u],h=d[0],v=d[1],b=this.getTimeouts(),T=u?b.appear:b.enter;if(!r&&!p||sn.disabled){this.safeSetState({status:Ke},function(){l.props.onEntered(h)});return}this.props.onEnter(h,v),this.safeSetState({status:Re},function(){l.props.onEntering(h,v),l.onTransitionEnd(T,function(){l.safeSetState({status:Ke},function(){l.props.onEntered(h,v)})})})},i.performExit=function(){var r=this,l=this.props.exit,p=this.getTimeouts(),u=this.props.nodeRef?void 0:ut.findDOMNode(this);if(!l||sn.disabled){this.safeSetState({status:He},function(){r.props.onExited(u)});return}this.props.onExit(u),this.safeSetState({status:Mt},function(){r.props.onExiting(u),r.onTransitionEnd(p.exit,function(){r.safeSetState({status:He},function(){r.props.onExited(u)})})})},i.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},i.safeSetState=function(r,l){l=this.setNextCallback(l),this.setState(r,l)},i.setNextCallback=function(r){var l=this,p=!0;return this.nextCallback=function(u){p&&(p=!1,l.nextCallback=null,r(u))},this.nextCallback.cancel=function(){p=!1},this.nextCallback},i.onTransitionEnd=function(r,l){this.setNextCallback(l);var p=this.props.nodeRef?this.props.nodeRef.current:ut.findDOMNode(this),u=r==null&&!this.props.addEndListener;if(!p||u){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var d=this.props.nodeRef?[this.nextCallback]:[p,this.nextCallback],h=d[0],v=d[1];this.props.addEndListener(h,v)}r!=null&&setTimeout(this.nextCallback,r)},i.render=function(){var r=this.state.status;if(r===et)return null;var l=this.props,p=l.children;l.in,l.mountOnEnter,l.unmountOnExit,l.appear,l.enter,l.exit,l.timeout,l.addEndListener,l.onEnter,l.onEntering,l.onEntered,l.onExit,l.onExiting,l.onExited,l.nodeRef;var u=Ft(l,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return s.createElement(mt.Provider,{value:null},typeof p=="function"?p(r,u):s.cloneElement(s.Children.only(p),u))},t})(s.Component);ve.contextType=mt;ve.propTypes={};function Ge(){}ve.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Ge,onEntering:Ge,onEntered:Ge,onExit:Ge,onExiting:Ge,onExited:Ge};ve.UNMOUNTED=et;ve.EXITED=He;ve.ENTERING=Re;ve.ENTERED=Ke;ve.EXITING=Mt;var tr=function(t,i){return t&&i&&i.split(" ").forEach(function(n){return Qa(t,n)})},jt=function(t,i){return t&&i&&i.split(" ").forEach(function(n){return er(t,n)})},zt=(function(e){Ot(t,e);function t(){for(var n,r=arguments.length,l=new Array(r),p=0;p<r;p++)l[p]=arguments[p];return n=e.call.apply(e,[this].concat(l))||this,n.appliedClasses={appear:{},enter:{},exit:{}},n.onEnter=function(u,d){var h=n.resolveArguments(u,d),v=h[0],b=h[1];n.removeClasses(v,"exit"),n.addClass(v,b?"appear":"enter","base"),n.props.onEnter&&n.props.onEnter(u,d)},n.onEntering=function(u,d){var h=n.resolveArguments(u,d),v=h[0],b=h[1],T=b?"appear":"enter";n.addClass(v,T,"active"),n.props.onEntering&&n.props.onEntering(u,d)},n.onEntered=function(u,d){var h=n.resolveArguments(u,d),v=h[0],b=h[1],T=b?"appear":"enter";n.removeClasses(v,T),n.addClass(v,T,"done"),n.props.onEntered&&n.props.onEntered(u,d)},n.onExit=function(u){var d=n.resolveArguments(u),h=d[0];n.removeClasses(h,"appear"),n.removeClasses(h,"enter"),n.addClass(h,"exit","base"),n.props.onExit&&n.props.onExit(u)},n.onExiting=function(u){var d=n.resolveArguments(u),h=d[0];n.addClass(h,"exit","active"),n.props.onExiting&&n.props.onExiting(u)},n.onExited=function(u){var d=n.resolveArguments(u),h=d[0];n.removeClasses(h,"exit"),n.addClass(h,"exit","done"),n.props.onExited&&n.props.onExited(u)},n.resolveArguments=function(u,d){return n.props.nodeRef?[n.props.nodeRef.current,u]:[u,d]},n.getClassNames=function(u){var d=n.props.classNames,h=typeof d=="string",v=h&&d?d+"-":"",b=h?""+v+u:d[u],T=h?b+"-active":d[u+"Active"],y=h?b+"-done":d[u+"Done"];return{baseClassName:b,activeClassName:T,doneClassName:y}},n}var i=t.prototype;return i.addClass=function(r,l,p){var u=this.getClassNames(l)[p+"ClassName"],d=this.getClassNames("enter"),h=d.doneClassName;l==="appear"&&p==="done"&&h&&(u+=" "+h),p==="active"&&r&&vn(r),u&&(this.appliedClasses[l][p]=u,tr(r,u))},i.removeClasses=function(r,l){var p=this.appliedClasses[l],u=p.base,d=p.active,h=p.done;this.appliedClasses[l]={},u&&jt(r,u),d&&jt(r,d),h&&jt(r,h)},i.render=function(){var r=this.props;r.classNames;var l=Ft(r,["classNames"]);return s.createElement(ve,ft({},l,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},t})(s.Component);zt.defaultProps={classNames:""};zt.propTypes={};function nr(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $t(e,t){var i=function(l){return t&&o.isValidElement(l)?t(l):l},n=Object.create(null);return e&&o.Children.map(e,function(r){return r}).forEach(function(r){n[r.key]=i(r)}),n}function ar(e,t){e=e||{},t=t||{};function i(v){return v in t?t[v]:e[v]}var n=Object.create(null),r=[];for(var l in e)l in t?r.length&&(n[l]=r,r=[]):r.push(l);var p,u={};for(var d in t){if(n[d])for(p=0;p<n[d].length;p++){var h=n[d][p];u[n[d][p]]=i(h)}u[d]=i(d)}for(p=0;p<r.length;p++)u[r[p]]=i(r[p]);return u}function De(e,t,i){return i[t]!=null?i[t]:e.props[t]}function rr(e,t){return $t(e.children,function(i){return o.cloneElement(i,{onExited:t.bind(null,i),in:!0,appear:De(i,"appear",e),enter:De(i,"enter",e),exit:De(i,"exit",e)})})}function lr(e,t,i){var n=$t(e.children),r=ar(t,n);return Object.keys(r).forEach(function(l){var p=r[l];if(o.isValidElement(p)){var u=l in t,d=l in n,h=t[l],v=o.isValidElement(h)&&!h.props.in;d&&(!u||v)?r[l]=o.cloneElement(p,{onExited:i.bind(null,p),in:!0,exit:De(p,"exit",e),enter:De(p,"enter",e)}):!d&&u&&!v?r[l]=o.cloneElement(p,{in:!1}):d&&u&&o.isValidElement(h)&&(r[l]=o.cloneElement(p,{onExited:i.bind(null,p),in:h.props.in,exit:De(p,"exit",e),enter:De(p,"enter",e)}))}}),r}var ir=Object.values||function(e){return Object.keys(e).map(function(t){return e[t]})},sr={component:"div",childFactory:function(t){return t}},Ut=(function(e){Ot(t,e);function t(n,r){var l;l=e.call(this,n,r)||this;var p=l.handleExited.bind(nr(l));return l.state={contextValue:{isMounting:!0},handleExited:p,firstRender:!0},l}var i=t.prototype;return i.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},i.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(r,l){var p=l.children,u=l.handleExited,d=l.firstRender;return{children:d?rr(r,u):lr(r,p,u),firstRender:!1}},i.handleExited=function(r,l){var p=$t(this.props.children);r.key in p||(r.props.onExited&&r.props.onExited(l),this.mounted&&this.setState(function(u){var d=ft({},u.children);return delete d[r.key],{children:d}}))},i.render=function(){var r=this.props,l=r.component,p=r.childFactory,u=Ft(r,["component","childFactory"]),d=this.state.contextValue,h=ir(this.state.children).map(p);return delete u.appear,delete u.enter,delete u.exit,l===null?s.createElement(mt.Provider,{value:d},h):s.createElement(mt.Provider,{value:d},s.createElement(l,u,h))},t})(s.Component);Ut.propTypes={};Ut.defaultProps=sr;function or(e,t,i){if(!document)return;document.documentElement.style.setProperty(e,t)}var At={Body:"Polaris-Modal__Body",NoScrollBody:"Polaris-Modal__NoScrollBody",IFrame:"Polaris-Modal__IFrame"},on={Section:"Polaris-Modal-Section",titleHidden:"Polaris-Modal-Section--titleHidden"};function Tn({children:e,flush:t=!1,subdued:i=!1,titleHidden:n=!1}){const r=C(on.Section,n&&on.titleHidden);return s.createElement("div",{className:r},s.createElement(K,Object.assign({as:"section",padding:t?"0":"400"},n&&{paddingInlineEnd:"0"},i&&{background:"bg-surface-tertiary"}),e))}var Y={Container:"Polaris-Modal-Dialog__Container",Dialog:"Polaris-Modal-Dialog",Modal:"Polaris-Modal-Dialog__Modal",limitHeight:"Polaris-Modal-Dialog--limitHeight",sizeSmall:"Polaris-Modal-Dialog--sizeSmall",sizeLarge:"Polaris-Modal-Dialog--sizeLarge",sizeFullScreen:"Polaris-Modal-Dialog--sizeFullScreen",animateFadeUp:"Polaris-Modal-Dialog--animateFadeUp",entering:"Polaris-Modal-Dialog--entering",exiting:"Polaris-Modal-Dialog--exiting",exited:"Polaris-Modal-Dialog--exited",entered:"Polaris-Modal-Dialog--entered"};function cr({trapping:e}){const t=o.useContext(Ia),i=o.useId();if(!t)throw new hn("No FocusManager was provided.");const{trapFocusList:n,add:r,remove:l}=t,p=n[0]===i,u=o.useMemo(()=>({canSafelyFocus:p}),[p]);return o.useEffect(()=>{if(e)return r(i),()=>{l(i)}},[r,i,l,e]),u}function dr({trapping:e=!0,children:t}){const{canSafelyFocus:i}=cr({trapping:e}),n=o.useRef(null),[r,l]=o.useState(!0);o.useEffect(()=>{const d=i&&!(n.current&&n.current.contains(document.activeElement))?!e:!0;l(d)},[i,e]);const p=d=>{const h=n.current&&n.current.contains(document.activeElement);e===!1||!n.current||h||d.target instanceof Element&&d.target.matches(`${ya.selector} *`)||i&&d.target instanceof HTMLElement&&n.current!==d.target&&!n.current.contains(d.target)&&bt(n.current)},u=d=>{if(e===!1||!n.current)return;const h=fa(n.current),v=ma(n.current);d.target===v&&!d.shiftKey&&(d.preventDefault(),ga(n.current)),d.target===h&&d.shiftKey&&(d.preventDefault(),ba(n.current))};return s.createElement(qa,{disabled:r,root:n.current},s.createElement("div",{ref:n},s.createElement(xn,{event:"focusin",handler:p}),s.createElement(_t,{keyCode:Nt.Tab,keyEvent:"keydown",handler:u}),t))}function ur({instant:e,labelledBy:t,children:i,limitHeight:n,size:r,onClose:l,onExited:p,onEntered:u,setClosing:d,hasToasts:h,...v}){const b=ka(),T=o.useRef(null),y=o.useContext(Ga);let M;y&&(M=y.toastMessages);const H=C(Y.Modal,r&&Y[nt("size",r)],n&&Y.limitHeight),S=e?ve:hr;o.useEffect(()=>{T.current&&!T.current.contains(document.activeElement)&&bt(T.current)},[]);const A=()=>{d&&d(!0)},k=()=>{d&&d(!1),l()},R=s.createElement("div",{"aria-live":"assertive"},M?M.map(ee=>s.createElement(F,{visuallyHidden:!0,as:"p",key:ee.id},ee.content)):null);return s.createElement(S,Object.assign({},v,{nodeRef:T,mountOnEnter:!0,unmountOnExit:!0,timeout:parseInt(b.motion["motion-duration-200"],10),onEntered:u,onExited:p}),s.createElement("div",{className:Y.Container,"data-polaris-layer":!0,"data-polaris-overlay":!0,ref:T},s.createElement(dr,null,s.createElement("div",{role:"dialog","aria-modal":!0,"aria-label":t,"aria-labelledby":t,tabIndex:-1,className:Y.Dialog},s.createElement("div",{className:H},s.createElement(_t,{keyCode:Nt.Escape,keyEvent:"keydown",handler:A}),s.createElement(_t,{keyCode:Nt.Escape,handler:k}),i),R))))}const pr={appear:C(Y.animateFadeUp,Y.entering),appearActive:C(Y.animateFadeUp,Y.entered),enter:C(Y.animateFadeUp,Y.entering),enterActive:C(Y.animateFadeUp,Y.entered),exit:C(Y.animateFadeUp,Y.exiting),exitActive:C(Y.animateFadeUp,Y.exited)};function hr({children:e,...t}){return s.createElement(zt,Object.assign({},t,{classNames:pr}),e)}function cn({pressed:e,onClick:t}){const i=Ne();return s.createElement(Ee,{variant:"tertiary",pressed:e,icon:Ta,onClick:t,accessibilityLabel:i.translate("Polaris.Common.close")})}function fr({id:e,children:t,closing:i,titleHidden:n,onClose:r}){return n||!t?s.createElement(K,{position:"absolute",insetInlineEnd:"400",insetBlockStart:"400",zIndex:"1"},s.createElement(cn,{onClick:r})):s.createElement(K,{paddingBlockStart:"400",paddingBlockEnd:"400",paddingInlineStart:"400",paddingInlineEnd:"400",borderBlockEndWidth:"025",borderColor:"border",background:"bg-surface-tertiary"},s.createElement(Ua,{columns:{xs:"1fr auto"},gap:"400"},s.createElement(B,{gap:"400",blockAlign:"center"},s.createElement(F,{id:e,as:"h2",variant:"headingMd",breakWord:!0},t)),s.createElement(cn,{pressed:i,onClick:r})))}function mr({primaryAction:e,secondaryActions:t,children:i}){const n=e&&Zt(e,{variant:"primary"})||null,r=t&&Zt(t)||null,l=n||r?s.createElement(B,{gap:"200"},r,n):null;return s.createElement(B,{gap:"400",blockAlign:"center"},s.createElement(K,{borderColor:"border",borderBlockStartWidth:"025",padding:"400",width:"100%"},s.createElement(B,{gap:"400",blockAlign:"center",align:"space-between"},s.createElement(K,null,i),l)))}const dn=200,gr=400,Ht=function({children:t,title:i,titleHidden:n=!1,src:r,iFrameName:l,open:p,instant:u,sectioned:d,loading:h,size:v,limitHeight:b,footer:T,primaryAction:y,secondaryActions:M,onScrolledToBottom:H,activator:S,activatorWrapper:A="div",onClose:k,onIFrameLoad:R,onTransitionEnd:ee,noScroll:J}){const[W,X]=o.useState(dn),[_,he]=o.useState(!1),D=o.useId(),z=o.useRef(null),le=Ne().translate("Polaris.Modal.iFrameTitle");let ie,I;const te=o.useCallback(()=>{ee&&ee()},[ee]),$=o.useCallback(()=>{X(dn);const ne=S&&un(S)?S&&S.current:z.current;ne&&requestAnimationFrame(()=>bt(ne))},[S]),V=o.useCallback(ne=>{const O=ne.target;if(O&&O.contentWindow)try{X(O.contentWindow.document.body.scrollHeight)}catch{X(gr)}R!=null&&R(ne)},[R]);if(p){const ne=!T&&!y&&!M?null:s.createElement(mr,{primaryAction:y,secondaryActions:M},T),O=d?gn(t,Tn,{titleHidden:n}):t,fe=h?s.createElement(K,{padding:"400"},s.createElement(B,{gap:"400",align:"center",blockAlign:"center"},s.createElement(Wt,null))):O,Be=J?s.createElement("div",{className:At.NoScrollBody},s.createElement(K,{width:"100%",overflowX:"hidden",overflowY:"hidden"},fe)):s.createElement(Ea,{shadow:!0,className:At.Body,onScrolledToBottom:H},fe),Te=r?s.createElement("iframe",{name:l,title:le,src:r,className:At.IFrame,onLoad:V,style:{height:`${W}px`}}):Be;ie=s.createElement(ur,{instant:u,labelledBy:D,onClose:k,onEntered:te,onExited:$,size:v,limitHeight:b,setClosing:he},s.createElement(fr,{titleHidden:n,id:D,closing:_,onClose:k},i),Te,ne),I=s.createElement(Na,{setClosing:he,onClick:k})}const G=!u,Le=S&&!un(S)?s.createElement(K,{ref:z,as:A},S):null;return s.createElement(xa.Provider,{value:!0},Le,s.createElement(Sa,{idPrefix:"modal"},s.createElement(Ut,{appear:G,enter:G,exit:G},ie),I))};function un(e){return Object.prototype.hasOwnProperty.call(e,"current")}Ht.Section=Tn;var g={IndexTable:"Polaris-IndexTable",IndexTableWrapper:"Polaris-IndexTable__IndexTableWrapper","IndexTableWrapper-scrollBarHidden":"Polaris-IndexTable__IndexTableWrapper--scrollBarHidden",IndexTableWrapperWithSelectAllActions:"Polaris-IndexTable__IndexTableWrapperWithSelectAllActions",LoadingPanel:"Polaris-IndexTable__LoadingPanel",LoadingPanelEntered:"Polaris-IndexTable__LoadingPanelEntered",LoadingPanelRow:"Polaris-IndexTable__LoadingPanelRow",LoadingPanelText:"Polaris-IndexTable__LoadingPanelText",Table:"Polaris-IndexTable__Table","Table-scrolling":"Polaris-IndexTable__Table--scrolling","TableCell-first":"Polaris-IndexTable__TableCell--first","StickyTable-scrolling":"Polaris-IndexTable__StickyTable--scrolling",TableCell:"Polaris-IndexTable__TableCell","TableHeading-first":"Polaris-IndexTable__TableHeading--first","TableHeading-second":"Polaris-IndexTable__TableHeading--second","Table-sticky":"Polaris-IndexTable__Table--sticky",StickyTable:"Polaris-IndexTable__StickyTable","Table-unselectable":"Polaris-IndexTable__Table--unselectable",TableRow:"Polaris-IndexTable__TableRow","TableRow-unclickable":"Polaris-IndexTable__TableRow--unclickable",toneSuccess:"Polaris-IndexTable--toneSuccess","TableRow-child":"Polaris-IndexTable__TableRow--child",toneWarning:"Polaris-IndexTable--toneWarning",toneCritical:"Polaris-IndexTable--toneCritical",toneSubdued:"Polaris-IndexTable--toneSubdued","TableRow-subheader":"Polaris-IndexTable__TableRow--subheader","TableRow-selected":"Polaris-IndexTable__TableRow--selected","TableRow-hovered":"Polaris-IndexTable__TableRow--hovered","TableRow-disabled":"Polaris-IndexTable__TableRow--disabled",ZebraStriping:"Polaris-IndexTable__ZebraStriping",TableHeading:"Polaris-IndexTable__TableHeading","TableHeading-flush":"Polaris-IndexTable__TableHeading--flush","TableHeading-align-center":"Polaris-IndexTable--tableHeadingAlignCenter","TableHeading-align-end":"Polaris-IndexTable--tableHeadingAlignEnd","TableHeading-extra-padding-right":"Polaris-IndexTable--tableHeadingExtraPaddingRight","TableHeading-sortable":"Polaris-IndexTable__TableHeading--sortable",TableHeadingSortButton:"Polaris-IndexTable__TableHeadingSortButton",TableHeadingSortIcon:"Polaris-IndexTable__TableHeadingSortIcon","TableHeadingSortButton-heading-align-end":"Polaris-IndexTable--tableHeadingSortButtonHeadingAlignEnd","TableHeadingSortButton-heading-align-end-currently-sorted":"Polaris-IndexTable--tableHeadingSortButtonHeadingAlignEndCurrentlySorted","TableHeadingSortIcon-heading-align-end":"Polaris-IndexTable--tableHeadingSortIconHeadingAlignEnd","TableHeadingSortButton-heading-align-end-previously-sorted":"Polaris-IndexTable--tableHeadingSortButtonHeadingAlignEndPreviouslySorted","right-aligned-sort-button-slide-out":"Polaris-IndexTable--rightAlignedSortButtonSlideOut","reveal-right-aligned-sort-button-icon":"Polaris-IndexTable--revealRightAlignedSortButtonIcon",TableHeadingUnderline:"Polaris-IndexTable__TableHeadingUnderline",TableHeadingTooltipUnderlinePlaceholder:"Polaris-IndexTable__TableHeadingTooltipUnderlinePlaceholder","TableHeadingSortIcon-visible":"Polaris-IndexTable__TableHeadingSortIcon--visible",TableHeadingSortSvg:"Polaris-IndexTable__TableHeadingSortSvg",SortableTableHeadingWithCustomMarkup:"Polaris-IndexTable__SortableTableHeadingWithCustomMarkup",SortableTableHeaderWrapper:"Polaris-IndexTable__SortableTableHeaderWrapper",ColumnHeaderCheckboxWrapper:"Polaris-IndexTable__ColumnHeaderCheckboxWrapper",FirstStickyHeaderElement:"Polaris-IndexTable__FirstStickyHeaderElement","TableHeading-unselectable":"Polaris-IndexTable__TableHeading--unselectable","TableCell-flush":"Polaris-IndexTable__TableCell--flush","Table-sticky-scrolling":"Polaris-IndexTable--tableStickyScrolling","StickyTableHeader-sticky-scrolling":"Polaris-IndexTable--stickyTableHeaderStickyScrolling","TableHeading-last":"Polaris-IndexTable__TableHeading--last","Table-sticky-last":"Polaris-IndexTable--tableStickyLast","StickyTableHeader-sticky-last":"Polaris-IndexTable--stickyTableHeaderStickyLast","Table-sortable":"Polaris-IndexTable__Table--sortable",StickyTableHeader:"Polaris-IndexTable__StickyTableHeader","StickyTableHeader-isSticky":"Polaris-IndexTable__StickyTableHeader--isSticky",StickyTableHeadings:"Polaris-IndexTable__StickyTableHeadings","StickyTableHeading-second":"Polaris-IndexTable__StickyTableHeading--second",unselectable:"Polaris-IndexTable--unselectable","StickyTableHeading-second-scrolling":"Polaris-IndexTable--stickyTableHeadingSecondScrolling",ScrollLeft:"Polaris-IndexTable__ScrollLeft",ScrollRight:"Polaris-IndexTable__ScrollRight","ScrollRight-onboarding":"Polaris-IndexTable__ScrollRight--onboarding",SelectAllActionsWrapper:"Polaris-IndexTable__SelectAllActionsWrapper",SelectAllActionsWrapperWithPagination:"Polaris-IndexTable__SelectAllActionsWrapperWithPagination",SelectAllActionsWrapperSticky:"Polaris-IndexTable__SelectAllActionsWrapperSticky",SelectAllActionsWrapperAtEnd:"Polaris-IndexTable__SelectAllActionsWrapperAtEnd",SelectAllActionsWrapperAtEndAppear:"Polaris-IndexTable__SelectAllActionsWrapperAtEndAppear",BulkActionsWrapper:"Polaris-IndexTable__BulkActionsWrapper",BulkActionsWrapperVisible:"Polaris-IndexTable__BulkActionsWrapperVisible",PaginationWrapper:"Polaris-IndexTable__PaginationWrapper",PaginationWrapperScrolledPastTop:"Polaris-IndexTable__PaginationWrapperScrolledPastTop",ScrollBarContainer:"Polaris-IndexTable__ScrollBarContainer",ScrollBarContainerWithPagination:"Polaris-IndexTable__ScrollBarContainerWithPagination",ScrollBarContainerScrolledPastTop:"Polaris-IndexTable__ScrollBarContainerScrolledPastTop",ScrollBarContainerWithSelectAllActions:"Polaris-IndexTable__ScrollBarContainerWithSelectAllActions",ScrollBarContainerSelectAllActionsSticky:"Polaris-IndexTable__ScrollBarContainerSelectAllActionsSticky",scrollBarContainerCondensed:"Polaris-IndexTable--scrollBarContainerCondensed",scrollBarContainerHidden:"Polaris-IndexTable--scrollBarContainerHidden",ScrollBar:"Polaris-IndexTable__ScrollBar",disableTextSelection:"Polaris-IndexTable--disableTextSelection",EmptySearchResultWrapper:"Polaris-IndexTable__EmptySearchResultWrapper",condensedRow:"Polaris-IndexTable--condensedRow",CondensedList:"Polaris-IndexTable__CondensedList",HeaderWrapper:"Polaris-IndexTable__HeaderWrapper","StickyTable-condensed":"Polaris-IndexTable__StickyTable--condensed","StickyTableHeader-condensed":"Polaris-IndexTable__StickyTableHeader--condensed",ScrollBarContent:"Polaris-IndexTable__ScrollBarContent"};const _e="All";let Q=(function(e){return e.All="all",e.Page="page",e.Multi="multi",e.Single="single",e.Range="range",e})({});const yn=o.createContext(void 0),kn=o.createContext(void 0),Cn=o.createContext(void 0);function Pn(){const e=o.useContext(kn);if(!e)throw new Error("Missing IndexProvider context");return e}function br(){const e=o.useContext(Cn);if(!e)throw new Error("Missing IndexProvider context");return e}function jn(){const e=o.useContext(yn);if(!e)throw new Error("Missing IndexProvider context");return e}function xr({selectedItemsCount:e,itemCount:t,hasMoreItems:i,resourceName:n,defaultPaginatedSelectAllText:r}){const l=Ne(),p=!!e,u=e==="All"||e>0,d={singular:l.translate("Polaris.IndexProvider.defaultItemSingular"),plural:l.translate("Polaris.IndexProvider.defaultItemPlural")},h=n||d,v=M(),b=H(),T=S();let y="indeterminate";return!e||e===0?y=void 0:(e===_e||e===t)&&(y=!0),{paginatedSelectAllText:v,bulkActionsLabel:b,bulkActionsAccessibilityLabel:T,resourceName:h,selectMode:u,bulkSelectState:y,selectable:p};function M(){if(!(!p||!i)&&e===_e)return r||l.translate("Polaris.IndexProvider.allItemsSelected",{itemsLength:t,resourceNamePlural:h.plural.toLocaleLowerCase()})}function H(){const A=e===_e?`${t}+`:e;return l.translate("Polaris.IndexProvider.selected",{selectedItemsCount:A})}function S(){const A=t,k=e===A;return A===1&&k?l.translate("Polaris.IndexProvider.a11yCheckboxDeselectAllSingle",{resourceNameSingular:h.singular}):A===1?l.translate("Polaris.IndexProvider.a11yCheckboxSelectAllSingle",{resourceNameSingular:h.singular}):k?l.translate("Polaris.IndexProvider.a11yCheckboxDeselectAllMultiple",{itemsLength:t,resourceNamePlural:h.plural}):l.translate("Polaris.IndexProvider.a11yCheckboxSelectAllMultiple",{itemsLength:t,resourceNamePlural:h.plural})}}function Sr({onSelectionChange:e=()=>{}}){const t=o.useRef(null);return o.useCallback((n,r,l,p)=>{const u=t.current;if(Q.Multi&&typeof p=="number"&&(t.current=p),n===Q.Single||n===Q.Multi&&(typeof u!="number"||typeof p!="number"))e(Q.Single,r,l);else if(n===Q.Multi){const d=Math.min(u,p),h=Math.max(u,p);e(n,r,[d,h])}else n===Q.Page||n===Q.All?e(n,r):n===Q.Range&&e(Q.Range,r,l)},[e])}function Er({children:e,resourceName:t,loading:i,onSelectionChange:n,selectedItemsCount:r=0,itemCount:l,hasMoreItems:p,condensed:u,selectable:d=!0,paginatedSelectAllText:h}){const{paginatedSelectAllText:v,bulkActionsLabel:b,bulkActionsAccessibilityLabel:T,resourceName:y,selectMode:M,bulkSelectState:H}=xr({selectedItemsCount:r,itemCount:l,hasMoreItems:p,resourceName:t,defaultPaginatedSelectAllText:h}),S=Sr({onSelectionChange:n}),A=o.useMemo(()=>({itemCount:l,selectMode:M&&d,selectable:d,resourceName:y,loading:i,paginatedSelectAllText:v,hasMoreItems:p,bulkActionsLabel:b,bulkActionsAccessibilityLabel:T,bulkSelectState:H,selectedItemsCount:r,condensed:u}),[l,M,d,y,i,v,p,b,T,H,r,u]),k=o.useMemo(()=>({selectable:d,selectMode:M&&d,condensed:u}),[u,M,d]);return s.createElement(yn.Provider,{value:A},s.createElement(Cn.Provider,{value:k},s.createElement(kn.Provider,{value:S},e)))}const Vt=o.createContext({}),vr=o.createContext(void 0),An={scrollableContainer:null,canScrollLeft:!1,canScrollRight:!1},Tr=o.createContext(An),In=o.memo(function({children:t,className:i,flush:n,colSpan:r,headers:l,scope:p,as:u="td",id:d}){const h=C(i,g.TableCell,n&&g["TableCell-flush"]);return s.createElement(u,{id:d,colSpan:r,headers:l,scope:p,className:h},t)});var yr={Wrapper:"Polaris-IndexTable-Checkbox__Wrapper"};const kr=o.memo(function({accessibilityLabel:t}){const i=Ne(),{resourceName:n}=jn(),{itemId:r,selected:l,disabled:p,onInteraction:u}=o.useContext(Vt),d=t||i.translate("Polaris.IndexTable.selectItem",{resourceName:n.singular});return s.createElement(Cr,null,s.createElement("div",{className:yr.Wrapper,onClick:u,onKeyUp:Pr},s.createElement(rt,{id:`Select-${r}`,label:d,labelHidden:!0,checked:l,disabled:p})))});function Cr({children:e}){const{position:t}=o.useContext(Vt),i=o.useRef(null),n=o.useCallback(at(()=>{if(t!==0||!i.current)return;const{width:l}=i.current.getBoundingClientRect();or("--pc-checkbox-offset",`${l}px`)}),[t]);o.useEffect(()=>{n()},[n]),o.useEffect(()=>{if(i.current)return window.addEventListener("resize",n),()=>{window.removeEventListener("resize",n)}},[n]);const r=C(g.TableCell,g["TableCell-first"]);return s.createElement("td",{className:r,ref:i},e)}function Pr(){}const jr=o.memo(function({children:t,hideSelectable:i,selected:n,id:r,position:l,tone:p,disabled:u,selectionRange:d,rowType:h="data",accessibilityLabel:v,onNavigation:b,onClick:T}){const{selectable:y,selectMode:M,condensed:H}=br(),S=y&&!i,A=Pn(),{value:k,setTrue:R,setFalse:ee}=Rt(!1),J=o.useCallback(I=>{I.stopPropagation();let te=Q.Single;if(u||!S||"key"in I&&I.key!==" "||!A)return;I.nativeEvent.shiftKey?te=Q.Multi:d&&(te=Q.Range),A(te,!n,d??r,l)},[r,A,n,d,l,u,S]),W=o.useMemo(()=>({itemId:r,selected:n,position:l,onInteraction:J,disabled:u}),[r,n,u,l,J]),X=o.useRef(null),_=o.useRef(!1),he=o.useRef(null),D=o.useCallback(I=>{he.current=I;const te=I==null?void 0:I.querySelector("[data-primary-link]");te&&(X.current=te)},[]),z=C(g.TableRow,h==="subheader"&&g["TableRow-subheader"],h==="child"&&g["TableRow-child"],S&&H&&g.condensedRow,n&&g["TableRow-selected"],k&&!H&&g["TableRow-hovered"],u&&g["TableRow-disabled"],p&&g[nt("tone",p)],!S&&!T&&!X.current&&g["TableRow-unclickable"]);let U;(!u&&S||T||X.current)&&(U=I=>{if(h!=="subheader"&&!(!he.current||_.current)){if(I.stopPropagation(),I.preventDefault(),T){T();return}if(X.current&&!M){_.current=!0;const{ctrlKey:te,metaKey:$}=I.nativeEvent;if(b&&b(r),(te||$)&&X.current instanceof HTMLAnchorElement){_.current=!1,window.open(X.current.href,"_blank");return}X.current.dispatchEvent(new MouseEvent(I.type,I.nativeEvent))}else _.current=!1,J(I)}});const le=H?"li":"tr",ie=i?s.createElement(In,null):s.createElement(kr,{accessibilityLabel:v});return s.createElement(Vt.Provider,{value:W},s.createElement(vr.Provider,{value:k},s.createElement(le,{key:r,id:r,className:z,onMouseEnter:R,onMouseLeave:ee,onClick:U,ref:D},y?ie:null,t)))});function pn(e,t){return e?Array.from(e.querySelectorAll(t)):[]}var Ar={ScrollContainer:"Polaris-IndexTable-ScrollContainer"};function Ir({children:e,scrollableContainerRef:t,onScroll:i}){o.useEffect(()=>{t.current&&t.current.dispatchEvent(new Event("scroll"))},[t]);const[n,r]=o.useState(An),l=o.useCallback(at(()=>{if(!t.current)return;const p=t.current.scrollWidth-t.current.offsetWidth,u=t.current.scrollLeft>0,d=t.current.scrollLeft<p;i(u,d),r({scrollableContainer:t.current,canScrollLeft:u,canScrollRight:d})},40,{trailing:!0,leading:!0,maxWait:40}),[i,t]);return s.createElement(Tr.Provider,{value:n},s.createElement("div",{className:Ar.ScrollContainer,ref:t,onScroll:l},e))}const wr=16,_r=300;function Nr({headings:e,bulkActions:t=[],promotedBulkActions:i=[],children:n,emptyState:r,sort:l,paginatedSelectAllActionText:p,lastColumnSticky:u=!1,sortable:d,sortDirection:h,defaultSortDirection:v="descending",sortColumnIndex:b,onSort:T,sortToggleLabels:y,hasZebraStriping:M,pagination:H,...S}){const{loading:A,bulkSelectState:k,resourceName:R,bulkActionsAccessibilityLabel:ee,selectMode:J,selectable:W=S.selectable,paginatedSelectAllText:X,itemCount:_,hasMoreItems:he,selectedItemsCount:D,condensed:z}=jn(),U=Pn(),le=Ne(),{value:ie,toggle:I}=Rt(!1),te=o.useRef({top:0,left:0}),$=o.useRef([]),V=o.useRef(null),G=o.useRef(null),Le=o.useRef(null),ne=o.useRef(null),[O,fe]=o.useState(!1),[Be,Te]=o.useState(null),[w,j]=o.useState(!0),N=o.useRef([]),q=o.useRef([]),me=o.useRef(null),Pe=o.useRef(null),Oe=o.useRef(null),se=o.useRef(null),lt=o.useRef(null),je=o.useRef(!1),Xe=o.useRef(!1),it=o.useRef(b),qe=o.useRef(!1),Ze=o.useRef(0),ze=o.useRef(!1);D!==Ze.current&&(qe.current=!0,Ze.current=D),!ze.current&&D!==0&&(ze.current=!0);const xt=o.useCallback(x=>{x!==null&&!O&&fe(!0),Le.current=x},[O]),St=o.useCallback(()=>{U(D===_e?Q.Page:Q.All,!0)},[U,D]),$e=o.useMemo(()=>at(()=>{var P,ae;if(!G.current||!V.current)return;const x=V.current.getBoundingClientRect();te.current={top:x.top,left:x.left},$.current=N.current.map(ce=>({offsetWidth:ce.offsetWidth||0,offsetLeft:ce.offsetLeft||0})),N.current.length!==0&&(W&&N.current.length>1&&(N.current[1].style.left=`${$.current[0].offsetWidth}px`,(P=q.current)!=null&&P.length&&(q.current[1].style.left=`${$.current[0].offsetWidth}px`)),(ae=q.current)!=null&&ae.length&&q.current.forEach((ce,Se)=>{var ye;ce.style.minWidth=`${((ye=$.current[Se])==null?void 0:ye.offsetWidth)||0}px`}))}),[W]),Ae=o.useCallback(()=>{var x,P;se.current&&G.current&&O&&(se.current.style.setProperty("--pc-index-table-scroll-bar-content-width",`${G.current.offsetWidth-wr}px`),j(((x=lt.current)==null?void 0:x.offsetWidth)===((P=G.current)==null?void 0:P.offsetWidth)))},[O]),Ye=o.useCallback(at(Ae,_r,{trailing:!0}),[Ae]),[c,m]=o.useState(!0),f=o.useCallback(at(()=>{if(!u||!G.current||!V.current)return;const x=G.current.getBoundingClientRect(),P=V.current.getBoundingClientRect();m(x.width>P.width)}),[u]);o.useEffect(()=>{f()},[f]);const[E,L]=o.useState(!0),de=o.useCallback(()=>{if(!V.current||!N.current.length)return;const x=V.current.getBoundingClientRect(),P=W?N.current[0].getBoundingClientRect().width:0,ae=N.current[W?1:0].getBoundingClientRect().width,ce=W?N.current.length>2:1,Se=u&&ce?N.current[N.current.length-1].getBoundingClientRect().width:0;L(x.width>ae+P+Se+100)},[u,W]);o.useEffect(()=>{O&&de()},[de,O]);const ue=o.useCallback(()=>{var x;(x=se.current)==null||x.style.setProperty("--pc-index-table-scroll-bar-content-width","0px"),$e(),Ye(),f(),de()},[$e,Ye,f,de]),Ie=o.useCallback((x,P)=>{!V.current||!se.current||(je.current||(Xe.current=!0,se.current.scrollLeft=V.current.scrollLeft),je.current=!1,Oe.current&&(Oe.current.scrollLeft=V.current.scrollLeft),(x&&!ie||!x&&ie)&&I(),m(P))},[ie,I]),st=o.useCallback(()=>{!V.current||!se.current||(Xe.current||(je.current=!0,V.current.scrollLeft=se.current.scrollLeft),Xe.current=!1)},[]);Ca(()=>{N.current=pn(G.current,"[data-index-table-heading]"),q.current=pn(me.current,"[data-index-table-sticky-heading]"),$e()},[e,$e,Pe,O]),o.useEffect(()=>{Ae(),Te(z?ne.current:G.current)},[O,Ae,z]);const oe=e.map((x,P)=>Kt(x,P,"th",{"data-index-table-heading":!0},x.id)),Qe=e.map((x,P)=>Kt(x,P,"div",{"data-index-table-sticky-heading":!0})),[Ue,wn]=o.useState(D===_e?`${_}+`:D);o.useEffect(()=>{(D===_e||D>0)&&wn(D===_e?`${_}+`:D)},[D,_]);const _n=le.translate("Polaris.IndexTable.selected",{selectedItemsCount:Ue}),Nn=o.useCallback(()=>{U(Q.Page,!k||k==="indeterminate")},[k,U]),Ln=Yn(),Et=s.createElement("div",{className:C(g.LoadingPanel,A&&g.LoadingPanelEntered)},s.createElement("div",{className:g.LoadingPanelRow},s.createElement(Wt,{size:"small"}),s.createElement("span",{className:g.LoadingPanelText},le.translate("Polaris.IndexTable.resourceLoadingAccessibilityLabel",{resourceNamePlural:R.plural.toLocaleLowerCase()})))),Bn=C(g.StickyTable,ie&&g["StickyTable-scrolling"],z&&g["StickyTable-condensed"]),vt=!z||D,Mn=vt?i:[],Hn=vt?t:[],Rn=s.createElement("div",{className:Bn,role:"presentation"},s.createElement(Pa,{boundingElement:Be},x=>{const P=C(g.StickyTableHeader,x&&g["StickyTableHeader-isSticky"],E&&g["StickyTableHeader-sticky"],ie&&g["StickyTableHeader-scrolling"],E&&u&&g["StickyTableHeader-sticky-last"],E&&u&&c&&g["StickyTableHeader-sticky-scrolling"]),ae=C(g.BulkActionsWrapper,J&&g.BulkActionsWrapperVisible,z&&g["StickyTableHeader-condensed"],x&&g["StickyTableHeader-isSticky"]),ce=vt&&!z?s.createElement("div",{className:ae},s.createElement(za,{selectMode:J,onToggleAll:Nn,paginatedSelectAllText:X,paginatedSelectAllAction:Ln,accessibilityLabel:ee,selected:k,promotedActions:Mn,actions:Hn,onSelectModeToggle:z?Qn:void 0,label:_n,buttonSize:"micro"})):null,Se=z?s.createElement("div",{className:C(g.HeaderWrapper,(!W||z)&&g.unselectable)},Et,l):s.createElement("div",{className:P,ref:me},Et,s.createElement("div",{className:g.StickyTableHeadings,ref:Oe},Qe));return s.createElement(s.Fragment,null,Se,ce)})),Wn=C(g.ScrollBarContainer,H&&g.ScrollBarContainerWithPagination,z&&g.scrollBarContainerCondensed,w&&g.scrollBarContainerHidden),Dn=C(G.current&&O&&g.ScrollBarContent),Fn=_>0?s.createElement(ja,{onMount:Ae},s.createElement("div",{className:Wn,ref:lt},s.createElement("div",{onScroll:st,className:g.ScrollBar,ref:se},s.createElement("div",{className:Dn})))):null,On=d==null?void 0:d.some(x=>x),zn=C(g.Table,ie&&g["Table-scrolling"],J&&g.disableTextSelection,!W&&g["Table-unselectable"],E&&g["Table-sticky"],On&&g["Table-sortable"],E&&u&&g["Table-sticky-last"],E&&u&&c&&g["Table-sticky-scrolling"],M&&g.ZebraStriping),$n=r||s.createElement(Xa,{title:le.translate("Polaris.IndexTable.emptySearchTitle",{resourceNamePlural:R.plural}),description:le.translate("Polaris.IndexTable.emptySearchDescription"),withIllustration:!0}),Gt=s.createElement(s.Fragment,null,s.createElement(xn,{event:"resize",handler:ue}),Rn),Un=C(g.CondensedList,M&&g.ZebraStriping),Vn=z?s.createElement(s.Fragment,null,Gt,s.createElement("ul",{"data-selectmode":!!J,className:Un,ref:ne},n)):s.createElement(s.Fragment,null,Gt,s.createElement(Ir,{scrollableContainerRef:V,onScroll:Ie},s.createElement("table",{ref:G,className:zn},s.createElement("thead",null,s.createElement("tr",{className:g.HeadingRow},oe)),s.createElement("tbody",{ref:xt},n)))),Gn=_>0?Vn:s.createElement("div",{className:g.EmptySearchResultWrapper},$n),Kn=H?s.createElement("div",{className:g.PaginationWrapper},s.createElement(va,Object.assign({type:"table"},H))):null;return s.createElement(s.Fragment,null,s.createElement("div",{className:g.IndexTable},s.createElement("div",{className:g.IndexTableWrapper},!z&&Et,Gn,Fn,Kn)));function Kt(x,P,ae,ce,Se){const ye=P===0,Ve=P===e.length-1,ke=d==null?void 0:d.some(dt=>dt===!0),ot=x.alignment||"start",Tt=C(g.TableHeading,ot==="center"&&g["TableHeading-align-center"],ot==="end"&&g["TableHeading-align-end"],ke&&g["TableHeading-sortable"],ye&&g["TableHeading-second"],Ve&&!x.hidden&&g["TableHeading-last"],!W&&g["TableHeading-unselectable"],x.flush&&g["TableHeading-flush"]),yt=W!==!1&&ye&&$.current&&$.current.length>0?{left:$.current[0].offsetWidth}:void 0,Me=s.createElement(ae,Object.assign({id:Se,className:Tt,key:Lr(x),style:yt},ce),qn(x,P));if(P!==0||!W)return Me;const ct=C(g.TableHeading,ke&&g["TableHeading-sortable"],P===0&&g["TableHeading-first"]);return[s.createElement(ae,Object.assign({className:ct,key:`${x}-${P}`},ce),Jn()),Me]}function Jn(){return s.createElement("div",{className:g.ColumnHeaderCheckboxWrapper},s.createElement(rt,{label:le.translate("Polaris.IndexTable.selectAllLabel",{resourceNamePlural:R.plural}),labelHidden:!0,onChange:Zn,checked:k}))}function Xn(x,P){qe.current=!1,ze.current=!1,it.current=b,T==null||T(x,P)}function qn(x,P){let ae;const ce={width:x.tooltipWidth??"default",activatorWrapper:"div",dismissOnMouseOut:!0,persistOnClick:x.tooltipPersistsOnClick},Se={...ce,padding:"400",borderRadius:"200",content:x.tooltipContent,preferredPosition:"above"},ye=s.createElement(F,{as:"span",variant:"bodySm",fontWeight:"medium",visuallyHidden:x.hidden},x.title);x.new?ae=s.createElement(Dt,{wrap:!1,alignment:"center"},ye,s.createElement(Z,{tone:"new"},le.translate("Polaris.IndexTable.onboardingBadgeText"))):ae=ye;const Ve={"--pc-index-table-heading-extra-padding-right":x.paddingBlockEnd?`var(--p-space-${x.paddingBlockEnd})`:"0"};if(d!=null&&d[P]){const ke=P===b,ot=!ke&&P===it.current,Tt=qe.current||!ze.current&&D!==0,yt=h==="ascending";let Me=x.defaultSortDirection??v,ct=Me==="ascending"?Qt:en;ke&&(Me=yt?"descending":"ascending",ct=h==="ascending"?Qt:en);const kt=s.createElement("span",{className:C(g.TableHeadingSortIcon,(x==null?void 0:x.alignment)==="end"&&g["TableHeadingSortIcon-heading-align-end"],ke&&g["TableHeadingSortIcon-visible"])},s.createElement(ct,{focusable:"false","aria-hidden":"true",className:g.TableHeadingSortSvg})),dt={onClick:()=>Xn(P,Me),className:C(g.TableHeadingSortButton,!ke&&(x==null?void 0:x.alignment)==="end"&&g["TableHeadingSortButton-heading-align-end"],ke&&(x==null?void 0:x.alignment)==="end"&&g["TableHeadingSortButton-heading-align-end-currently-sorted"],ot&&!Tt&&(x==null?void 0:x.alignment)==="end"&&g["TableHeadingSortButton-heading-align-end-previously-sorted"]),tabIndex:J?-1:0},Jt=s.createElement(wt,dt,kt,s.createElement("span",{className:C(y&&J&&x.tooltipContent&&g.TableHeadingTooltipUnderlinePlaceholder)},ae));if(!y||J)return s.createElement("div",{className:g.SortableTableHeadingWithCustomMarkup},Jt);const ea=ke?h:Me,Xt=y[P][ea];if(!x.tooltipContent)return s.createElement("div",{style:Ve,className:C(x.paddingBlockEnd&&g["TableHeading-extra-padding-right"])},s.createElement(We,Object.assign({},ce,{content:Xt,preferredPosition:"above"}),Jt));if(x.tooltipContent)return s.createElement("div",{className:C(g.SortableTableHeadingWithCustomMarkup,x.paddingBlockEnd&&g["TableHeading-extra-padding-right"]),style:Ve},s.createElement(wt,dt,s.createElement(We,Se,s.createElement("span",{className:g.TableHeadingUnderline},ae)),s.createElement(We,Object.assign({},ce,{content:Xt,preferredPosition:"above"}),kt)))}return x.tooltipContent?s.createElement("div",{style:Ve,className:C(x.paddingBlockEnd&&g["TableHeading-extra-padding-right"])},s.createElement(We,Object.assign({},Se,{activatorWrapper:"span"}),s.createElement("span",{className:C(g.TableHeadingUnderline,g.SortableTableHeaderWrapper)},ae))):s.createElement("div",{style:Ve,className:C(x.paddingBlockEnd&&g["TableHeading-extra-padding-right"])},ae)}function Zn(x){U(Q.Page,x)}function Yn(){if(!W||!he)return;const x=p??le.translate("Polaris.IndexTable.selectAllItems",{itemsLength:_,resourceNamePlural:R.plural.toLocaleLowerCase()});return{content:D===_e?le.translate("Polaris.IndexTable.undo"):x,onAction:St}}function Qn(){U(Q.All,!1)}}function Lr(e){return e.id?e.id:typeof e.title=="string"?e.title:""}function re({children:e,selectable:t=!0,itemCount:i,selectedItemsCount:n=0,resourceName:r,loading:l,hasMoreItems:p,condensed:u,onSelectionChange:d,paginatedSelectAllText:h,...v}){return s.createElement(s.Fragment,null,s.createElement(Er,{selectable:t&&!u,itemCount:i,selectedItemsCount:n,resourceName:r,loading:l,hasMoreItems:p,condensed:u,onSelectionChange:d,paginatedSelectAllText:h},s.createElement(Nr,v,e)))}re.Cell=In;re.Row=jr;const gt=class gt{static set(t,i,n=gt.DEFAULT_TTL){if(typeof window>"u")return;const r={data:i,timestamp:Date.now(),expiresAt:Date.now()+n};try{sessionStorage.setItem(t,JSON.stringify(r))}catch(l){console.warn("キャッシュ保存に失敗（Shopify認証影響なし）:",l)}}static get(t){if(typeof window>"u")return null;try{const i=sessionStorage.getItem(t);if(!i)return null;const n=JSON.parse(i);return Date.now()>n.expiresAt?(sessionStorage.removeItem(t),null):n.data}catch(i){return console.warn("キャッシュ取得に失敗:",i),sessionStorage.removeItem(t),null}}static clear(t){typeof window>"u"||sessionStorage.removeItem(t)}static clearAll(){typeof window>"u"||sessionStorage.clear()}static isExpired(t){if(typeof window>"u")return!0;try{const i=sessionStorage.getItem(t);if(!i)return!0;const n=JSON.parse(i);return Date.now()>n.expiresAt}catch{return!0}}static getInfo(t){if(typeof window>"u")return null;try{const i=sessionStorage.getItem(t);if(!i)return null;const n=JSON.parse(i);return{timestamp:n.timestamp,expiresAt:n.expiresAt}}catch{return null}}};qt(gt,"DEFAULT_TTL",300*1e3);let Fe=gt;const tt={PRODUCTS:"shopify_products_cache"};function Br({productId:e,onOptimistic:t,scheduleRevalidate:i}){const n=It(),r=n.state!=="idle";return o.useEffect(()=>{var l;n.state==="idle"&&((l=n.data)!=null&&l.success)&&(i==null||i())},[n.state,n.data,i]),a.jsxs(n.Form,{method:"post",replace:!0,children:[a.jsx("input",{type:"hidden",name:"action",value:"unselectProducts"}),a.jsx("input",{type:"hidden",name:"productId",value:e}),a.jsx(Ee,{size:"micro",variant:"tertiary",tone:"critical",loading:r,disabled:r,onClick:l=>{l.preventDefault(),t==null||t(e);const p=new FormData(l.currentTarget.form);n.submit(p,{method:"post"})},children:"解除"})]})}function Mr(e,t,i="all"){let n=e;return i==="k18"&&(n=e.filter(r=>r.title.includes("K18")||r.title.includes("18金"))),t&&(n=n.filter(r=>r.title.toLowerCase().includes(t.toLowerCase())||r.handle.toLowerCase().includes(t.toLowerCase()))),n}function Hr(e,t,i=.93){const n=e*(1+t),r=e*i,l=Math.max(n,r);return Math.ceil(l/10)*10}function Rr({products:e,collections:t,goldPrice:i,platinumPrice:n,selectedProductIds:r,savedSelectedProducts:l,selectedCollectionIds:p,savedSelectedCollections:u,shopSetting:d,forceRefresh:h,cacheTimestamp:v}){var Ae,Ye;const b=It(),T=It(),y=la(),M=o.useMemo(()=>{const c={};return(l||[]).forEach(m=>{c[m.productId]=m.metalType}),c},[l]),H=o.useMemo(()=>{const c={};return(u||[]).forEach(m=>{c[m.collectionId]=m.metalType}),c},[u]);o.useMemo(()=>new Set((l||[]).map(c=>c.productId)),[l]),o.useMemo(()=>new Set((u||[]).map(c=>c.collectionId)),[u]);const[S,A]=o.useState([]),[k,R]=o.useState({}),[ee,J]=o.useState(""),[W,X]=o.useState("all"),[_,he]=o.useState("products"),[D,z]=o.useState("all"),[U,le]=o.useState((d==null?void 0:d.minPricePct)||93),[ie,I]=o.useState(!1),[te,$]=o.useState([]),[V,G]=o.useState(!1),[Le,ne]=o.useState(null),[O,fe]=o.useState(p||[]),[Be,Te]=o.useState(H||{}),[w,j]=o.useState(()=>new Set((l||[]).map(c=>c.productId))),N=o.useCallback(c=>{j(m=>new Set([...m,...c]))},[]),q=o.useCallback(c=>{j(m=>{const f=new Set(m);return c.forEach(E=>f.delete(E)),f})},[]),me=o.useRef(null),Pe=o.useCallback(()=>{me.current&&clearTimeout(me.current),me.current=setTimeout(()=>{y.revalidate(),me.current=null},500)},[y]);o.useEffect(()=>()=>{me.current&&clearTimeout(me.current)},[]),o.useEffect(()=>{if(!h){const c=Fe.get(tt.PRODUCTS);if(c&&Array.isArray(c)&&c.length>0){G(!0);const m=Fe.getInfo(tt.PRODUCTS);if(m&&ne(new Date(m.timestamp)),r&&r.length>0){const f=c.filter(E=>r.includes(E.id));if(A(f),l&&l.length>0){const E={};l.forEach(L=>{E[L.productId]=L.metalType}),R(E)}}return}}if(e&&e.length>0&&(Fe.set(tt.PRODUCTS,e),G(!1),ne(new Date(v)),r&&r.length>0)){const c=e.filter(m=>r.includes(m.id));if(A(c),l&&l.length>0){const m={};l.forEach(f=>{m[f.productId]=f.metalType}),R(m)}}},[e,r,h,v]),o.useEffect(()=>{if(b.state==="idle"&&b.data){if(b.data.savedProducts){const c=b.data.savedProducts.map(m=>m.productId);A(m=>m.filter(f=>!c.includes(f.id))),N(c)}if(b.data.savedCollection){const{collectionId:c,metalType:m}=b.data.savedCollection;fe(f=>[...f.filter(E=>E!==c),c]),Te(f=>({...f,[c]:m}))}if(b.data.unselectedProducts){const c=new Set(b.data.unselectedProducts);A(m=>m.filter(f=>!c.has(f.id))),R(m=>{const f={...m};return b.data.unselectedProducts.forEach(E=>delete f[E]),f}),q(b.data.unselectedProducts),Pe()}if(b.data.unselectedCollection){const c=b.data.unselectedCollection;fe(m=>m.filter(f=>f!==c)),Te(m=>{const f={...m};return delete f[c],f}),Pe()}}},[b.state,b.data,N,q,Pe]);const Oe=o.useCallback(()=>{Fe.clear(tt.PRODUCTS),G(!1),y.revalidate()},[y]),se=Mr(e,ee,W),lt=o.useCallback((c,m)=>{const f=e.find(E=>E.id===c);m?A(E=>[...E,f]):(A(E=>E.filter(L=>L.id!==c)),R(E=>{const L={...E};return delete L[c],L}))},[e]),je=o.useCallback(c=>{c?A(se):(A([]),R({}))},[se]),Xe=o.useCallback((c,m)=>{R(E=>({...E,[c]:m})),N([c]);const f=new FormData;f.append("action","saveSingleProduct"),f.append("productId",c),f.append("metalType",m),b.submit(f,{method:"post"})},[b,N]),it=o.useCallback((c,m)=>{if(fe(f=>m?[...new Set([...f,c])]:f.filter(E=>E!==c)),!m){const f=new FormData;f.append("action","unselectCollection"),f.append("collectionId",c),b.submit(f,{method:"post"})}},[b]),qe=o.useCallback((c,m)=>{Te(E=>({...E,[c]:m}));const f=new FormData;f.append("action","saveCollectionSelection"),f.append("collectionId",c),f.append("metalType",m),b.submit(f,{method:"post"})},[b]),Ze=o.useCallback(c=>{const m=S.filter(L=>!r.includes(L.id));if(m.length===0)return;const f={};m.forEach(L=>{f[L.id]=c}),R(L=>({...L,...f})),N(m.map(L=>L.id));const E=new FormData;E.append("action","saveSelection"),m.forEach(L=>{E.append("productId",L.id),E.append("metalType",c)}),b.submit(E,{method:"post"})},[S,r,b,N]),ze=o.useCallback(()=>{const c=S.filter(f=>!k[f.id]);if(c.length>0){alert(`以下の商品の金属種別を選択してください：
${c.map(f=>f.title).join(`
`)}`);return}N(S.map(f=>f.id));const m=new FormData;m.append("action","saveSelection"),S.forEach(f=>{m.append("productId",f.id),m.append("metalType",k[f.id])}),b.submit(m,{method:"post"})},[S,k,b,N]);o.useCallback(c=>{A(f=>f.filter(E=>E.id!==c)),R(f=>{const E={...f};return delete E[c],E}),q([c]);const m=new FormData;m.append("action","unselectProducts"),m.append("productId",c),b.submit(m,{method:"post"})},[b,q]);const xt=o.useCallback(()=>{const c=S.filter(f=>w.has(f.id)).map(f=>f.id);if(c.length===0)return;q(c),A(f=>f.filter(E=>!c.includes(E.id))),R(f=>{const E={...f};return c.forEach(L=>delete E[L]),E});const m=new FormData;m.append("action","unselectProducts"),c.forEach(f=>m.append("productId",f)),b.submit(m,{method:"post"})},[S,w,q,b]),St=o.useCallback(()=>{if(S.length===0)return;const c=S.map(m=>{const f=k[m.id]||"gold",E=f==="gold"?i:n;return E?{...m,metalType:f,variants:m.variants.edges.map(L=>{const de=L.node,ue=parseFloat(de.price),Ie=Hr(ue,E.ratio,U/100);return{...de,currentPrice:ue,newPrice:Ie,priceChange:Ie-ue,changed:Ie!==ue}})}:{...m,metalType:f,error:`${f==="gold"?"金":"プラチナ"}価格データが取得できません`,variants:m.variants.edges.map(L=>({...L.node,currentPrice:parseFloat(L.node.price),newPrice:parseFloat(L.node.price),priceChange:0,changed:!1}))}});$(c),I(!0)},[S,i,n,k,U]),$e=o.useCallback(()=>{const c=S.some(E=>(k[E.id]||"gold")==="gold"),m=S.some(E=>k[E.id]==="platinum");if(c&&!i||m&&!n)return;const f=S.map(E=>E.id);T.submit({action:"updatePrices",selectedProductIds:JSON.stringify(f),minPriceRate:U.toString()},{method:"post"}),I(!1)},[S,i,n,k,U,T]);return a.jsx(bn,{fullWidth:!0,title:"商品価格自動調整",subtitle:_==="products"?`${se.length}件の商品（全${e.length}件）`:`${(t==null?void 0:t.length)??0}件のコレクション`,primaryAction:{content:"価格調整プレビュー",onAction:St,disabled:_!=="products"||S.length===0||S.some(c=>(k[c.id]||"gold")==="gold")&&!i||S.some(c=>k[c.id]==="platinum")&&!n,loading:_==="products"&&T.state==="submitting"},secondaryActions:[{content:"商品を再読み込み",icon:ht,onAction:Oe,loading:y.state==="loading"}],children:a.jsxs(xe,{children:[a.jsxs(xe.Section,{children:[a.jsxs(xe,{children:[a.jsxs(xe.Section,{children:[i&&a.jsx(be,{children:a.jsx("div",{style:{padding:"16px",background:"#fbbf24",borderRadius:"8px"},children:a.jsxs(pe,{gap:"300",children:[a.jsxs(B,{align:"space-between",children:[a.jsxs(B,{gap:"200",blockAlign:"center",children:[a.jsx("span",{style:{fontSize:"20px"},children:"🥇"}),a.jsx("h3",{style:{color:"white"},children:"田中貴金属 金価格情報"})]}),a.jsx(Z,{tone:i.changeDirection==="up"?"critical":i.changeDirection==="down"?"success":"info",children:i.changeDirection==="up"?"上昇":i.changeDirection==="down"?"下落":"変動なし"})]}),a.jsxs(B,{gap:"400",wrap:!0,children:[a.jsxs("div",{children:[a.jsx("p",{style:{color:"white",margin:0,fontSize:"12px"},children:"店頭小売価格（税込）"}),a.jsx("h4",{style:{color:"white",margin:"4px 0"},children:i.retailPriceFormatted})]}),a.jsxs("div",{children:[a.jsx("p",{style:{color:"white",margin:0,fontSize:"12px"},children:"小売価格前日比"}),a.jsx("h4",{style:{color:"white",margin:"4px 0"},children:i.change})]}),a.jsxs("div",{children:[a.jsx("p",{style:{color:"white",margin:0,fontSize:"12px"},children:"店頭買取価格（税込）"}),a.jsx("h4",{style:{color:"white",margin:"4px 0"},children:i.buyPriceFormatted||"取得失敗"})]}),a.jsxs("div",{children:[a.jsx("p",{style:{color:"white",margin:0,fontSize:"12px"},children:"買取価格前日比"}),a.jsx("h4",{style:{color:"white",margin:"4px 0"},children:i.buyChangePercent||"0.00%"})]}),a.jsxs("div",{children:[a.jsx("p",{style:{color:"white",margin:0,fontSize:"12px"},children:"価格調整率"}),a.jsxs("h4",{style:{color:"white",margin:"4px 0"},children:[i.percentage,"%"]})]})]}),a.jsx("div",{style:{marginTop:"12px"},children:a.jsxs("p",{style:{color:"white",margin:0,fontSize:"11px"},children:["出典: ",a.jsx("a",{href:"https://gold.tanaka.co.jp/commodity/souba/",target:"_blank",rel:"noopener noreferrer",style:{color:"white",textDecoration:"underline"},children:"田中貴金属工業株式会社"})]})}),a.jsxs("p",{style:{color:"white",margin:0,fontSize:"12px"},children:["最終更新: ",new Date(i.lastUpdated).toLocaleString("ja-JP")]})]})})}),!i&&a.jsx(ge,{tone:"critical",children:"金価格情報の取得に失敗しました。"})]}),a.jsxs(xe.Section,{children:[n&&a.jsx(be,{children:a.jsx("div",{style:{padding:"16px",background:"#94a3b8",borderRadius:"8px"},children:a.jsxs(pe,{gap:"300",children:[a.jsxs(B,{align:"space-between",children:[a.jsxs(B,{gap:"200",blockAlign:"center",children:[a.jsx("span",{style:{fontSize:"20px"},children:"🥈"}),a.jsx("h3",{style:{color:"white"},children:"田中貴金属 プラチナ価格情報"})]}),a.jsx(Z,{tone:n.changeDirection==="up"?"critical":n.changeDirection==="down"?"success":"info",children:n.changeDirection==="up"?"上昇":n.changeDirection==="down"?"下落":"変動なし"})]}),a.jsxs(B,{gap:"400",wrap:!0,children:[a.jsxs("div",{children:[a.jsx("p",{style:{color:"white",margin:0,fontSize:"12px"},children:"店頭小売価格（税込）"}),a.jsx("h4",{style:{color:"white",margin:"4px 0"},children:n.retailPriceFormatted})]}),a.jsxs("div",{children:[a.jsx("p",{style:{color:"white",margin:0,fontSize:"12px"},children:"小売価格前日比"}),a.jsx("h4",{style:{color:"white",margin:"4px 0"},children:n.change})]}),a.jsxs("div",{children:[a.jsx("p",{style:{color:"white",margin:0,fontSize:"12px"},children:"店頭買取価格（税込）"}),a.jsx("h4",{style:{color:"white",margin:"4px 0"},children:n.buyPriceFormatted||"取得失敗"})]}),a.jsxs("div",{children:[a.jsx("p",{style:{color:"white",margin:0,fontSize:"12px"},children:"買取価格前日比"}),a.jsx("h4",{style:{color:"white",margin:"4px 0"},children:n.buyChangePercent||"0.00%"})]}),a.jsxs("div",{children:[a.jsx("p",{style:{color:"white",margin:0,fontSize:"12px"},children:"価格調整率"}),a.jsxs("h4",{style:{color:"white",margin:"4px 0"},children:[n.percentage,"%"]})]})]}),a.jsx("div",{style:{marginTop:"12px"},children:a.jsxs("p",{style:{color:"white",margin:0,fontSize:"11px"},children:["出典: ",a.jsx("a",{href:"https://gold.tanaka.co.jp/commodity/souba/d-platinum.php",target:"_blank",rel:"noopener noreferrer",style:{color:"white",textDecoration:"underline"},children:"田中貴金属工業株式会社"})]})}),a.jsxs("p",{style:{color:"white",margin:0,fontSize:"12px"},children:["最終更新: ",new Date(n.lastUpdated).toLocaleString("ja-JP")]})]})})}),!n&&a.jsx(ge,{tone:"critical",children:"プラチナ価格情報の取得に失敗しました。"})]})]}),!i&&!n&&a.jsx(ge,{tone:"critical",children:"金・プラチナ価格情報の取得に失敗しました。価格調整機能をご利用いただけません。"})]}),a.jsx(xe.Section,{children:a.jsx(be,{children:a.jsxs(pe,{gap:"400",children:[a.jsxs(B,{align:"space-between",children:[a.jsx("h3",{children:"商品検索・選択"}),a.jsx(Ee,{icon:ht,variant:"tertiary",onClick:Oe,loading:y.state==="loading",children:"商品を再読み込み"})]}),a.jsx("div",{children:a.jsxs(F,{variant:"bodySm",tone:"subdued",children:["最終更新: ",Le?Le.toLocaleString("ja-JP"):"読み込み中...",V&&a.jsx(Z,{tone:"info",size:"small",children:"キャッシュ"})]})}),a.jsxs(B,{gap:"400",children:[a.jsx("div",{style:{minWidth:"180px"},children:a.jsx(pt,{label:"表示する内容",options:[{label:"全ての商品",value:"products"},{label:"全てのコレクション",value:"collections"}],value:_,onChange:he})}),_==="products"&&a.jsxs(a.Fragment,{children:[a.jsx("div",{style:{flex:1},children:a.jsx(Yt,{label:"商品検索",value:ee,onChange:J,placeholder:"商品名またはハンドルで検索...",clearButton:!0,onClearButtonClick:()=>J("")})}),a.jsx("div",{style:{minWidth:"150px"},children:a.jsx(pt,{label:"商品フィルター",options:[{label:"すべての商品",value:"all"},{label:"K18商品のみ",value:"k18"}],value:W,onChange:X})})]}),_==="collections"&&a.jsx("div",{style:{minWidth:"200px"},children:a.jsx(F,{variant:"bodySm",tone:"subdued",children:"コレクションを選択して商品を表示"})})]}),a.jsx(Yt,{label:"価格下限設定 (%)",type:"number",value:U.toString(),onChange:c=>le(parseInt(c)||93),suffix:"%",helpText:"現在価格に対する最低価格の割合（例: 93% = 7%以上は下がらない）",min:"50",max:"100"}),a.jsxs(pe,{gap:"300",children:[a.jsxs(B,{gap:"300",children:[a.jsx(Ee,{onClick:()=>je(!0),disabled:se.length===0,size:"large",children:"すべて選択"}),a.jsx(Ee,{onClick:()=>je(!1),disabled:S.length===0,size:"large",children:"選択解除"}),a.jsxs(Ee,{onClick:xt,tone:"critical",disabled:S.filter(c=>w.has(c.id)).length===0||b.state==="submitting",size:"large",children:["選択中の保存済み ",S.filter(c=>w.has(c.id)).length," 件を解除"]}),a.jsx(Ee,{onClick:ze,disabled:b.state==="submitting"||S.length===0||S.some(c=>!k[c.id]),variant:"primary",size:"large",children:"選択を保存"})]}),S.length>0&&a.jsx(be,{children:a.jsxs(pe,{gap:"200",children:[a.jsxs(B,{gap:"300",blockAlign:"center",children:[a.jsxs(F,{variant:"bodyMd",as:"span",children:["新規選択商品(",S.filter(c=>!r.includes(c.id)).length,"件)に一括設定:"]}),a.jsx(Ee,{onClick:()=>Ze("gold"),disabled:S.filter(c=>!r.includes(c.id)).length===0,tone:"warning",children:"🥇 選択した全ての商品を金価格に設定"}),a.jsx(Ee,{onClick:()=>Ze("platinum"),disabled:S.filter(c=>!r.includes(c.id)).length===0,tone:"info",children:"🥈 選択した全ての商品をプラチナ価格に設定"})]}),S.filter(c=>r.includes(c.id)).length>0&&a.jsxs(F,{variant:"bodySm",tone:"subdued",children:["※既に保存済みの",S.filter(c=>r.includes(c.id)).length,"件は一括設定の対象外です"]})]})})]}),S.length>0&&a.jsx(be,{children:a.jsxs(pe,{gap:"300",children:[a.jsxs(B,{align:"space-between",children:[a.jsxs("h4",{children:["選択中の商品 (",S.length,"件)"]}),a.jsxs(B,{gap:"200",children:[a.jsxs(Z,{tone:"warning",children:["🥇 金: ",S.filter(c=>k[c.id]==="gold").length,"件"]}),a.jsxs(Z,{tone:"info",children:["🥈 プラチナ: ",S.filter(c=>k[c.id]==="platinum").length,"件"]}),a.jsxs(Z,{tone:"critical",children:["⚠️ 未設定: ",S.filter(c=>!k[c.id]).length,"件"]})]})]}),a.jsx(pe,{gap:"200",children:S.map(c=>{const m=k[c.id];return a.jsxs(B,{gap:"200",blockAlign:"center",children:[a.jsx("span",{style:{fontSize:"14px"},children:m==="gold"?"🥇":m==="platinum"?"🥈":"⚠️"}),a.jsx(F,{variant:"bodySm",children:c.title}),m?a.jsx(Z,{tone:m==="gold"?"warning":"info",size:"small",children:m==="gold"?"金価格":"プラチナ価格"}):a.jsx(Z,{tone:"critical",size:"small",children:"金属種別未選択"})]},c.id)})}),S.filter(c=>!k[c.id]).length>0&&a.jsxs(ge,{tone:"warning",children:[a.jsx("strong",{children:"金属種別未選択の商品があります。"}),"各商品の金属種別（金価格 または プラチナ価格）を選択してから保存してください。"]})]})}),r&&r.length>0&&a.jsxs(ge,{tone:"success",children:["現在 ",a.jsxs("strong",{children:[r.length,"件"]})," の商品が自動更新対象として保存されています"]}),((Ae=b.data)==null?void 0:Ae.message)&&a.jsx(ge,{tone:"success",children:b.data.message})]})})}),a.jsx(xe.Section,{children:a.jsxs(be,{children:[_==="collections"&&((t==null?void 0:t.length)??0)===0&&a.jsx(ge,{tone:"info",children:"コレクションが見つかりません。"}),a.jsx("div",{style:{width:"100%",overflowX:"auto",overflowAnchor:"none"},children:a.jsx("div",{style:{minWidth:1680},children:a.jsx(re,{resourceName:{singular:_==="products"?"商品":"コレクション",plural:_==="products"?"商品":"コレクション"},itemCount:_==="products"?se.length:(t==null?void 0:t.length)||0,selectedItemsCount:S.length,onSelectionChange:c=>{c==="all"?je(!0):c==="none"&&je(!1)},headings:_==="products"?[{title:"選択"},{title:"商品名"},{title:"ステータス"},{title:"価格"},{title:"バリエーション"},{title:"連動設定"}]:[{title:"選択"},{title:"コレクション名"},{title:"商品数"},{title:"ハンドル"},{title:"連動設定"}],selectable:!1,children:_==="products"?se.map((c,m)=>{var st;const f=S.some(oe=>oe.id===c.id),E=c.variants.edges,L=E.length>1?`¥${Math.min(...E.map(oe=>parseFloat(oe.node.price)))} - ¥${Math.max(...E.map(oe=>parseFloat(oe.node.price)))}`:`¥${((st=E[0])==null?void 0:st.node.price)||0}`,de=k[c.id],ue=w.has(c.id),Ie=k[c.id]??M[c.id]??"";return a.jsxs(re.Row,{id:c.id,children:[a.jsx(re.Cell,{children:a.jsx(K,{minWidth:"60px",maxWidth:"60px",children:a.jsx(rt,{checked:f,onChange:oe=>lt(c.id,oe)})})}),a.jsx(re.Cell,{children:a.jsx(K,{minWidth:"480px",maxWidth:"720px",children:a.jsxs(B,{gap:"200",blockAlign:"center",children:[f&&de&&a.jsx("span",{style:{fontSize:"16px"},children:de==="gold"?"🥇":"🥈"}),a.jsx(We,{content:c.title,dismissOnMouseOut:!0,children:a.jsx(F,{as:"span",variant:"bodySm",style:{display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden",whiteSpace:"normal",wordBreak:"break-word"},children:c.title})}),f&&de&&a.jsx(Z,{tone:de==="gold"?"warning":"info",size:"small",children:de==="gold"?"金":"Pt"}),f&&!de&&!ue&&a.jsx(Z,{tone:"critical",size:"small",children:"未設定"}),ue&&a.jsx(Z,{tone:"success",size:"small",children:"保存済"})]})})}),a.jsx(re.Cell,{children:a.jsx(K,{minWidth:"100px",maxWidth:"120px",children:a.jsx(Z,{status:c.status==="ACTIVE"?"success":"critical",children:c.status})})}),a.jsx(re.Cell,{children:a.jsx(K,{minWidth:"140px",maxWidth:"200px",children:a.jsx(F,{variant:"bodySm",children:L})})}),a.jsx(re.Cell,{children:a.jsx(K,{minWidth:"100px",maxWidth:"140px",children:a.jsx(F,{variant:"bodySm",children:E.length})})}),a.jsx(re.Cell,{children:a.jsx(K,{minWidth:"360px",maxWidth:"420px",children:f||ue?a.jsxs("div",{children:[a.jsx(pt,{label:"金属種別",labelHidden:!0,options:[{label:"金属種別を選択...",value:"",disabled:!0},{label:"🥇 金価格",value:"gold"},{label:"🥈 プラチナ価格",value:"platinum"}],value:Ie,onChange:oe=>Xe(c.id,oe),placeholder:"選択してください",disabled:ue&&!f}),!Ie&&f&&!ue&&a.jsx("div",{style:{marginTop:"4px"},children:a.jsx(F,{variant:"bodySm",tone:"critical",children:"※選択が必要です"})}),ue&&a.jsx("div",{style:{marginTop:"4px"},children:a.jsxs(B,{gap:"100",blockAlign:"center",children:[a.jsxs(F,{variant:"bodySm",tone:"subdued",children:["保存済み設定",f?"（編集可）":""]}),a.jsx(Br,{productId:c.id,onOptimistic:oe=>{A(Qe=>Qe.filter(Ue=>Ue.id!==oe)),R(Qe=>{const Ue={...Qe};return delete Ue[oe],Ue}),q([oe])},scheduleRevalidate:Pe})]})})]}):a.jsx(F,{variant:"bodySm",tone:"subdued",children:"-"})})})]},c.id)}):(t==null?void 0:t.map(c=>{const m=O.includes(c.id),f=Be[c.id]||"";return a.jsxs(re.Row,{id:c.id,children:[a.jsx(re.Cell,{children:a.jsx(K,{minWidth:"60px",maxWidth:"60px",children:a.jsx(rt,{checked:m,onChange:E=>it(c.id,E)})})}),a.jsx(re.Cell,{children:a.jsx(K,{minWidth:"320px",maxWidth:"480px",children:a.jsxs(B,{gap:"200",blockAlign:"center",children:[a.jsx("span",{style:{fontSize:"16px"},children:"📦"}),a.jsx(We,{content:c.title,dismissOnMouseOut:!0,children:a.jsx(F,{variant:"bodyMd",fontWeight:"medium",style:{display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden",whiteSpace:"normal",wordBreak:"break-word"},children:c.title})}),m&&f&&a.jsx(Z,{tone:f==="gold"?"warning":"info",size:"small",children:f==="gold"?"金":"Pt"})]})})}),a.jsx(re.Cell,{children:a.jsx(K,{minWidth:"120px",maxWidth:"160px",children:a.jsxs(Z,{tone:"info",children:[c.productsCount??"-","件の商品"]})})}),a.jsx(re.Cell,{children:a.jsx(K,{minWidth:"150px",maxWidth:"200px",children:a.jsx(F,{variant:"bodySm",tone:"subdued",children:c.handle})})}),a.jsx(re.Cell,{children:a.jsx(K,{minWidth:"280px",maxWidth:"340px",children:m?a.jsx(pt,{label:"金属種別",labelHidden:!0,options:[{label:"金属種別を選択...",value:"",disabled:!0},{label:"🥇 金価格",value:"gold"},{label:"🥈 プラチナ価格",value:"platinum"}],value:f,onChange:E=>qe(c.id,E),placeholder:"選択してください"}):a.jsx(F,{variant:"bodySm",tone:"subdued",children:"-"})})})]},c.id)}))||[]})})})]})}),a.jsx(Ht,{open:ie,onClose:()=>I(!1),title:"価格調整プレビュー",primaryAction:{content:"価格を更新",onAction:$e,loading:T.state==="submitting"},secondaryActions:[{content:"キャンセル",onAction:()=>I(!1)}],large:!0,children:a.jsx(Ht.Section,{children:a.jsx(pe,{gap:"400",children:te.map(c=>a.jsx(be,{children:a.jsxs(pe,{gap:"300",children:[a.jsxs(B,{align:"space-between",children:[a.jsx("h4",{children:c.title}),a.jsx(Z,{tone:c.metalType==="gold"?"warning":"info",children:c.metalType==="gold"?"金価格":"プラチナ価格"})]}),c.error?a.jsx(ge,{tone:"critical",children:c.error}):c.variants.map(m=>a.jsxs(B,{align:"space-between",children:[a.jsx("span",{children:m.title||"デフォルト"}),a.jsxs(B,{gap:"200",children:[a.jsxs("span",{children:["¥",m.currentPrice," → ¥",m.newPrice]}),m.changed&&a.jsxs(Z,{tone:m.priceChange>0?"warning":"success",children:[m.priceChange>0?"+":"",m.priceChange,"円"]})]})]},m.id))]})},c.id))})})}),((Ye=T.data)==null?void 0:Ye.updateResults)&&a.jsx(xe.Section,{children:a.jsx(be,{children:a.jsxs(pe,{gap:"400",children:[a.jsx("h3",{children:"価格更新結果"}),T.data.summary&&a.jsx(be,{children:a.jsxs(B,{gap:"400",children:[a.jsxs("div",{children:["合計: ",a.jsx("strong",{children:T.data.summary.total}),"件"]}),a.jsxs("div",{children:["成功: ",a.jsx("strong",{children:T.data.summary.success}),"件"]}),a.jsxs("div",{children:["失敗: ",a.jsx("strong",{children:T.data.summary.failed}),"件"]})]})}),T.data.error&&a.jsx(ge,{tone:"critical",children:T.data.error}),T.data.message&&a.jsx(ge,{tone:"info",children:T.data.message}),T.data.updateResults.map((c,m)=>{var f,E;return a.jsx(ge,{tone:c.success?"success":"critical",children:c.success?`${c.product} - ${c.variant}: ¥${(f=c.oldPrice)==null?void 0:f.toLocaleString()} → ¥${(E=c.newPrice)==null?void 0:E.toLocaleString()}`:`${c.product} - ${c.variant}: ${c.error}`},m)})]})})})]})})}function Xr(){const e=aa(),{goldPrice:t,platinumPrice:i,selectedProductIds:n,savedSelectedProducts:r,selectedCollectionIds:l,savedSelectedCollections:p,shopSetting:u,forceRefresh:d,cacheTimestamp:h}=e;return a.jsx(o.Suspense,{fallback:a.jsx(bn,{fullWidth:!0,title:"商品価格自動調整",subtitle:"読み込み中...",secondaryActions:[{content:"商品を再読み込み",icon:ht,onAction:()=>{Fe.clear(tt.PRODUCTS),window.location.search="?refresh=true"}}],children:a.jsxs(xe,{children:[a.jsx(xe.Section,{children:t&&a.jsx(be,{children:a.jsxs(pe,{gap:"400",children:[a.jsxs(B,{align:"space-between",children:[a.jsx("h3",{children:"田中貴金属 金価格情報"}),a.jsx(Z,{tone:t.changeDirection==="up"?"attention":t.changeDirection==="down"?"success":"info",children:t.changeDirection==="up"?"上昇":t.changeDirection==="down"?"下落":"変動なし"})]}),a.jsxs(B,{gap:"600",children:[a.jsxs("div",{children:[a.jsx("p",{children:"店頭小売価格（税込）"}),a.jsx("h4",{children:t.retailPriceFormatted})]}),a.jsxs("div",{children:[a.jsx("p",{children:"前日比"}),a.jsx("h4",{children:t.change})]})]}),a.jsx("div",{children:a.jsxs("p",{children:[a.jsxs("strong",{children:["価格調整率: ",t.percentage,"%"]}),"（この変動率で商品価格を自動調整します）"]})}),a.jsxs("p",{children:["最終更新: ",new Date(t.lastUpdated).toLocaleString("ja-JP")]})]})})}),a.jsx(xe.Section,{children:a.jsx(be,{children:a.jsx(pe,{gap:"400",children:a.jsxs("div",{style:{textAlign:"center",padding:"60px 20px"},children:[a.jsx(Wt,{size:"large"}),a.jsx("p",{style:{marginTop:"20px"},children:"商品データを読み込んでいます..."}),a.jsx(F,{variant:"bodySm",tone:"subdued",children:"初回読み込みには時間がかかります。次回からキャッシュにより高速表示されます。"})]})})})})]})}),children:a.jsx(ra,{resolve:Promise.allSettled([e.products,e.collections]),children:([v,b])=>{const T=v.status==="fulfilled"?v.value:[],y=b.status==="fulfilled"?b.value:[];return a.jsx(Rr,{products:T,collections:y,goldPrice:t,platinumPrice:i,selectedProductIds:n,savedSelectedProducts:r,selectedCollectionIds:l,savedSelectedCollections:p,shopSetting:u,forceRefresh:d,cacheTimestamp:h})}})})}export{Xr as default};
