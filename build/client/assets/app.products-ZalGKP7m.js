var ta=Object.defineProperty;var na=(t,n,i)=>n in t?ta(t,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[n]=i;var yn=(t,n,i)=>na(t,typeof n!="symbol"?n+"":n,i);import{j as e}from"./jsx-runtime-0DLF9kdB.js";import{R as o,r as c,d as It}from"./index-Dfrec1kz.js";import{u as aa,A as ra,b as nn,w as la}from"./components-CVBppnN6.js";import{M as Wn,f as j,y as ia,o as tt,c as ye,d as sa,z as oa,u as un,A as Rn,D as Dn,T as H,n as ze,x as ca,E as an,I as P,v as vt,F as da,w as Fn,k as ua,j as pa,s as ha,G as Ht,e as K,K as rn,H as ln,J as fa,N as ma,O as ga,Q as ba,R as Tn,W as xa,V as va,X as Sa,Y as pn,r as Ea,a as G,P as On,C as Ee,B as be,b as Yt}from"./Page-By7YmrAR.js";import{L as Pe}from"./Layout-Zx8E5R0_.js";import{S as ya,B as ke}from"./Banner-BEWRRN1e.js";import{S as At}from"./Select-BJRtj8og.js";import{C as nt}from"./Checkbox-CxbnksAj.js";import{E as $n,p as Ta,l as Ca,d as St,m as ka}from"./context-29fBFT2m.js";import{a as Cn,S as kn,b as Pa,A as ja}from"./Sticky-BqjPAraD.js";import{S as wa,F as Ia}from"./context-BG6bh-td.js";import"./banner-context-BjQn27ta.js";var Nt=function(n){return o.createElement("svg",Object.assign({viewBox:"0 0 20 20"},n),o.createElement("path",{d:"M3.5 9.25a.75.75 0 0 0 1.5 0 3 3 0 0 1 3-3h6.566l-1.123 1.248a.75.75 0 1 0 1.114 1.004l2.25-2.5a.75.75 0 0 0-.027-1.032l-2.25-2.25a.75.75 0 1 0-1.06 1.06l.97.97h-6.44a4.5 4.5 0 0 0-4.5 4.5Z"}),o.createElement("path",{d:"M16.5 10.75a.75.75 0 0 0-1.5 0 3 3 0 0 1-3 3h-6.566l1.123-1.248a.75.75 0 1 0-1.114-1.004l-2.25 2.5a.75.75 0 0 0 .027 1.032l2.25 2.25a.75.75 0 0 0 1.06-1.06l-.97-.97h6.44a4.5 4.5 0 0 0 4.5-4.5Z"}))};Nt.displayName="RefreshIcon";const Un=c.forwardRef(({alt:t,sourceSet:n,source:i,crossOrigin:a,onLoad:r,className:l,...p},u)=>{const d=n?n.map(({source:y,descriptor:b})=>`${y} ${b}`).join(","):null,m=c.useCallback(()=>{r&&r()},[r]);return o.createElement("img",Object.assign({ref:u,alt:t,src:i,crossOrigin:a,className:l,onLoad:m},d?{srcSet:d}:{},p))});Un.displayName="Image";var Zt={Backdrop:"Polaris-Backdrop",transparent:"Polaris-Backdrop--transparent",belowNavigation:"Polaris-Backdrop--belowNavigation"};function Aa(){const t=c.useContext(wa);if(!t)throw new Wn("No ScrollLockManager was provided.");return t}function _a(t){const n=Aa();return c.useEffect(()=>(n.registerScrollLock(),()=>{n.unregisterScrollLock()}),[n]),null}function Na(t){const{onClick:n,onTouchStart:i,belowNavigation:a,transparent:r,setClosing:l}=t,p=j(Zt.Backdrop,a&&Zt.belowNavigation,r&&Zt.transparent),u=()=>{l&&l(!0)},d=()=>{l&&l(!1),n&&n()};return o.createElement(o.Fragment,null,o.createElement(_a,null),o.createElement("div",{className:p,onClick:d,onTouchStart:i,onMouseDown:u}))}function Pn(t=[],n,i,a){const r=i.reduce((d,m)=>d+m,0),l=t.map((d,m)=>m),p=[],u=[];if(a>r)p.push(...l);else{let d=0,m=!1;l.forEach(y=>{const b=i[y];if(d+b>=a-n||m){u.push(y),m=!0;return}p.push(y),d+=b})}return{visiblePromotedActions:p,hiddenPromotedActions:u}}function Ma(t){const n=t.filter(i=>i.items);return t.length===n.length}function La(t){const n=t.filter(i=>!i.items);return t.length===n.length}function sn(t){return"title"in t&&"actions"in t}function Ba(t){return"items"in t}function Ha(t){if(!(!t||t.length===0)){if(Ma(t))return t;if(La(t))return[{items:t}]}}function jn(t){var n;if(!t)return!1;for(const i of t)for(const a of i.items)if(((n=a.badge)==null?void 0:n.tone)==="new")return!0;return!1}var De={BulkActionsOuterLayout:"Polaris-BulkActions__BulkActionsOuterLayout",BulkActionsSelectAllWrapper:"Polaris-BulkActions__BulkActionsSelectAllWrapper",BulkActionsPromotedActionsWrapper:"Polaris-BulkActions__BulkActionsPromotedActionsWrapper",BulkActionsLayout:"Polaris-BulkActions__BulkActionsLayout","BulkActionsLayout--measuring":"Polaris-BulkActions--bulkActionsLayoutMeasuring",BulkActionsMeasurerLayout:"Polaris-BulkActions__BulkActionsMeasurerLayout",BulkActionButton:"Polaris-BulkActions__BulkActionButton",AllAction:"Polaris-BulkActions__AllAction"},wn={Indicator:"Polaris-Indicator",pulseIndicator:"Polaris-Indicator--pulseIndicator"};function Wa({pulse:t=!0}){const n=j(wn.Indicator,t&&wn.pulseIndicator);return o.createElement("span",{className:n})}function gt({handleMeasurement:t,url:n,external:i,onAction:a,content:r,disclosure:l,accessibilityLabel:p,disabled:u,destructive:d,indicator:m,showContentInButton:y,size:b}){const v=c.useRef(null);ia(()=>{if(t&&v.current){const E=v.current.getBoundingClientRect().width;t(E)}});const C=l&&!y,R=C?void 0:r,D=o.createElement(ye,{external:i,url:n,accessibilityLabel:C?r:p,tone:d?"critical":void 0,disclosure:l&&y,onClick:a,disabled:u,size:b,icon:C?o.createElement(sa,{source:oa,tone:"base"}):void 0},R);return o.createElement("div",{className:De.BulkActionButton,ref:v},C?o.createElement(tt,{content:r,preferredPosition:"below"},D):D,m&&o.createElement(Wa,null))}function Ra({title:t,actions:n,isNewBadgeInBadgeActions:i,size:a}){const{value:r,toggle:l}=un(!1);return o.createElement(o.Fragment,null,o.createElement(Rn,{active:r,activator:o.createElement(gt,{disclosure:!0,showContentInButton:!0,onAction:l,content:t,indicator:i,size:a}),onClose:l,preferInputActivator:!0},o.createElement(Dn,{items:n,onActionAnyItem:l})))}var Qt={CheckableButton:"Polaris-CheckableButton",Checkbox:"Polaris-CheckableButton__Checkbox",Label:"Polaris-CheckableButton__Label"};const Da=c.forwardRef(function({accessibilityLabel:n,label:i="",onToggleAll:a,selected:r,disabled:l,ariaLive:p},u){const d=c.useRef(null);function m(){var y;(y=d==null?void 0:d.current)==null||y.focus()}return c.useImperativeHandle(u,()=>({focus:m})),o.createElement("div",{className:Qt.CheckableButton,onClick:a},o.createElement("div",{className:Qt.Checkbox},o.createElement(nt,{label:n,labelHidden:!0,checked:r,disabled:l,onChange:a,ref:d})),i?o.createElement("span",{className:Qt.Label,"aria-live":p},o.createElement(H,{as:"span",variant:"bodySm",fontWeight:"medium"},i)):null)}),Fa=4;function Oa({promotedActions:t=[],disabled:n,buttonSize:i,handleMeasurement:a}){const r=ze(),l=c.useRef(null),p=r.translate("Polaris.ResourceList.BulkActions.moreActionsActivatorLabel"),u=o.createElement(gt,{disclosure:!0,content:p}),d=c.useCallback(()=>{if(!l.current)return;const y=l.current.offsetWidth,b=l.current.children,C=Array.from(b).map(D=>Math.ceil(D.getBoundingClientRect().width)+Fa),R=C.pop()||0;a({containerWidth:y,disclosureWidth:R,hiddenActionsWidths:C})},[a]);c.useEffect(()=>{d()},[d,t]);const m=t.map((y,b)=>sn(y)?o.createElement(gt,{key:b,disclosure:!0,showContentInButton:!0,content:y.title,size:i}):o.createElement(gt,Object.assign({key:b,disabled:n},y,{size:i})));return ca("resize",d),o.createElement("div",{className:De.BulkActionsMeasurerLayout,ref:l},m,u)}const $a=c.forwardRef(function({promotedActions:n,actions:i,disabled:a,buttonSize:r,paginatedSelectAllAction:l,paginatedSelectAllText:p,label:u,accessibilityLabel:d,selected:m,onToggleAll:y,onMoreActionPopoverToggle:b,width:v,selectMode:C},R){const D=ze(),[E,L]=c.useState(!1),[k,F]=c.useReducer((N,I)=>({...N,...I}),{disclosureWidth:0,containerWidth:1/0,actionsWidths:[],visiblePromotedActions:[],hiddenPromotedActions:[],hasMeasured:!1}),{visiblePromotedActions:de,hiddenPromotedActions:ne,containerWidth:U,disclosureWidth:ae,actionsWidths:B,hasMeasured:je}=k;c.useEffect(()=>{if(U===0||!n||n.length===0)return;const{visiblePromotedActions:N,hiddenPromotedActions:I}=Pn(n,ae,B,U);F({visiblePromotedActions:N,hiddenPromotedActions:I,hasMeasured:U!==1/0})},[U,ae,n,B]);const z=!n||n&&de.length===0?D.translate("Polaris.ResourceList.BulkActions.actionsActivatorLabel"):D.translate("Polaris.ResourceList.BulkActions.moreActionsActivatorLabel"),X=l?o.createElement(an,{className:De.AllAction,onClick:l.onAction,size:"slim",disabled:a},o.createElement(H,{as:"span",variant:"bodySm",fontWeight:"medium"},l.content)):null,Z=p&&l,fe={accessibilityLabel:d,label:Z?p:u,selected:m,onToggleAll:y,disabled:a,ariaLive:Z?"polite":void 0,ref:R},_=c.useCallback(()=>{b==null||b(E),L(N=>!N)},[b,E]),ue=c.useCallback(N=>{const{hiddenActionsWidths:I,containerWidth:W,disclosureWidth:Se}=N;if(!n||n.length===0)return;const{visiblePromotedActions:le,hiddenPromotedActions:Le}=Pn(n,Se,I,W);F({visiblePromotedActions:le,hiddenPromotedActions:Le,actionsWidths:I,containerWidth:W,disclosureWidth:Se,hasMeasured:!0})},[n]),q=Ha(i),Q=n?n.filter((N,I)=>!!de.includes(I)).map((N,I)=>sn(N)?o.createElement(Ra,Object.assign({key:I},N,{isNewBadgeInBadgeActions:jn(q),size:r})):o.createElement(gt,Object.assign({key:I,disabled:a},N,{size:r}))):null,me={items:ne.map(N=>n==null?void 0:n[N]).reduce((N,I)=>I?sn(I)?N.concat(I.actions):N.concat(I):N,[])},J=c.useMemo(()=>{if(q)return q;if(!i)return[];let N=!0;return i.filter(I=>I).reduce((I,W)=>{if(Ba(W))return N=!1,I.concat(W);if(N){if(I.length===0)return[{items:[W]}];const Se=I[I.length-1];return I.splice(I.length-1,1,{items:[...Se.items,W]}),I}return N=!0,I.concat({items:[W]})},[])},[i,q]),we=o.createElement(gt,{disclosure:!0,showContentInButton:!Q,onAction:_,content:z,disabled:a,indicator:jn(q),size:r}),Ge=J.length>0?o.createElement(Rn,{active:E,activator:we,preferredAlignment:"right",onClose:_},o.createElement(Dn,{sections:me.items.length>0?[me,...J]:J,onActionAnyItem:_})):null,Me=o.createElement(Oa,{promotedActions:n,disabled:a,buttonSize:r,handleMeasurement:ue});return o.createElement("div",{className:De.BulkActions,style:v?{width:v}:void 0},o.createElement(P,{gap:"400",blockAlign:"center"},o.createElement("div",{className:De.BulkActionsSelectAllWrapper},o.createElement(Da,fe),X),C?o.createElement("div",{className:De.BulkActionsPromotedActionsWrapper},o.createElement(P,{gap:"100",blockAlign:"center"},o.createElement("div",{className:De.BulkActionsOuterLayout},Me,o.createElement("div",{className:j(De.BulkActionsLayout,!je&&De["BulkActionsLayout--measuring"])},Q)),Ge)):null))});var $e={LegacyStack:"Polaris-LegacyStack",Item:"Polaris-LegacyStack__Item",noWrap:"Polaris-LegacyStack--noWrap",spacingNone:"Polaris-LegacyStack--spacingNone",spacingExtraTight:"Polaris-LegacyStack--spacingExtraTight",spacingTight:"Polaris-LegacyStack--spacingTight",spacingBaseTight:"Polaris-LegacyStack--spacingBaseTight",spacingLoose:"Polaris-LegacyStack--spacingLoose",spacingExtraLoose:"Polaris-LegacyStack--spacingExtraLoose",distributionLeading:"Polaris-LegacyStack--distributionLeading",distributionTrailing:"Polaris-LegacyStack--distributionTrailing",distributionCenter:"Polaris-LegacyStack--distributionCenter",distributionEqualSpacing:"Polaris-LegacyStack--distributionEqualSpacing",distributionFill:"Polaris-LegacyStack--distributionFill",distributionFillEvenly:"Polaris-LegacyStack--distributionFillEvenly",alignmentLeading:"Polaris-LegacyStack--alignmentLeading",alignmentTrailing:"Polaris-LegacyStack--alignmentTrailing",alignmentCenter:"Polaris-LegacyStack--alignmentCenter",alignmentFill:"Polaris-LegacyStack--alignmentFill",alignmentBaseline:"Polaris-LegacyStack--alignmentBaseline",vertical:"Polaris-LegacyStack--vertical","Item-fill":"Polaris-LegacyStack__Item--fill"};function zn({children:t,fill:n}){const i=j($e.Item,n&&$e["Item-fill"]);return o.createElement("div",{className:i},t)}const hn=c.memo(function({children:n,vertical:i,spacing:a,distribution:r,alignment:l,wrap:p}){const u=j($e.LegacyStack,i&&$e.vertical,a&&$e[vt("spacing",a)],r&&$e[vt("distribution",r)],l&&$e[vt("alignment",l)],p===!1&&$e.noWrap),d=da(n).map((m,y)=>Fn(m,zn,{key:y}));return o.createElement("div",{className:u},d)});hn.Item=zn;var Ua={InlineGrid:"Polaris-InlineGrid"};function za({children:t,columns:n,gap:i,alignItems:a}){const r={...pa("inline-grid","grid-template-columns",Va(n)),...ua("inline-grid","gap","space",i),"--pc-inline-grid-align-items":a};return o.createElement("div",{className:Ua.InlineGrid,style:ha(r)},t)}function Va(t){return typeof t=="object"&&t!==null&&!Array.isArray(t)?Object.fromEntries(Object.entries(t).map(([n,i])=>[n,In(i)])):In(t)}function In(t){if(t)return typeof t=="number"||!isNaN(Number(t))?`repeat(${Number(t)}, minmax(0, 1fr))`:typeof t=="string"?t:t.map(n=>{switch(n){case"oneThird":return"minmax(0, 1fr)";case"oneHalf":return"minmax(0, 1fr)";case"twoThirds":return"minmax(0, 2fr)"}}).join(" ")}const Ga=c.createContext(void 0);var Ka="data:image/svg+xml,%3csvg width='60' height='60' xmlns='http://www.w3.org/2000/svg'%3e%3cpath fill-rule='evenodd' d='M41.87 24a17.87 17.87 0 11-35.74 0 17.87 17.87 0 0135.74 0zm-3.15 18.96a24 24 0 114.24-4.24L59.04 54.8a3 3 0 11-4.24 4.24L38.72 42.96z' fill='%238C9196'/%3e%3c/svg%3e",Ja=Ka;function Xa({title:t,description:n,withIllustration:i}){const r=ze().translate("Polaris.EmptySearchResult.altText"),l=n?o.createElement("p",null,n):null,p=i?o.createElement(Un,{alt:r,source:Ja,draggable:!1}):null;return o.createElement(hn,{alignment:"center",vertical:!0},p,o.createElement(H,{variant:"headingLg",as:"p"},t),o.createElement(H,{tone:"subdued",as:"span"},l))}const qa=c.memo(function({children:n,disabled:i,root:a}){return c.useEffect(()=>{if(i||!a)return;const r=Ya(a)?a.current:a;!r||r.querySelector("[autofocus]")||Ht(r,!1)},[i,a]),o.createElement(o.Fragment,null,n)});function Ya(t){return t.current!==void 0}function Mt(){return Mt=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var i=arguments[n];for(var a in i)({}).hasOwnProperty.call(i,a)&&(t[a]=i[a])}return t},Mt.apply(null,arguments)}function fn(t,n){if(t==null)return{};var i={};for(var a in t)if({}.hasOwnProperty.call(t,a)){if(n.indexOf(a)!==-1)continue;i[a]=t[a]}return i}function on(t,n){return on=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,a){return i.__proto__=a,i},on(t,n)}function mn(t,n){t.prototype=Object.create(n.prototype),t.prototype.constructor=t,on(t,n)}function Za(t,n){return t.classList?!!n&&t.classList.contains(n):(" "+(t.className.baseVal||t.className)+" ").indexOf(" "+n+" ")!==-1}function Qa(t,n){t.classList?t.classList.add(n):Za(t,n)||(typeof t.className=="string"?t.className=t.className+" "+n:t.setAttribute("class",(t.className&&t.className.baseVal||"")+" "+n))}function An(t,n){return t.replace(new RegExp("(^|\\s)"+n+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function er(t,n){t.classList?t.classList.remove(n):typeof t.className=="string"?t.className=An(t.className,n):t.setAttribute("class",An(t.className&&t.className.baseVal||"",n))}const _n={disabled:!1},Lt=o.createContext(null);var Vn=function(n){return n.scrollTop},xt="unmounted",Qe="exited",et="entering",mt="entered",cn="exiting",Ne=(function(t){mn(n,t);function n(a,r){var l;l=t.call(this,a,r)||this;var p=r,u=p&&!p.isMounting?a.enter:a.appear,d;return l.appearStatus=null,a.in?u?(d=Qe,l.appearStatus=et):d=mt:a.unmountOnExit||a.mountOnEnter?d=xt:d=Qe,l.state={status:d},l.nextCallback=null,l}n.getDerivedStateFromProps=function(r,l){var p=r.in;return p&&l.status===xt?{status:Qe}:null};var i=n.prototype;return i.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},i.componentDidUpdate=function(r){var l=null;if(r!==this.props){var p=this.state.status;this.props.in?p!==et&&p!==mt&&(l=et):(p===et||p===mt)&&(l=cn)}this.updateStatus(!1,l)},i.componentWillUnmount=function(){this.cancelNextCallback()},i.getTimeouts=function(){var r=this.props.timeout,l,p,u;return l=p=u=r,r!=null&&typeof r!="number"&&(l=r.exit,p=r.enter,u=r.appear!==void 0?r.appear:p),{exit:l,enter:p,appear:u}},i.updateStatus=function(r,l){if(r===void 0&&(r=!1),l!==null)if(this.cancelNextCallback(),l===et){if(this.props.unmountOnExit||this.props.mountOnEnter){var p=this.props.nodeRef?this.props.nodeRef.current:It.findDOMNode(this);p&&Vn(p)}this.performEnter(r)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Qe&&this.setState({status:xt})},i.performEnter=function(r){var l=this,p=this.props.enter,u=this.context?this.context.isMounting:r,d=this.props.nodeRef?[u]:[It.findDOMNode(this),u],m=d[0],y=d[1],b=this.getTimeouts(),v=u?b.appear:b.enter;if(!r&&!p||_n.disabled){this.safeSetState({status:mt},function(){l.props.onEntered(m)});return}this.props.onEnter(m,y),this.safeSetState({status:et},function(){l.props.onEntering(m,y),l.onTransitionEnd(v,function(){l.safeSetState({status:mt},function(){l.props.onEntered(m,y)})})})},i.performExit=function(){var r=this,l=this.props.exit,p=this.getTimeouts(),u=this.props.nodeRef?void 0:It.findDOMNode(this);if(!l||_n.disabled){this.safeSetState({status:Qe},function(){r.props.onExited(u)});return}this.props.onExit(u),this.safeSetState({status:cn},function(){r.props.onExiting(u),r.onTransitionEnd(p.exit,function(){r.safeSetState({status:Qe},function(){r.props.onExited(u)})})})},i.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},i.safeSetState=function(r,l){l=this.setNextCallback(l),this.setState(r,l)},i.setNextCallback=function(r){var l=this,p=!0;return this.nextCallback=function(u){p&&(p=!1,l.nextCallback=null,r(u))},this.nextCallback.cancel=function(){p=!1},this.nextCallback},i.onTransitionEnd=function(r,l){this.setNextCallback(l);var p=this.props.nodeRef?this.props.nodeRef.current:It.findDOMNode(this),u=r==null&&!this.props.addEndListener;if(!p||u){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var d=this.props.nodeRef?[this.nextCallback]:[p,this.nextCallback],m=d[0],y=d[1];this.props.addEndListener(m,y)}r!=null&&setTimeout(this.nextCallback,r)},i.render=function(){var r=this.state.status;if(r===xt)return null;var l=this.props,p=l.children;l.in,l.mountOnEnter,l.unmountOnExit,l.appear,l.enter,l.exit,l.timeout,l.addEndListener,l.onEnter,l.onEntering,l.onEntered,l.onExit,l.onExiting,l.onExited,l.nodeRef;var u=fn(l,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return o.createElement(Lt.Provider,{value:null},typeof p=="function"?p(r,u):o.cloneElement(o.Children.only(p),u))},n})(o.Component);Ne.contextType=Lt;Ne.propTypes={};function ft(){}Ne.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:ft,onEntering:ft,onEntered:ft,onExit:ft,onExiting:ft,onExited:ft};Ne.UNMOUNTED=xt;Ne.EXITED=Qe;Ne.ENTERING=et;Ne.ENTERED=mt;Ne.EXITING=cn;var tr=function(n,i){return n&&i&&i.split(" ").forEach(function(a){return Qa(n,a)})},en=function(n,i){return n&&i&&i.split(" ").forEach(function(a){return er(n,a)})},gn=(function(t){mn(n,t);function n(){for(var a,r=arguments.length,l=new Array(r),p=0;p<r;p++)l[p]=arguments[p];return a=t.call.apply(t,[this].concat(l))||this,a.appliedClasses={appear:{},enter:{},exit:{}},a.onEnter=function(u,d){var m=a.resolveArguments(u,d),y=m[0],b=m[1];a.removeClasses(y,"exit"),a.addClass(y,b?"appear":"enter","base"),a.props.onEnter&&a.props.onEnter(u,d)},a.onEntering=function(u,d){var m=a.resolveArguments(u,d),y=m[0],b=m[1],v=b?"appear":"enter";a.addClass(y,v,"active"),a.props.onEntering&&a.props.onEntering(u,d)},a.onEntered=function(u,d){var m=a.resolveArguments(u,d),y=m[0],b=m[1],v=b?"appear":"enter";a.removeClasses(y,v),a.addClass(y,v,"done"),a.props.onEntered&&a.props.onEntered(u,d)},a.onExit=function(u){var d=a.resolveArguments(u),m=d[0];a.removeClasses(m,"appear"),a.removeClasses(m,"enter"),a.addClass(m,"exit","base"),a.props.onExit&&a.props.onExit(u)},a.onExiting=function(u){var d=a.resolveArguments(u),m=d[0];a.addClass(m,"exit","active"),a.props.onExiting&&a.props.onExiting(u)},a.onExited=function(u){var d=a.resolveArguments(u),m=d[0];a.removeClasses(m,"exit"),a.addClass(m,"exit","done"),a.props.onExited&&a.props.onExited(u)},a.resolveArguments=function(u,d){return a.props.nodeRef?[a.props.nodeRef.current,u]:[u,d]},a.getClassNames=function(u){var d=a.props.classNames,m=typeof d=="string",y=m&&d?d+"-":"",b=m?""+y+u:d[u],v=m?b+"-active":d[u+"Active"],C=m?b+"-done":d[u+"Done"];return{baseClassName:b,activeClassName:v,doneClassName:C}},a}var i=n.prototype;return i.addClass=function(r,l,p){var u=this.getClassNames(l)[p+"ClassName"],d=this.getClassNames("enter"),m=d.doneClassName;l==="appear"&&p==="done"&&m&&(u+=" "+m),p==="active"&&r&&Vn(r),u&&(this.appliedClasses[l][p]=u,tr(r,u))},i.removeClasses=function(r,l){var p=this.appliedClasses[l],u=p.base,d=p.active,m=p.done;this.appliedClasses[l]={},u&&en(r,u),d&&en(r,d),m&&en(r,m)},i.render=function(){var r=this.props;r.classNames;var l=fn(r,["classNames"]);return o.createElement(Ne,Mt({},l,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},n})(o.Component);gn.defaultProps={classNames:""};gn.propTypes={};function nr(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function bn(t,n){var i=function(l){return n&&c.isValidElement(l)?n(l):l},a=Object.create(null);return t&&c.Children.map(t,function(r){return r}).forEach(function(r){a[r.key]=i(r)}),a}function ar(t,n){t=t||{},n=n||{};function i(y){return y in n?n[y]:t[y]}var a=Object.create(null),r=[];for(var l in t)l in n?r.length&&(a[l]=r,r=[]):r.push(l);var p,u={};for(var d in n){if(a[d])for(p=0;p<a[d].length;p++){var m=a[d][p];u[a[d][p]]=i(m)}u[d]=i(d)}for(p=0;p<r.length;p++)u[r[p]]=i(r[p]);return u}function at(t,n,i){return i[n]!=null?i[n]:t.props[n]}function rr(t,n){return bn(t.children,function(i){return c.cloneElement(i,{onExited:n.bind(null,i),in:!0,appear:at(i,"appear",t),enter:at(i,"enter",t),exit:at(i,"exit",t)})})}function lr(t,n,i){var a=bn(t.children),r=ar(n,a);return Object.keys(r).forEach(function(l){var p=r[l];if(c.isValidElement(p)){var u=l in n,d=l in a,m=n[l],y=c.isValidElement(m)&&!m.props.in;d&&(!u||y)?r[l]=c.cloneElement(p,{onExited:i.bind(null,p),in:!0,exit:at(p,"exit",t),enter:at(p,"enter",t)}):!d&&u&&!y?r[l]=c.cloneElement(p,{in:!1}):d&&u&&c.isValidElement(m)&&(r[l]=c.cloneElement(p,{onExited:i.bind(null,p),in:m.props.in,exit:at(p,"exit",t),enter:at(p,"enter",t)}))}}),r}var ir=Object.values||function(t){return Object.keys(t).map(function(n){return t[n]})},sr={component:"div",childFactory:function(n){return n}},xn=(function(t){mn(n,t);function n(a,r){var l;l=t.call(this,a,r)||this;var p=l.handleExited.bind(nr(l));return l.state={contextValue:{isMounting:!0},handleExited:p,firstRender:!0},l}var i=n.prototype;return i.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},i.componentWillUnmount=function(){this.mounted=!1},n.getDerivedStateFromProps=function(r,l){var p=l.children,u=l.handleExited,d=l.firstRender;return{children:d?rr(r,u):lr(r,p,u),firstRender:!1}},i.handleExited=function(r,l){var p=bn(this.props.children);r.key in p||(r.props.onExited&&r.props.onExited(l),this.mounted&&this.setState(function(u){var d=Mt({},u.children);return delete d[r.key],{children:d}}))},i.render=function(){var r=this.props,l=r.component,p=r.childFactory,u=fn(r,["component","childFactory"]),d=this.state.contextValue,m=ir(this.state.children).map(p);return delete u.appear,delete u.enter,delete u.exit,l===null?o.createElement(Lt.Provider,{value:d},m):o.createElement(Lt.Provider,{value:d},o.createElement(l,u,m))},n})(o.Component);xn.propTypes={};xn.defaultProps=sr;function or(t,n,i){if(!document)return;document.documentElement.style.setProperty(t,n)}var tn={Body:"Polaris-Modal__Body",NoScrollBody:"Polaris-Modal__NoScrollBody",IFrame:"Polaris-Modal__IFrame"},Nn={Section:"Polaris-Modal-Section",titleHidden:"Polaris-Modal-Section--titleHidden"};function Gn({children:t,flush:n=!1,subdued:i=!1,titleHidden:a=!1}){const r=j(Nn.Section,a&&Nn.titleHidden);return o.createElement("div",{className:r},o.createElement(K,Object.assign({as:"section",padding:n?"0":"400"},a&&{paddingInlineEnd:"0"},i&&{background:"bg-surface-tertiary"}),t))}var oe={Container:"Polaris-Modal-Dialog__Container",Dialog:"Polaris-Modal-Dialog",Modal:"Polaris-Modal-Dialog__Modal",limitHeight:"Polaris-Modal-Dialog--limitHeight",sizeSmall:"Polaris-Modal-Dialog--sizeSmall",sizeLarge:"Polaris-Modal-Dialog--sizeLarge",sizeFullScreen:"Polaris-Modal-Dialog--sizeFullScreen",animateFadeUp:"Polaris-Modal-Dialog--animateFadeUp",entering:"Polaris-Modal-Dialog--entering",exiting:"Polaris-Modal-Dialog--exiting",exited:"Polaris-Modal-Dialog--exited",entered:"Polaris-Modal-Dialog--entered"};function cr({trapping:t}){const n=c.useContext(Ia),i=c.useId();if(!n)throw new Wn("No FocusManager was provided.");const{trapFocusList:a,add:r,remove:l}=n,p=a[0]===i,u=c.useMemo(()=>({canSafelyFocus:p}),[p]);return c.useEffect(()=>{if(t)return r(i),()=>{l(i)}},[r,i,l,t]),u}function dr({trapping:t=!0,children:n}){const{canSafelyFocus:i}=cr({trapping:t}),a=c.useRef(null),[r,l]=c.useState(!0);c.useEffect(()=>{const d=i&&!(a.current&&a.current.contains(document.activeElement))?!t:!0;l(d)},[i,t]);const p=d=>{const m=a.current&&a.current.contains(document.activeElement);t===!1||!a.current||m||d.target instanceof Element&&d.target.matches(`${Ta.selector} *`)||i&&d.target instanceof HTMLElement&&a.current!==d.target&&!a.current.contains(d.target)&&Ht(a.current)},u=d=>{if(t===!1||!a.current)return;const m=fa(a.current),y=ma(a.current);d.target===y&&!d.shiftKey&&(d.preventDefault(),ga(a.current)),d.target===m&&d.shiftKey&&(d.preventDefault(),ba(a.current))};return o.createElement(qa,{disabled:r,root:a.current},o.createElement("div",{ref:a},o.createElement($n,{event:"focusin",handler:p}),o.createElement(rn,{keyCode:ln.Tab,keyEvent:"keydown",handler:u}),n))}function ur({instant:t,labelledBy:n,children:i,limitHeight:a,size:r,onClose:l,onExited:p,onEntered:u,setClosing:d,hasToasts:m,...y}){const b=Ca(),v=c.useRef(null),C=c.useContext(Ga);let R;C&&(R=C.toastMessages);const D=j(oe.Modal,r&&oe[vt("size",r)],a&&oe.limitHeight),E=t?Ne:hr;c.useEffect(()=>{v.current&&!v.current.contains(document.activeElement)&&Ht(v.current)},[]);const L=()=>{d&&d(!0)},k=()=>{d&&d(!1),l()},F=o.createElement("div",{"aria-live":"assertive"},R?R.map(de=>o.createElement(H,{visuallyHidden:!0,as:"p",key:de.id},de.content)):null);return o.createElement(E,Object.assign({},y,{nodeRef:v,mountOnEnter:!0,unmountOnExit:!0,timeout:parseInt(b.motion["motion-duration-200"],10),onEntered:u,onExited:p}),o.createElement("div",{className:oe.Container,"data-polaris-layer":!0,"data-polaris-overlay":!0,ref:v},o.createElement(dr,null,o.createElement("div",{role:"dialog","aria-modal":!0,"aria-label":n,"aria-labelledby":n,tabIndex:-1,className:oe.Dialog},o.createElement("div",{className:D},o.createElement(rn,{keyCode:ln.Escape,keyEvent:"keydown",handler:L}),o.createElement(rn,{keyCode:ln.Escape,handler:k}),i),F))))}const pr={appear:j(oe.animateFadeUp,oe.entering),appearActive:j(oe.animateFadeUp,oe.entered),enter:j(oe.animateFadeUp,oe.entering),enterActive:j(oe.animateFadeUp,oe.entered),exit:j(oe.animateFadeUp,oe.exiting),exitActive:j(oe.animateFadeUp,oe.exited)};function hr({children:t,...n}){return o.createElement(gn,Object.assign({},n,{classNames:pr}),t)}function Mn({pressed:t,onClick:n}){const i=ze();return o.createElement(ye,{variant:"tertiary",pressed:t,icon:ya,onClick:n,accessibilityLabel:i.translate("Polaris.Common.close")})}function fr({id:t,children:n,closing:i,titleHidden:a,onClose:r}){return a||!n?o.createElement(K,{position:"absolute",insetInlineEnd:"400",insetBlockStart:"400",zIndex:"1"},o.createElement(Mn,{onClick:r})):o.createElement(K,{paddingBlockStart:"400",paddingBlockEnd:"400",paddingInlineStart:"400",paddingInlineEnd:"400",borderBlockEndWidth:"025",borderColor:"border",background:"bg-surface-tertiary"},o.createElement(za,{columns:{xs:"1fr auto"},gap:"400"},o.createElement(P,{gap:"400",blockAlign:"center"},o.createElement(H,{id:t,as:"h2",variant:"headingMd",breakWord:!0},n)),o.createElement(Mn,{pressed:i,onClick:r})))}function mr({primaryAction:t,secondaryActions:n,children:i}){const a=t&&Tn(t,{variant:"primary"})||null,r=n&&Tn(n)||null,l=a||r?o.createElement(P,{gap:"200"},r,a):null;return o.createElement(P,{gap:"400",blockAlign:"center"},o.createElement(K,{borderColor:"border",borderBlockStartWidth:"025",padding:"400",width:"100%"},o.createElement(P,{gap:"400",blockAlign:"center",align:"space-between"},o.createElement(K,null,i),l)))}const Ln=200,gr=400,dn=function({children:n,title:i,titleHidden:a=!1,src:r,iFrameName:l,open:p,instant:u,sectioned:d,loading:m,size:y,limitHeight:b,footer:v,primaryAction:C,secondaryActions:R,onScrolledToBottom:D,activator:E,activatorWrapper:L="div",onClose:k,onIFrameLoad:F,onTransitionEnd:de,noScroll:ne}){const[U,ae]=c.useState(Ln),[B,je]=c.useState(!1),z=c.useId(),X=c.useRef(null),he=ze().translate("Polaris.Modal.iFrameTitle");let fe,_;const ue=c.useCallback(()=>{de&&de()},[de]),q=c.useCallback(()=>{ae(Ln);const me=E&&Bn(E)?E&&E.current:X.current;me&&requestAnimationFrame(()=>Ht(me))},[E]),Q=c.useCallback(me=>{const J=me.target;if(J&&J.contentWindow)try{ae(J.contentWindow.document.body.scrollHeight)}catch{ae(gr)}F!=null&&F(me)},[F]);if(p){const me=!v&&!C&&!R?null:o.createElement(mr,{primaryAction:C,secondaryActions:R},v),J=d?Fn(n,Gn,{titleHidden:a}):n,we=m?o.createElement(K,{padding:"400"},o.createElement(P,{gap:"400",align:"center",blockAlign:"center"},o.createElement(pn,null))):J,Ge=ne?o.createElement("div",{className:tn.NoScrollBody},o.createElement(K,{width:"100%",overflowX:"hidden",overflowY:"hidden"},we)):o.createElement(Sa,{shadow:!0,className:tn.Body,onScrolledToBottom:D},we),Me=r?o.createElement("iframe",{name:l,title:he,src:r,className:tn.IFrame,onLoad:Q,style:{height:`${U}px`}}):Ge;fe=o.createElement(ur,{instant:u,labelledBy:z,onClose:k,onEntered:ue,onExited:q,size:y,limitHeight:b,setClosing:je},o.createElement(fr,{titleHidden:a,id:z,closing:B,onClose:k},i),Me,me),_=o.createElement(Na,{setClosing:je,onClick:k})}const re=!u,Ve=E&&!Bn(E)?o.createElement(K,{ref:X,as:L},E):null;return o.createElement(xa.Provider,{value:!0},Ve,o.createElement(va,{idPrefix:"modal"},o.createElement(xn,{appear:re,enter:re,exit:re},fe),_))};function Bn(t){return Object.prototype.hasOwnProperty.call(t,"current")}dn.Section=Gn;var g={IndexTable:"Polaris-IndexTable",IndexTableWrapper:"Polaris-IndexTable__IndexTableWrapper","IndexTableWrapper-scrollBarHidden":"Polaris-IndexTable__IndexTableWrapper--scrollBarHidden",IndexTableWrapperWithSelectAllActions:"Polaris-IndexTable__IndexTableWrapperWithSelectAllActions",LoadingPanel:"Polaris-IndexTable__LoadingPanel",LoadingPanelEntered:"Polaris-IndexTable__LoadingPanelEntered",LoadingPanelRow:"Polaris-IndexTable__LoadingPanelRow",LoadingPanelText:"Polaris-IndexTable__LoadingPanelText",Table:"Polaris-IndexTable__Table","Table-scrolling":"Polaris-IndexTable__Table--scrolling","TableCell-first":"Polaris-IndexTable__TableCell--first","StickyTable-scrolling":"Polaris-IndexTable__StickyTable--scrolling",TableCell:"Polaris-IndexTable__TableCell","TableHeading-first":"Polaris-IndexTable__TableHeading--first","TableHeading-second":"Polaris-IndexTable__TableHeading--second","Table-sticky":"Polaris-IndexTable__Table--sticky",StickyTable:"Polaris-IndexTable__StickyTable","Table-unselectable":"Polaris-IndexTable__Table--unselectable",TableRow:"Polaris-IndexTable__TableRow","TableRow-unclickable":"Polaris-IndexTable__TableRow--unclickable",toneSuccess:"Polaris-IndexTable--toneSuccess","TableRow-child":"Polaris-IndexTable__TableRow--child",toneWarning:"Polaris-IndexTable--toneWarning",toneCritical:"Polaris-IndexTable--toneCritical",toneSubdued:"Polaris-IndexTable--toneSubdued","TableRow-subheader":"Polaris-IndexTable__TableRow--subheader","TableRow-selected":"Polaris-IndexTable__TableRow--selected","TableRow-hovered":"Polaris-IndexTable__TableRow--hovered","TableRow-disabled":"Polaris-IndexTable__TableRow--disabled",ZebraStriping:"Polaris-IndexTable__ZebraStriping",TableHeading:"Polaris-IndexTable__TableHeading","TableHeading-flush":"Polaris-IndexTable__TableHeading--flush","TableHeading-align-center":"Polaris-IndexTable--tableHeadingAlignCenter","TableHeading-align-end":"Polaris-IndexTable--tableHeadingAlignEnd","TableHeading-extra-padding-right":"Polaris-IndexTable--tableHeadingExtraPaddingRight","TableHeading-sortable":"Polaris-IndexTable__TableHeading--sortable",TableHeadingSortButton:"Polaris-IndexTable__TableHeadingSortButton",TableHeadingSortIcon:"Polaris-IndexTable__TableHeadingSortIcon","TableHeadingSortButton-heading-align-end":"Polaris-IndexTable--tableHeadingSortButtonHeadingAlignEnd","TableHeadingSortButton-heading-align-end-currently-sorted":"Polaris-IndexTable--tableHeadingSortButtonHeadingAlignEndCurrentlySorted","TableHeadingSortIcon-heading-align-end":"Polaris-IndexTable--tableHeadingSortIconHeadingAlignEnd","TableHeadingSortButton-heading-align-end-previously-sorted":"Polaris-IndexTable--tableHeadingSortButtonHeadingAlignEndPreviouslySorted","right-aligned-sort-button-slide-out":"Polaris-IndexTable--rightAlignedSortButtonSlideOut","reveal-right-aligned-sort-button-icon":"Polaris-IndexTable--revealRightAlignedSortButtonIcon",TableHeadingUnderline:"Polaris-IndexTable__TableHeadingUnderline",TableHeadingTooltipUnderlinePlaceholder:"Polaris-IndexTable__TableHeadingTooltipUnderlinePlaceholder","TableHeadingSortIcon-visible":"Polaris-IndexTable__TableHeadingSortIcon--visible",TableHeadingSortSvg:"Polaris-IndexTable__TableHeadingSortSvg",SortableTableHeadingWithCustomMarkup:"Polaris-IndexTable__SortableTableHeadingWithCustomMarkup",SortableTableHeaderWrapper:"Polaris-IndexTable__SortableTableHeaderWrapper",ColumnHeaderCheckboxWrapper:"Polaris-IndexTable__ColumnHeaderCheckboxWrapper",FirstStickyHeaderElement:"Polaris-IndexTable__FirstStickyHeaderElement","TableHeading-unselectable":"Polaris-IndexTable__TableHeading--unselectable","TableCell-flush":"Polaris-IndexTable__TableCell--flush","Table-sticky-scrolling":"Polaris-IndexTable--tableStickyScrolling","StickyTableHeader-sticky-scrolling":"Polaris-IndexTable--stickyTableHeaderStickyScrolling","TableHeading-last":"Polaris-IndexTable__TableHeading--last","Table-sticky-last":"Polaris-IndexTable--tableStickyLast","StickyTableHeader-sticky-last":"Polaris-IndexTable--stickyTableHeaderStickyLast","Table-sortable":"Polaris-IndexTable__Table--sortable",StickyTableHeader:"Polaris-IndexTable__StickyTableHeader","StickyTableHeader-isSticky":"Polaris-IndexTable__StickyTableHeader--isSticky",StickyTableHeadings:"Polaris-IndexTable__StickyTableHeadings","StickyTableHeading-second":"Polaris-IndexTable__StickyTableHeading--second",unselectable:"Polaris-IndexTable--unselectable","StickyTableHeading-second-scrolling":"Polaris-IndexTable--stickyTableHeadingSecondScrolling",ScrollLeft:"Polaris-IndexTable__ScrollLeft",ScrollRight:"Polaris-IndexTable__ScrollRight","ScrollRight-onboarding":"Polaris-IndexTable__ScrollRight--onboarding",SelectAllActionsWrapper:"Polaris-IndexTable__SelectAllActionsWrapper",SelectAllActionsWrapperWithPagination:"Polaris-IndexTable__SelectAllActionsWrapperWithPagination",SelectAllActionsWrapperSticky:"Polaris-IndexTable__SelectAllActionsWrapperSticky",SelectAllActionsWrapperAtEnd:"Polaris-IndexTable__SelectAllActionsWrapperAtEnd",SelectAllActionsWrapperAtEndAppear:"Polaris-IndexTable__SelectAllActionsWrapperAtEndAppear",BulkActionsWrapper:"Polaris-IndexTable__BulkActionsWrapper",BulkActionsWrapperVisible:"Polaris-IndexTable__BulkActionsWrapperVisible",PaginationWrapper:"Polaris-IndexTable__PaginationWrapper",PaginationWrapperScrolledPastTop:"Polaris-IndexTable__PaginationWrapperScrolledPastTop",ScrollBarContainer:"Polaris-IndexTable__ScrollBarContainer",ScrollBarContainerWithPagination:"Polaris-IndexTable__ScrollBarContainerWithPagination",ScrollBarContainerScrolledPastTop:"Polaris-IndexTable__ScrollBarContainerScrolledPastTop",ScrollBarContainerWithSelectAllActions:"Polaris-IndexTable__ScrollBarContainerWithSelectAllActions",ScrollBarContainerSelectAllActionsSticky:"Polaris-IndexTable__ScrollBarContainerSelectAllActionsSticky",scrollBarContainerCondensed:"Polaris-IndexTable--scrollBarContainerCondensed",scrollBarContainerHidden:"Polaris-IndexTable--scrollBarContainerHidden",ScrollBar:"Polaris-IndexTable__ScrollBar",disableTextSelection:"Polaris-IndexTable--disableTextSelection",EmptySearchResultWrapper:"Polaris-IndexTable__EmptySearchResultWrapper",condensedRow:"Polaris-IndexTable--condensedRow",CondensedList:"Polaris-IndexTable__CondensedList",HeaderWrapper:"Polaris-IndexTable__HeaderWrapper","StickyTable-condensed":"Polaris-IndexTable__StickyTable--condensed","StickyTableHeader-condensed":"Polaris-IndexTable__StickyTableHeader--condensed",ScrollBarContent:"Polaris-IndexTable__ScrollBarContent"};const Ue="All";let ce=(function(t){return t.All="all",t.Page="page",t.Multi="multi",t.Single="single",t.Range="range",t})({});const Kn=c.createContext(void 0),Jn=c.createContext(void 0),Xn=c.createContext(void 0);function qn(){const t=c.useContext(Jn);if(!t)throw new Error("Missing IndexProvider context");return t}function br(){const t=c.useContext(Xn);if(!t)throw new Error("Missing IndexProvider context");return t}function Yn(){const t=c.useContext(Kn);if(!t)throw new Error("Missing IndexProvider context");return t}function xr({selectedItemsCount:t,itemCount:n,hasMoreItems:i,resourceName:a,defaultPaginatedSelectAllText:r}){const l=ze(),p=!!t,u=t==="All"||t>0,d={singular:l.translate("Polaris.IndexProvider.defaultItemSingular"),plural:l.translate("Polaris.IndexProvider.defaultItemPlural")},m=a||d,y=R(),b=D(),v=E();let C="indeterminate";return!t||t===0?C=void 0:(t===Ue||t===n)&&(C=!0),{paginatedSelectAllText:y,bulkActionsLabel:b,bulkActionsAccessibilityLabel:v,resourceName:m,selectMode:u,bulkSelectState:C,selectable:p};function R(){if(!(!p||!i)&&t===Ue)return r||l.translate("Polaris.IndexProvider.allItemsSelected",{itemsLength:n,resourceNamePlural:m.plural.toLocaleLowerCase()})}function D(){const L=t===Ue?`${n}+`:t;return l.translate("Polaris.IndexProvider.selected",{selectedItemsCount:L})}function E(){const L=n,k=t===L;return L===1&&k?l.translate("Polaris.IndexProvider.a11yCheckboxDeselectAllSingle",{resourceNameSingular:m.singular}):L===1?l.translate("Polaris.IndexProvider.a11yCheckboxSelectAllSingle",{resourceNameSingular:m.singular}):k?l.translate("Polaris.IndexProvider.a11yCheckboxDeselectAllMultiple",{itemsLength:n,resourceNamePlural:m.plural}):l.translate("Polaris.IndexProvider.a11yCheckboxSelectAllMultiple",{itemsLength:n,resourceNamePlural:m.plural})}}function vr({onSelectionChange:t=()=>{}}){const n=c.useRef(null);return c.useCallback((a,r,l,p)=>{const u=n.current;if(ce.Multi&&typeof p=="number"&&(n.current=p),a===ce.Single||a===ce.Multi&&(typeof u!="number"||typeof p!="number"))t(ce.Single,r,l);else if(a===ce.Multi){const d=Math.min(u,p),m=Math.max(u,p);t(a,r,[d,m])}else a===ce.Page||a===ce.All?t(a,r):a===ce.Range&&t(ce.Range,r,l)},[t])}function Sr({children:t,resourceName:n,loading:i,onSelectionChange:a,selectedItemsCount:r=0,itemCount:l,hasMoreItems:p,condensed:u,selectable:d=!0,paginatedSelectAllText:m}){const{paginatedSelectAllText:y,bulkActionsLabel:b,bulkActionsAccessibilityLabel:v,resourceName:C,selectMode:R,bulkSelectState:D}=xr({selectedItemsCount:r,itemCount:l,hasMoreItems:p,resourceName:n,defaultPaginatedSelectAllText:m}),E=vr({onSelectionChange:a}),L=c.useMemo(()=>({itemCount:l,selectMode:R&&d,selectable:d,resourceName:C,loading:i,paginatedSelectAllText:y,hasMoreItems:p,bulkActionsLabel:b,bulkActionsAccessibilityLabel:v,bulkSelectState:D,selectedItemsCount:r,condensed:u}),[l,R,d,C,i,y,p,b,v,D,r,u]),k=c.useMemo(()=>({selectable:d,selectMode:R&&d,condensed:u}),[u,R,d]);return o.createElement(Kn.Provider,{value:L},o.createElement(Xn.Provider,{value:k},o.createElement(Jn.Provider,{value:E},t)))}const vn=c.createContext({}),Er=c.createContext(void 0),Zn={scrollableContainer:null,canScrollLeft:!1,canScrollRight:!1},yr=c.createContext(Zn),Qn=c.memo(function({children:n,className:i,flush:a,colSpan:r,headers:l,scope:p,as:u="td",id:d}){const m=j(i,g.TableCell,a&&g["TableCell-flush"]);return o.createElement(u,{id:d,colSpan:r,headers:l,scope:p,className:m},n)});var Tr={Wrapper:"Polaris-IndexTable-Checkbox__Wrapper"};const Cr=c.memo(function({accessibilityLabel:n}){const i=ze(),{resourceName:a}=Yn(),{itemId:r,selected:l,disabled:p,onInteraction:u}=c.useContext(vn),d=n||i.translate("Polaris.IndexTable.selectItem",{resourceName:a.singular});return o.createElement(kr,null,o.createElement("div",{className:Tr.Wrapper,onClick:u,onKeyUp:Pr},o.createElement(nt,{id:`Select-${r}`,label:d,labelHidden:!0,checked:l,disabled:p})))});function kr({children:t}){const{position:n}=c.useContext(vn),i=c.useRef(null),a=c.useCallback(St(()=>{if(n!==0||!i.current)return;const{width:l}=i.current.getBoundingClientRect();or("--pc-checkbox-offset",`${l}px`)}),[n]);c.useEffect(()=>{a()},[a]),c.useEffect(()=>{if(i.current)return window.addEventListener("resize",a),()=>{window.removeEventListener("resize",a)}},[a]);const r=j(g.TableCell,g["TableCell-first"]);return o.createElement("td",{className:r,ref:i},t)}function Pr(){}const jr=c.memo(function({children:n,hideSelectable:i,selected:a,id:r,position:l,tone:p,disabled:u,selectionRange:d,rowType:m="data",accessibilityLabel:y,onNavigation:b,onClick:v}){const{selectable:C,selectMode:R,condensed:D}=br(),E=C&&!i,L=qn(),{value:k,setTrue:F,setFalse:de}=un(!1),ne=c.useCallback(_=>{_.stopPropagation();let ue=ce.Single;if(u||!E||"key"in _&&_.key!==" "||!L)return;_.nativeEvent.shiftKey?ue=ce.Multi:d&&(ue=ce.Range),L(ue,!a,d??r,l)},[r,L,a,d,l,u,E]),U=c.useMemo(()=>({itemId:r,selected:a,position:l,onInteraction:ne,disabled:u}),[r,a,u,l,ne]),ae=c.useRef(null),B=c.useRef(!1),je=c.useRef(null),z=c.useCallback(_=>{je.current=_;const ue=_==null?void 0:_.querySelector("[data-primary-link]");ue&&(ae.current=ue)},[]),X=j(g.TableRow,m==="subheader"&&g["TableRow-subheader"],m==="child"&&g["TableRow-child"],E&&D&&g.condensedRow,a&&g["TableRow-selected"],k&&!D&&g["TableRow-hovered"],u&&g["TableRow-disabled"],p&&g[vt("tone",p)],!E&&!v&&!ae.current&&g["TableRow-unclickable"]);let Z;(!u&&E||v||ae.current)&&(Z=_=>{if(m!=="subheader"&&!(!je.current||B.current)){if(_.stopPropagation(),_.preventDefault(),v){v();return}if(ae.current&&!R){B.current=!0;const{ctrlKey:ue,metaKey:q}=_.nativeEvent;if(b&&b(r),(ue||q)&&ae.current instanceof HTMLAnchorElement){B.current=!1,window.open(ae.current.href,"_blank");return}ae.current.dispatchEvent(new MouseEvent(_.type,_.nativeEvent))}else B.current=!1,ne(_)}});const he=D?"li":"tr",fe=i?o.createElement(Qn,null):o.createElement(Cr,{accessibilityLabel:y});return o.createElement(vn.Provider,{value:U},o.createElement(Er.Provider,{value:k},o.createElement(he,{key:r,id:r,className:X,onMouseEnter:F,onMouseLeave:de,onClick:Z,ref:z},C?fe:null,n)))});function Hn(t,n){return t?Array.from(t.querySelectorAll(n)):[]}var wr={ScrollContainer:"Polaris-IndexTable-ScrollContainer"};function Ir({children:t,scrollableContainerRef:n,onScroll:i}){c.useEffect(()=>{n.current&&n.current.dispatchEvent(new Event("scroll"))},[n]);const[a,r]=c.useState(Zn),l=c.useCallback(St(()=>{if(!n.current)return;const p=n.current.scrollWidth-n.current.offsetWidth,u=n.current.scrollLeft>0,d=n.current.scrollLeft<p;i(u,d),r({scrollableContainer:n.current,canScrollLeft:u,canScrollRight:d})},40,{trailing:!0,leading:!0,maxWait:40}),[i,n]);return o.createElement(yr.Provider,{value:a},o.createElement("div",{className:wr.ScrollContainer,ref:n,onScroll:l},t))}const Ar=16,_r=300;function Nr({headings:t,bulkActions:n=[],promotedBulkActions:i=[],children:a,emptyState:r,sort:l,paginatedSelectAllActionText:p,lastColumnSticky:u=!1,sortable:d,sortDirection:m,defaultSortDirection:y="descending",sortColumnIndex:b,onSort:v,sortToggleLabels:C,hasZebraStriping:R,pagination:D,...E}){const{loading:L,bulkSelectState:k,resourceName:F,bulkActionsAccessibilityLabel:de,selectMode:ne,selectable:U=E.selectable,paginatedSelectAllText:ae,itemCount:B,hasMoreItems:je,selectedItemsCount:z,condensed:X}=Yn(),Z=qn(),he=ze(),{value:fe,toggle:_}=un(!1),ue=c.useRef({top:0,left:0}),q=c.useRef([]),Q=c.useRef(null),re=c.useRef(null),Ve=c.useRef(null),me=c.useRef(null),[J,we]=c.useState(!1),[Ge,Me]=c.useState(null),[N,I]=c.useState(!0),W=c.useRef([]),Se=c.useRef([]),le=c.useRef(null),Le=c.useRef(null),rt=c.useRef(null),xe=c.useRef(null),Ie=c.useRef(null),Be=c.useRef(!1),lt=c.useRef(!1),Ke=c.useRef(b),it=c.useRef(!1),st=c.useRef(0),ot=c.useRef(!1);z!==st.current&&(it.current=!0,st.current=z),!ot.current&&z!==0&&(ot.current=!0);const Et=c.useCallback(S=>{S!==null&&!J&&we(!0),Ve.current=S},[J]),Je=c.useCallback(()=>{Z(z===Ue?ce.Page:ce.All,!0)},[Z,z]),Xe=c.useMemo(()=>St(()=>{var w,pe;if(!re.current||!Q.current)return;const S=Q.current.getBoundingClientRect();ue.current={top:S.top,left:S.left},q.current=W.current.map(ge=>({offsetWidth:ge.offsetWidth||0,offsetLeft:ge.offsetLeft||0})),W.current.length!==0&&(U&&W.current.length>1&&(W.current[1].style.left=`${q.current[0].offsetWidth}px`,(w=Se.current)!=null&&w.length&&(Se.current[1].style.left=`${q.current[0].offsetWidth}px`)),(pe=Se.current)!=null&&pe.length&&Se.current.forEach((ge,_e)=>{var We;ge.style.minWidth=`${((We=q.current[_e])==null?void 0:We.offsetWidth)||0}px`}))}),[U]),ve=c.useCallback(()=>{var S,w;xe.current&&re.current&&J&&(xe.current.style.setProperty("--pc-index-table-scroll-bar-content-width",`${re.current.offsetWidth-Ar}px`),I(((S=Ie.current)==null?void 0:S.offsetWidth)===((w=re.current)==null?void 0:w.offsetWidth)))},[J]),Ae=c.useCallback(St(ve,_r,{trailing:!0}),[ve]),[He,qe]=c.useState(!0),Ye=c.useCallback(St(()=>{if(!u||!re.current||!Q.current)return;const S=re.current.getBoundingClientRect(),w=Q.current.getBoundingClientRect();qe(S.width>w.width)}),[u]);c.useEffect(()=>{Ye()},[Ye]);const[Y,Wt]=c.useState(!0),ct=c.useCallback(()=>{if(!Q.current||!W.current.length)return;const S=Q.current.getBoundingClientRect(),w=U?W.current[0].getBoundingClientRect().width:0,pe=W.current[U?1:0].getBoundingClientRect().width,ge=U?W.current.length>2:1,_e=u&&ge?W.current[W.current.length-1].getBoundingClientRect().width:0;Wt(S.width>pe+w+_e+100)},[u,U]);c.useEffect(()=>{J&&ct()},[ct,J]);const dt=c.useCallback(()=>{var S;(S=xe.current)==null||S.style.setProperty("--pc-index-table-scroll-bar-content-width","0px"),Xe(),Ae(),Ye(),ct()},[Xe,Ae,Ye,ct]),Rt=c.useCallback((S,w)=>{!Q.current||!xe.current||(Be.current||(lt.current=!0,xe.current.scrollLeft=Q.current.scrollLeft),Be.current=!1,rt.current&&(rt.current.scrollLeft=Q.current.scrollLeft),(S&&!fe||!S&&fe)&&_(),qe(w))},[fe,_]),Dt=c.useCallback(()=>{!Q.current||!xe.current||(lt.current||(Be.current=!0,Q.current.scrollLeft=xe.current.scrollLeft),lt.current=!1)},[]);ka(()=>{W.current=Hn(re.current,"[data-index-table-heading]"),Se.current=Hn(le.current,"[data-index-table-sticky-heading]"),Xe()},[t,Xe,Le,J]),c.useEffect(()=>{ve(),Me(X?me.current:re.current)},[J,ve,X]);const Ft=t.map((S,w)=>Oe(S,w,"th",{"data-index-table-heading":!0},S.id)),yt=t.map((S,w)=>Oe(S,w,"div",{"data-index-table-sticky-heading":!0})),[Ot,$t]=c.useState(z===Ue?`${B}+`:z);c.useEffect(()=>{(z===Ue||z>0)&&$t(z===Ue?`${B}+`:z)},[z,B]);const Ut=he.translate("Polaris.IndexTable.selected",{selectedItemsCount:Ot}),zt=c.useCallback(()=>{Z(ce.Page,!k||k==="indeterminate")},[k,Z]),Tt=Kt(),ut=o.createElement("div",{className:j(g.LoadingPanel,L&&g.LoadingPanelEntered)},o.createElement("div",{className:g.LoadingPanelRow},o.createElement(pn,{size:"small"}),o.createElement("span",{className:g.LoadingPanelText},he.translate("Polaris.IndexTable.resourceLoadingAccessibilityLabel",{resourceNamePlural:F.plural.toLocaleLowerCase()})))),Vt=j(g.StickyTable,fe&&g["StickyTable-scrolling"],X&&g["StickyTable-condensed"]),pt=!X||z,Ct=pt?i:[],s=pt?n:[],f=o.createElement("div",{className:Vt,role:"presentation"},o.createElement(Pa,{boundingElement:Ge},S=>{const w=j(g.StickyTableHeader,S&&g["StickyTableHeader-isSticky"],Y&&g["StickyTableHeader-sticky"],fe&&g["StickyTableHeader-scrolling"],Y&&u&&g["StickyTableHeader-sticky-last"],Y&&u&&He&&g["StickyTableHeader-sticky-scrolling"]),pe=j(g.BulkActionsWrapper,ne&&g.BulkActionsWrapperVisible,X&&g["StickyTableHeader-condensed"],S&&g["StickyTableHeader-isSticky"]),ge=pt&&!X?o.createElement("div",{className:pe},o.createElement($a,{selectMode:ne,onToggleAll:zt,paginatedSelectAllText:ae,paginatedSelectAllAction:Tt,accessibilityLabel:de,selected:k,promotedActions:Ct,actions:s,onSelectModeToggle:X?kt:void 0,label:Ut,buttonSize:"micro"})):null,_e=X?o.createElement("div",{className:j(g.HeaderWrapper,(!U||X)&&g.unselectable)},ut,l):o.createElement("div",{className:w,ref:le},ut,o.createElement("div",{className:g.StickyTableHeadings,ref:rt},yt));return o.createElement(o.Fragment,null,_e,ge)})),h=j(g.ScrollBarContainer,D&&g.ScrollBarContainerWithPagination,X&&g.scrollBarContainerCondensed,N&&g.scrollBarContainerHidden),x=j(re.current&&J&&g.ScrollBarContent),T=B>0?o.createElement(ja,{onMount:ve},o.createElement("div",{className:h,ref:Ie},o.createElement("div",{onScroll:Dt,className:g.ScrollBar,ref:xe},o.createElement("div",{className:x})))):null,O=d==null?void 0:d.some(S=>S),M=j(g.Table,fe&&g["Table-scrolling"],ne&&g.disableTextSelection,!U&&g["Table-unselectable"],Y&&g["Table-sticky"],O&&g["Table-sortable"],Y&&u&&g["Table-sticky-last"],Y&&u&&He&&g["Table-sticky-scrolling"],R&&g.ZebraStriping),A=r||o.createElement(Xa,{title:he.translate("Polaris.IndexTable.emptySearchTitle",{resourceNamePlural:F.plural}),description:he.translate("Polaris.IndexTable.emptySearchDescription"),withIllustration:!0}),V=o.createElement(o.Fragment,null,o.createElement($n,{event:"resize",handler:dt}),f),ee=j(g.CondensedList,R&&g.ZebraStriping),ie=X?o.createElement(o.Fragment,null,V,o.createElement("ul",{"data-selectmode":!!ne,className:ee,ref:me},a)):o.createElement(o.Fragment,null,V,o.createElement(Ir,{scrollableContainerRef:Q,onScroll:Rt},o.createElement("table",{ref:re,className:M},o.createElement("thead",null,o.createElement("tr",{className:g.HeadingRow},Ft)),o.createElement("tbody",{ref:Et},a)))),se=B>0?ie:o.createElement("div",{className:g.EmptySearchResultWrapper},A),Fe=D?o.createElement("div",{className:g.PaginationWrapper},o.createElement(Ea,Object.assign({type:"table"},D))):null;return o.createElement(o.Fragment,null,o.createElement("div",{className:g.IndexTable},o.createElement("div",{className:g.IndexTableWrapper},!X&&ut,se,T,Fe)));function Oe(S,w,pe,ge,_e){const We=w===0,ht=w===t.length-1,Re=d==null?void 0:d.some(wt=>wt===!0),Pt=S.alignment||"start",Jt=j(g.TableHeading,Pt==="center"&&g["TableHeading-align-center"],Pt==="end"&&g["TableHeading-align-end"],Re&&g["TableHeading-sortable"],We&&g["TableHeading-second"],ht&&!S.hidden&&g["TableHeading-last"],!U&&g["TableHeading-unselectable"],S.flush&&g["TableHeading-flush"]),Xt=U!==!1&&We&&q.current&&q.current.length>0?{left:q.current[0].offsetWidth}:void 0,Ze=o.createElement(pe,Object.assign({id:_e,className:Jt,key:Mr(S),style:Xt},ge),Ce(S,w));if(w!==0||!U)return Ze;const jt=j(g.TableHeading,Re&&g["TableHeading-sortable"],w===0&&g["TableHeading-first"]);return[o.createElement(pe,Object.assign({className:jt,key:`${S}-${w}`},ge),$()),Ze]}function $(){return o.createElement("div",{className:g.ColumnHeaderCheckboxWrapper},o.createElement(nt,{label:he.translate("Polaris.IndexTable.selectAllLabel",{resourceNamePlural:F.plural}),labelHidden:!0,onChange:Gt,checked:k}))}function Te(S,w){it.current=!1,ot.current=!1,Ke.current=b,v==null||v(S,w)}function Ce(S,w){let pe;const ge={width:S.tooltipWidth??"default",activatorWrapper:"div",dismissOnMouseOut:!0,persistOnClick:S.tooltipPersistsOnClick},_e={...ge,padding:"400",borderRadius:"200",content:S.tooltipContent,preferredPosition:"above"},We=o.createElement(H,{as:"span",variant:"bodySm",fontWeight:"medium",visuallyHidden:S.hidden},S.title);S.new?pe=o.createElement(hn,{wrap:!1,alignment:"center"},We,o.createElement(G,{tone:"new"},he.translate("Polaris.IndexTable.onboardingBadgeText"))):pe=We;const ht={"--pc-index-table-heading-extra-padding-right":S.paddingBlockEnd?`var(--p-space-${S.paddingBlockEnd})`:"0"};if(d!=null&&d[w]){const Re=w===b,Pt=!Re&&w===Ke.current,Jt=it.current||!ot.current&&z!==0,Xt=m==="ascending";let Ze=S.defaultSortDirection??y,jt=Ze==="ascending"?Cn:kn;Re&&(Ze=Xt?"descending":"ascending",jt=m==="ascending"?Cn:kn);const qt=o.createElement("span",{className:j(g.TableHeadingSortIcon,(S==null?void 0:S.alignment)==="end"&&g["TableHeadingSortIcon-heading-align-end"],Re&&g["TableHeadingSortIcon-visible"])},o.createElement(jt,{focusable:"false","aria-hidden":"true",className:g.TableHeadingSortSvg})),wt={onClick:()=>Te(w,Ze),className:j(g.TableHeadingSortButton,!Re&&(S==null?void 0:S.alignment)==="end"&&g["TableHeadingSortButton-heading-align-end"],Re&&(S==null?void 0:S.alignment)==="end"&&g["TableHeadingSortButton-heading-align-end-currently-sorted"],Pt&&!Jt&&(S==null?void 0:S.alignment)==="end"&&g["TableHeadingSortButton-heading-align-end-previously-sorted"]),tabIndex:ne?-1:0},Sn=o.createElement(an,wt,qt,o.createElement("span",{className:j(C&&ne&&S.tooltipContent&&g.TableHeadingTooltipUnderlinePlaceholder)},pe));if(!C||ne)return o.createElement("div",{className:g.SortableTableHeadingWithCustomMarkup},Sn);const ea=Re?m:Ze,En=C[w][ea];if(!S.tooltipContent)return o.createElement("div",{style:ht,className:j(S.paddingBlockEnd&&g["TableHeading-extra-padding-right"])},o.createElement(tt,Object.assign({},ge,{content:En,preferredPosition:"above"}),Sn));if(S.tooltipContent)return o.createElement("div",{className:j(g.SortableTableHeadingWithCustomMarkup,S.paddingBlockEnd&&g["TableHeading-extra-padding-right"]),style:ht},o.createElement(an,wt,o.createElement(tt,_e,o.createElement("span",{className:g.TableHeadingUnderline},pe)),o.createElement(tt,Object.assign({},ge,{content:En,preferredPosition:"above"}),qt)))}return S.tooltipContent?o.createElement("div",{style:ht,className:j(S.paddingBlockEnd&&g["TableHeading-extra-padding-right"])},o.createElement(tt,Object.assign({},_e,{activatorWrapper:"span"}),o.createElement("span",{className:j(g.TableHeadingUnderline,g.SortableTableHeaderWrapper)},pe))):o.createElement("div",{style:ht,className:j(S.paddingBlockEnd&&g["TableHeading-extra-padding-right"])},pe)}function Gt(S){Z(ce.Page,S)}function Kt(){if(!U||!je)return;const S=p??he.translate("Polaris.IndexTable.selectAllItems",{itemsLength:B,resourceNamePlural:F.plural.toLocaleLowerCase()});return{content:z===Ue?he.translate("Polaris.IndexTable.undo"):S,onAction:Je}}function kt(){Z(ce.All,!1)}}function Mr(t){return t.id?t.id:typeof t.title=="string"?t.title:""}function te({children:t,selectable:n=!0,itemCount:i,selectedItemsCount:a=0,resourceName:r,loading:l,hasMoreItems:p,condensed:u,onSelectionChange:d,paginatedSelectAllText:m,...y}){return o.createElement(o.Fragment,null,o.createElement(Sr,{selectable:n&&!u,itemCount:i,selectedItemsCount:a,resourceName:r,loading:l,hasMoreItems:p,condensed:u,onSelectionChange:d,paginatedSelectAllText:m},o.createElement(Nr,y,t)))}te.Cell=Qn;te.Row=jr;const Bt=class Bt{static set(n,i,a=Bt.DEFAULT_TTL){if(typeof window>"u")return;const r={data:i,timestamp:Date.now(),expiresAt:Date.now()+a};try{sessionStorage.setItem(n,JSON.stringify(r))}catch(l){console.warn("Shopify:",l)}}static get(n){if(typeof window>"u")return null;try{const i=sessionStorage.getItem(n);if(!i)return null;const a=JSON.parse(i);return Date.now()>a.expiresAt?(sessionStorage.removeItem(n),null):a.data}catch(i){return console.warn(":",i),sessionStorage.removeItem(n),null}}static clear(n){typeof window>"u"||sessionStorage.removeItem(n)}static clearAll(){typeof window>"u"||sessionStorage.clear()}static isExpired(n){if(typeof window>"u")return!0;try{const i=sessionStorage.getItem(n);if(!i)return!0;const a=JSON.parse(i);return Date.now()>a.expiresAt}catch{return!0}}static getInfo(n){if(typeof window>"u")return null;try{const i=sessionStorage.getItem(n);if(!i)return null;const a=JSON.parse(i);return{timestamp:a.timestamp,expiresAt:a.expiresAt}}catch{return null}}};yn(Bt,"DEFAULT_TTL",300*1e3);let bt=Bt;const _t={PRODUCTS:"shopify_products_cache"};function Yr({formAction:t,actionResult:n}){return n!=null&&n.updateResults||n!=null&&n.message,!0}function Lr({productId:t,onOptimistic:n,scheduleRevalidate:i}){const a=nn(),r=a.state!=="idle";return c.useEffect(()=>{var l;a.state==="idle"&&((l=a.data)!=null&&l.success)&&(i==null||i())},[a.state,a.data,i]),e.jsxs(a.Form,{method:"post",replace:!0,children:[e.jsx("input",{type:"hidden",name:"action",value:"unselectProducts"}),e.jsx("input",{type:"hidden",name:"productId",value:t}),e.jsx(ye,{size:"micro",variant:"tertiary",tone:"critical",loading:r,disabled:r,onClick:l=>{l.preventDefault(),n==null||n(t);const p=new FormData(l.currentTarget.form);a.submit(p,{method:"post"})},children:""})]})}function Br(t,n,i="all"){let a=t;return i==="k18"?a=t.filter(r=>r.title.includes("K18")||r.title.includes("18")):i==="in_stock"?a=t.filter(r=>(r.totalInventory||0)>0):i==="out_of_stock"&&(a=t.filter(r=>(r.totalInventory||0)===0)),n&&(a=a.filter(r=>r.title.toLowerCase().includes(n.toLowerCase())||r.handle.toLowerCase().includes(n.toLowerCase()))),a}function Hr(t,n,i=.93){const a=t*(1+n),r=t*i,l=Math.max(a,r);return n>=0?Math.ceil(l/10)*10:Math.floor(l/10)*10}function Wr({products:t,collections:n,goldPrice:i,platinumPrice:a,selectedProductIds:r,savedSelectedProducts:l,selectedCollectionIds:p,savedSelectedCollections:u,shopSetting:d,forceRefresh:m,cacheTimestamp:y}){var pt,Ct;const b=nn(),v=nn(),C=la(),R=c.useMemo(()=>{const s={};return(l||[]).forEach(f=>{s[f.productId]=f.metalType}),s},[l]),D=c.useMemo(()=>{const s={};return(u||[]).forEach(f=>{s[f.collectionId]=f.metalType}),s},[u]);c.useMemo(()=>new Set((l||[]).map(s=>s.productId)),[l]),c.useMemo(()=>new Set((u||[]).map(s=>s.collectionId)),[u]);const[E,L]=c.useState([]),[k,F]=c.useState({}),[de,ne]=c.useState(""),[U,ae]=c.useState("all"),[B,je]=c.useState("products"),[z,X]=c.useState("all"),[Z,he]=c.useState((d==null?void 0:d.minPricePct)||93),[fe,_]=c.useState(!1),[ue,q]=c.useState([]),[Q,re]=c.useState(!1),[Ve,me]=c.useState(null),[J,we]=c.useState(p||[]),[Ge,Me]=c.useState(D||{}),[N,I]=c.useState("plus"),[W,Se]=c.useState(.1),[le,Le]=c.useState([]),[rt,xe]=c.useState(""),[Ie,Be]=c.useState(!1),[lt,Ke]=c.useState({}),[it,st]=c.useState(0),[ot,Et]=c.useState({}),[Je,Xe]=c.useState(()=>new Set((l||[]).map(s=>s.productId))),ve=c.useCallback(s=>{Xe(f=>new Set([...f,...s]))},[]),Ae=c.useCallback(s=>{Xe(f=>{const h=new Set(f);return s.forEach(x=>h.delete(x)),h})},[]),He=c.useRef(null),qe=c.useCallback(()=>{He.current&&clearTimeout(He.current),He.current=setTimeout(()=>{C.revalidate(),He.current=null},500)},[C]);c.useEffect(()=>()=>{He.current&&clearTimeout(He.current)},[]),c.useEffect(()=>{if(t&&t.length>0&&(bt.set(_t.PRODUCTS,t),re(!1),me(new Date(y)),r&&r.length>0)){const s=t.filter(f=>r.includes(f.id));if(L(s),l&&l.length>0){const f={};l.forEach(h=>{f[h.productId]=h.metalType}),F(f)}}},[t,r,m,y]),c.useEffect(()=>{var s,f,h,x;if(console.log(" Updater state changed:",{state:v.state,dataExists:!!v.data,isManualUpdating:Ie,hasUpdateResults:!!((s=v.data)!=null&&s.updateResults),hasSummary:!!((f=v.data)!=null&&f.summary)}),Ie&&((h=v.data)!=null&&h.updateResults)&&((x=v.data)!=null&&x.summary)&&(console.log(" Clearing manual updating state and timeout due to completion"),Be(!1),window.manualUpdateTimeoutId&&(clearTimeout(window.manualUpdateTimeoutId),window.manualUpdateTimeoutId=null)),v.state==="idle"&&Ie&&(console.log(" Clearing manual updating state due to idle state"),Be(!1),window.manualUpdateTimeoutId&&(clearTimeout(window.manualUpdateTimeoutId),window.manualUpdateTimeoutId=null)),v.data)if(v.data.updateResults&&v.data.summary){console.log(" Manual update completed:",v.data);const{summary:T}=v.data,O=T.successCount||0,M=T.failureCount||0,A=O+M;if(O>0){const ee=M>0?`: ${O}/${A}`:`: ${O}`;xe(ee),setTimeout(()=>xe(""),5e3)}const V={};if(v.data.updateResults.forEach(ee=>{ee.success&&ee.confirmedPrice!==void 0&&(V[ee.variantId]=ee.confirmedPrice)}),Object.keys(V).length>0){console.log(" Applying confirmed prices from server:",V),Ke(se=>({...se,...V}));const ee=Date.now(),ie=Object.fromEntries(Object.entries(V).map(([se,Fe])=>[se,{price:Fe,until:ee+180*1e3}]));Et(se=>({...se,...ie}))}Le([])}else v.data.error&&(console.error(" Manual update error:",v.data.error),xe(`: ${v.data.error}`),setTimeout(()=>xe(""),5e3))},[v.state,v.data,Ie]),c.useEffect(()=>{const s=setInterval(()=>{const f=Date.now();Et(h=>{const x={...h};let T=!1;for(const[O,M]of Object.entries(x))M.until<=f&&(delete x[O],T=!0,console.log(` Cleaned expired overlay for variant: ${O}`));return T?x:h})},5e3);return()=>clearInterval(s)},[]),c.useEffect(()=>{if(b.state==="idle"&&b.data){if(b.data.savedProducts){const s=b.data.savedProducts.map(f=>f.productId);L(f=>f.filter(h=>!s.includes(h.id))),ve(s)}if(b.data.savedCollection){const{collectionId:s,metalType:f}=b.data.savedCollection;we(h=>[...h.filter(x=>x!==s),s]),Me(h=>({...h,[s]:f}))}if(b.data.unselectedProducts){const s=new Set(b.data.unselectedProducts);L(f=>f.filter(h=>!s.has(h.id))),F(f=>{const h={...f};return b.data.unselectedProducts.forEach(x=>delete h[x]),h}),Ae(b.data.unselectedProducts),qe()}if(b.data.unselectedCollection){const s=b.data.unselectedCollection;we(f=>f.filter(h=>h!==s)),Me(f=>{const h={...f};return delete h[s],h}),qe()}}},[b.state,b.data,ve,Ae,qe]);const Ye=c.useCallback(()=>{bt.clear(_t.PRODUCTS),re(!1),C.revalidate()},[C]),Y=Br(t,de,U),Wt=c.useCallback(async(s,f)=>{const h=Date.now()+1e4;for(;Date.now()<h;)try{if((await(await fetch("/api/verify-variants",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({variantIds:s,expectedPrices:f}),cache:"no-store"})).json()).verified)return!0;await new Promise(O=>setTimeout(O,500))}catch(x){console.error("Verification polling error:",x);break}return!1},[]);c.useCallback(async s=>{const f=Date.now()+1e4;for(;Date.now()<f;)try{const h=Object.keys(s),x=[];h.forEach(M=>{var V,ee;const A=Y.find(ie=>ie.id===M);(ee=(V=A==null?void 0:A.variants)==null?void 0:V.edges)!=null&&ee[0]&&x.push(A.variants.edges[0].node.id)});const O=await(await fetch(`/api/variants?ids=${x.join(",")}`,{cache:"no-store"})).json();if(O.variants&&O.variants.every(A=>{const V=s[A.productId];return V&&Math.abs(A.price-V)<1}))return console.log(" All prices verified on server"),!0;await new Promise(M=>setTimeout(M,500))}catch(h){console.error("Polling error:",h);break}return console.log(" Polling timeout reached"),!1},[Y]);const ct=c.useCallback((s,f)=>{const h=t.find(x=>x.id===s);f?L(x=>[...x,h]):(L(x=>x.filter(T=>T.id!==s)),F(x=>{const T={...x};return delete T[s],T}))},[t]),dt=c.useCallback(s=>{s?L(Y):(L([]),F({}))},[Y]),Rt=c.useCallback((s,f)=>{if(f==="none")return;F(x=>({...x,[s]:f})),ve([s]);const h=new FormData;h.append("action","saveSingleProduct"),h.append("productId",s),h.append("metalType",f),b.submit(h,{method:"post"})},[b,ve]),Dt=c.useCallback((s,f)=>{if(we(h=>f?[...new Set([...h,s])]:h.filter(x=>x!==s)),!f){const h=new FormData;h.append("action","unselectCollection"),h.append("collectionId",s),b.submit(h,{method:"post"})}},[b]),Ft=c.useCallback((s,f)=>{if(f==="none")return;Me(x=>({...x,[s]:f}));const h=new FormData;h.append("action","saveCollectionSelection"),h.append("collectionId",s),h.append("metalType",f),b.submit(h,{method:"post"})},[b]),yt=c.useCallback(s=>{const f=E.filter(T=>!r.includes(T.id));if(f.length===0)return;const h={};f.forEach(T=>{h[T.id]=s}),F(T=>({...T,...h})),ve(f.map(T=>T.id));const x=new FormData;x.append("action","saveSelection"),f.forEach(T=>{x.append("productId",T.id),x.append("metalType",s)}),b.submit(x,{method:"post"})},[E,r,b,ve]),Ot=c.useCallback(()=>{const s=E.filter(h=>!k[h.id]);if(s.length>0){alert(`
${s.map(h=>h.title).join(`
`)}`);return}ve(E.map(h=>h.id));const f=new FormData;f.append("action","saveSelection"),E.forEach(h=>{f.append("productId",h.id),f.append("metalType",k[h.id])}),b.submit(f,{method:"post"})},[E,k,b,ve]);c.useCallback(s=>{L(h=>h.filter(x=>x.id!==s)),F(h=>{const x={...h};return delete x[s],x}),Ae([s]);const f=new FormData;f.append("action","unselectProducts"),f.append("productId",s),b.submit(f,{method:"post"})},[b,Ae]);const $t=c.useCallback(()=>{const s=E.filter(h=>Je.has(h.id)).map(h=>h.id);if(s.length===0)return;Ae(s),L(h=>h.filter(x=>!s.includes(x.id))),F(h=>{const x={...h};return s.forEach(T=>delete x[T]),x});const f=new FormData;f.append("action","unselectProducts"),s.forEach(h=>f.append("productId",h)),b.submit(f,{method:"post"})},[E,Je,Ae,b]),Ut=c.useCallback(()=>{if(E.length===0)return;const s=E.map(f=>{const h=k[f.id]||"gold",x=h==="gold"?i:a;return x?{...f,metalType:h,variants:f.variants.edges.map(T=>{var V;const O=T.node,M=Number(((V=O.price)==null?void 0:V.amount)??0),A=Hr(M,x.ratio,Z/100);return{...O,currentPrice:M,newPrice:A,priceChange:A-M,changed:A!==M}})}:{...f,metalType:h,error:`${h==="gold"?"":""}`,variants:f.variants.edges.map(T=>({...T.node,currentPrice:parseFloat(T.node.price),newPrice:parseFloat(T.node.price),priceChange:0,changed:!1}))}});q(s),_(!0)},[E,i,a,k,Z]),zt=c.useCallback(()=>{const s=E.some(x=>(k[x.id]||"gold")==="gold"),f=E.some(x=>k[x.id]==="platinum");if(s&&!i||f&&!a)return;const h=E.map(x=>x.id);v.submit({action:"updatePrices",selectedProductIds:JSON.stringify(h),minPriceRate:Z.toString()},{method:"post"}),_(!1)},[E,i,a,k,Z,v]),Tt=c.useCallback((s,f)=>{Le(f?h=>[...h,s]:h=>h.filter(x=>x!==s))},[]),ut=c.useCallback(s=>{Le(s?Y.map(f=>f.id):[])},[Y]),Vt=c.useCallback(()=>{if(le.length===0)return;console.log(" executeManualPriceUpdate called, setting isManualUpdating to true"),Be(!0);const s=setTimeout(()=>{console.warn(" Manual update timeout - forcing loading to stop"),Be(!1)},3e4);window.manualUpdateTimeoutId=s;const f=N==="plus"?W/100:-(W/100);console.log(" Starting manual price update:",{manualSelectedProducts:le,adjustmentRatio:f});const h={};le.forEach(M=>{var V,ee;const A=Y.find(ie=>ie.id===M);console.log(" Product found for optimistic update:",{productId:M,product:A==null?void 0:A.title,variants:A==null?void 0:A.variants}),((ee=(V=A==null?void 0:A.variants)==null?void 0:V.edges)==null?void 0:ee.length)>0?A.variants.edges.forEach(({node:ie})=>{const se=Math.round(Number(ie.price??0));function Fe($,Te,Ce=.93){const Gt=$*(1+Te),Kt=$*Ce,kt=Math.max(Gt,Kt);return Te>=0?Math.ceil(kt/10)*10:Math.floor(kt/10)*10}const Oe=Fe(se,f);console.log(" Variant price calculation:",{variantId:ie.id,currentPrice:se,adjustmentRatio:f,newPrice:Oe}),h[ie.id]=Oe}):console.warn(" No variants found for product:",M)}),Ke(M=>{const A={...M,...h};return console.log(" Optimistic price updates applied:",{previous:M,updates:h,newState:A}),A}),v.submit({action:"manualUpdatePrices",selectedProductIds:JSON.stringify(le),adjustmentRatio:f.toString()},{method:"post"});const x=Object.keys(h).map(M=>M);Wt(x,h).then(M=>{M?(console.log(" Server verification successful - extending TTL"),setTimeout(()=>{console.log(" Clearing optimistic updates after verification"),Ke({}),bt.clear(_t.PRODUCTS),C.revalidate()},6e4)):(console.log(" Server verification failed - extending protection"),setTimeout(()=>{Ke({})},5e3))});let T=10;st(T);const O=setInterval(()=>{T--,st(T),T<=0&&(clearInterval(O),st(0))},1e3)},[le,N,W,v,Y,C,Be]);return e.jsx(On,{fullWidth:!0,title:"",subtitle:B==="products"?`${Y.length}${t.length}`:`${(n==null?void 0:n.length)??0}`,primaryAction:{content:"",onAction:Ut,disabled:B!=="products"||E.length===0||E.some(s=>(k[s.id]||"gold")==="gold")&&!i||E.some(s=>k[s.id]==="platinum")&&!a,loading:B==="products"&&v.state==="submitting"},secondaryActions:[{content:"",icon:Nt,onAction:Ye,loading:C.state==="loading"}],children:e.jsxs(Pe,{children:[e.jsxs(Pe.Section,{children:[e.jsxs(Pe,{children:[e.jsxs(Pe.Section,{children:[i&&e.jsx(Ee,{children:e.jsx("div",{style:{padding:"16px",background:"#fbbf24",borderRadius:"8px"},children:e.jsxs(be,{gap:"300",children:[e.jsxs(P,{align:"space-between",children:[e.jsxs(P,{gap:"200",blockAlign:"center",children:[e.jsx("span",{style:{fontSize:"20px"},children:""}),e.jsx("h3",{style:{color:"white"},children:" "})]}),e.jsx(G,{tone:i.changeDirection==="up"?"critical":i.changeDirection==="down"?"success":"info",children:i.changeDirection==="up"?"":i.changeDirection==="down"?"":""})]}),e.jsxs(P,{gap:"400",wrap:!0,children:[e.jsxs("div",{children:[e.jsx("p",{style:{color:"white",margin:0,fontSize:"12px"},children:""}),e.jsx("h4",{style:{color:"white",margin:"4px 0"},children:i.retailPriceFormatted})]},"gold-retail"),e.jsxs("div",{children:[e.jsx("p",{style:{color:"white",margin:0,fontSize:"12px"},children:""}),e.jsx("h4",{style:{color:"white",margin:"4px 0"},children:i.change})]},"gold-change"),e.jsxs("div",{children:[e.jsx("p",{style:{color:"white",margin:0,fontSize:"12px"},children:""}),e.jsx("h4",{style:{color:"white",margin:"4px 0"},children:i.buyPriceFormatted||""})]},"gold-buy"),e.jsxs("div",{children:[e.jsx("p",{style:{color:"white",margin:0,fontSize:"12px"},children:""}),e.jsx("h4",{style:{color:"white",margin:"4px 0"},children:i.buyChangePercent||"0.00%"})]},"gold-buy-change"),e.jsxs("div",{children:[e.jsx("p",{style:{color:"white",margin:0,fontSize:"12px"},children:""}),e.jsxs("h4",{style:{color:"white",margin:"4px 0"},children:[i.percentage,"%"]})]},"gold-ratio")]}),e.jsx("div",{style:{marginTop:"12px"},children:e.jsxs("p",{style:{color:"white",margin:0,fontSize:"11px"},children:[": ",e.jsx("a",{href:"https://gold.tanaka.co.jp/commodity/souba/",target:"_blank",rel:"noopener noreferrer",style:{color:"white",textDecoration:"underline"},children:""})]})}),e.jsxs("p",{style:{color:"white",margin:0,fontSize:"12px"},suppressHydrationWarning:!0,children:[": ",new Date(i.lastUpdated).toLocaleString("ja-JP")]})]})})}),!i&&e.jsx(ke,{tone:"critical",children:""})]}),e.jsxs(Pe.Section,{children:[a&&e.jsx(Ee,{children:e.jsx("div",{style:{padding:"16px",background:"#94a3b8",borderRadius:"8px"},children:e.jsxs(be,{gap:"300",children:[e.jsxs(P,{align:"space-between",children:[e.jsxs(P,{gap:"200",blockAlign:"center",children:[e.jsx("span",{style:{fontSize:"20px"},children:""}),e.jsx("h3",{style:{color:"white"},children:" "})]}),e.jsx(G,{tone:a.changeDirection==="up"?"critical":a.changeDirection==="down"?"success":"info",children:a.changeDirection==="up"?"":a.changeDirection==="down"?"":""})]}),e.jsxs(P,{gap:"400",wrap:!0,children:[e.jsxs("div",{children:[e.jsx("p",{style:{color:"white",margin:0,fontSize:"12px"},children:""}),e.jsx("h4",{style:{color:"white",margin:"4px 0"},children:a.retailPriceFormatted})]},"platinum-retail"),e.jsxs("div",{children:[e.jsx("p",{style:{color:"white",margin:0,fontSize:"12px"},children:""}),e.jsx("h4",{style:{color:"white",margin:"4px 0"},children:a.change})]},"platinum-change"),e.jsxs("div",{children:[e.jsx("p",{style:{color:"white",margin:0,fontSize:"12px"},children:""}),e.jsx("h4",{style:{color:"white",margin:"4px 0"},children:a.buyPriceFormatted||""})]},"platinum-buy"),e.jsxs("div",{children:[e.jsx("p",{style:{color:"white",margin:0,fontSize:"12px"},children:""}),e.jsx("h4",{style:{color:"white",margin:"4px 0"},children:a.buyChangePercent||"0.00%"})]},"platinum-buy-change"),e.jsxs("div",{children:[e.jsx("p",{style:{color:"white",margin:0,fontSize:"12px"},children:""}),e.jsxs("h4",{style:{color:"white",margin:"4px 0"},children:[a.percentage,"%"]})]},"platinum-ratio")]}),e.jsx("div",{style:{marginTop:"12px"},children:e.jsxs("p",{style:{color:"white",margin:0,fontSize:"11px"},children:[": ",e.jsx("a",{href:"https://gold.tanaka.co.jp/commodity/souba/d-platinum.php",target:"_blank",rel:"noopener noreferrer",style:{color:"white",textDecoration:"underline"},children:""})]})}),e.jsxs("p",{style:{color:"white",margin:0,fontSize:"12px"},suppressHydrationWarning:!0,children:[": ",new Date(a.lastUpdated).toLocaleString("ja-JP")]})]})})}),!a&&e.jsx(ke,{tone:"critical",children:""})]})]}),!i&&!a&&e.jsx(ke,{tone:"critical",children:""})]}),e.jsx(Pe.Section,{children:e.jsx(Ee,{children:e.jsxs(be,{gap:"400",children:[e.jsxs(P,{align:"space-between",children:[e.jsx("h3",{children:""}),e.jsx(ye,{icon:Nt,variant:"tertiary",onClick:Ye,loading:C.state==="loading",children:""})]}),e.jsx("div",{children:e.jsxs(H,{variant:"bodySm",tone:"subdued",suppressHydrationWarning:!0,children:[": ",Ve?Ve.toLocaleString("ja-JP"):"...",Q&&e.jsx(G,{tone:"info",size:"small",children:""})]})}),e.jsxs(P,{gap:"400",children:[e.jsx("div",{style:{minWidth:"180px"},children:e.jsx(At,{label:"",options:[{label:"",value:"products"},{label:"",value:"collections"}],value:B,onChange:je})}),B==="products"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{flex:1},children:e.jsx(Yt,{label:"",value:de,onChange:ne,placeholder:"...",clearButton:!0,onClearButtonClick:()=>ne("")})}),e.jsx("div",{style:{minWidth:"150px"},children:e.jsx(At,{label:"",options:[{label:"",value:"all"},{label:"K18",value:"k18"},{label:"",value:"in_stock"},{label:"",value:"out_of_stock"}],value:U,onChange:ae})})]}),B==="collections"&&e.jsx("div",{style:{minWidth:"200px"},children:e.jsx(H,{variant:"bodySm",tone:"subdued",children:""})})]}),e.jsx(Yt,{label:" (%)",type:"number",value:Z.toString(),onChange:s=>he(parseInt(s)||93),suffix:"%",helpText:": 93% = 7%",min:"50",max:"100"}),e.jsxs(be,{gap:"300",children:[e.jsxs(P,{gap:"300",children:[e.jsx(ye,{onClick:()=>dt(!0),disabled:Y.length===0,size:"large",children:""},"select-all"),e.jsx(ye,{onClick:()=>dt(!1),disabled:E.length===0,size:"large",children:""},"deselect-all"),e.jsxs(ye,{onClick:$t,tone:"critical",disabled:E.filter(s=>Je.has(s.id)).length===0||b.state==="submitting",size:"large",children:[" ",E.filter(s=>Je.has(s.id)).length," "]},"bulk-unselect"),e.jsx(ye,{onClick:Ot,disabled:b.state==="submitting"||E.length===0||E.some(s=>!k[s.id]),variant:"primary",size:"large",children:""},"save-selection")]}),E.length>0&&e.jsx(Ee,{children:e.jsxs(be,{gap:"200",children:[e.jsxs(P,{gap:"300",blockAlign:"center",children:[e.jsxs(H,{variant:"bodyMd",as:"span",children:["(",E.filter(s=>!r.includes(s.id)).length,"):"]}),e.jsx(ye,{onClick:()=>yt("gold"),disabled:E.filter(s=>!r.includes(s.id)).length===0,tone:"warning",children:" "}),e.jsx(ye,{onClick:()=>yt("platinum"),disabled:E.filter(s=>!r.includes(s.id)).length===0,tone:"info",children:" "})]}),E.filter(s=>r.includes(s.id)).length>0&&e.jsxs(H,{variant:"bodySm",tone:"subdued",children:["",E.filter(s=>r.includes(s.id)).length,""]})]})})]}),E.length>0&&e.jsx(Ee,{children:e.jsxs(be,{gap:"300",children:[e.jsxs(P,{align:"space-between",children:[e.jsxs("h4",{children:[" (",E.length,")"]}),e.jsxs(P,{gap:"200",children:[e.jsxs(G,{tone:"warning",children:[" : ",E.filter(s=>k[s.id]==="gold").length,""]}),e.jsxs(G,{tone:"info",children:[" : ",E.filter(s=>k[s.id]==="platinum").length,""]}),e.jsxs(G,{tone:"critical",children:[" : ",E.filter(s=>!k[s.id]).length,""]})]})]}),e.jsx(be,{gap:"200",children:E.map((s,f)=>{const h=k[s.id];return e.jsxs(P,{gap:"200",blockAlign:"center",children:[e.jsx("span",{style:{fontSize:"14px"},children:h==="gold"?"":h==="platinum"?"":""}),e.jsx(H,{variant:"bodySm",children:s.title}),h?e.jsx(G,{tone:h==="gold"?"warning":"info",size:"small",children:h==="gold"?"":""}):e.jsx(G,{tone:"critical",size:"small",children:""})]},`selected-${s.id}-${f}`)})}),E.filter(s=>!k[s.id]).length>0&&e.jsxs(ke,{tone:"warning",children:[e.jsx("strong",{children:""}),"  "]})]})}),r&&r.length>0&&e.jsxs(ke,{tone:"success",children:[" ",e.jsxs("strong",{children:[r.length,""]})," "]}),((pt=b.data)==null?void 0:pt.message)&&e.jsx(ke,{tone:"success",children:b.data.message})]})})}),e.jsx(Pe.Section,{children:e.jsx(Ee,{children:e.jsxs(be,{gap:"400",children:[e.jsxs(P,{align:"space-between",children:[e.jsx("h3",{children:""}),e.jsx(G,{tone:"info",children:""})]}),rt&&e.jsx(ke,{tone:"success",onDismiss:()=>xe(""),children:rt}),e.jsxs(P,{gap:"400",wrap:!0,children:[e.jsxs("div",{style:{minWidth:"120px"},children:[e.jsx(H,{variant:"bodyMd",as:"p",children:""}),e.jsxs(P,{gap:"200",blockAlign:"center",children:[e.jsxs("div",{children:[e.jsx("input",{type:"radio",id:"plus",name:"direction",value:"plus",checked:N==="plus",onChange:()=>I("plus")}),e.jsx("label",{htmlFor:"plus",children:"+ "})]},"plus-radio"),e.jsxs("div",{children:[e.jsx("input",{type:"radio",id:"minus",name:"direction",value:"minus",checked:N==="minus",onChange:()=>I("minus")}),e.jsx("label",{htmlFor:"minus",children:"- "})]},"minus-radio")]})]}),e.jsx("div",{style:{minWidth:"150px"},children:e.jsx(Yt,{label:"",value:W.toString(),onChange:s=>{const f=parseFloat(s);!isNaN(f)&&f>=0&&f<=10?Se(f):(s===""||s==="0")&&Se(0)},type:"number",suffix:"%",min:0,max:10,step:.1,helpText:"010%"})}),e.jsx("div",{children:e.jsxs(H,{variant:"bodyMd",as:"p",tone:"subdued",children:[": ",N==="plus"?"+":"-",W,"% 10,000  ",(1e4*(1+(N==="plus"?W:-W)/100)).toLocaleString(),""]})})]}),e.jsxs(P,{gap:"300",children:[e.jsx(ye,{onClick:()=>ut(!0),disabled:Y.length===0,children:""}),e.jsx(ye,{onClick:()=>ut(!1),disabled:le.length===0,children:""}),e.jsx(ye,{onClick:()=>{console.log(" Manual update button clicked",{isManualUpdating:Ie,selectedCount:le.length}),Vt()},disabled:le.length===0||Ie,variant:"primary",tone:"critical",loading:Ie,children:Ie?"...":` (${le.length})`})]}),le.length>0&&e.jsx(Ee,{children:e.jsxs(be,{gap:"200",children:[e.jsxs(H,{variant:"bodyMd",as:"p",children:[" (",le.length,")"]}),e.jsx("div",{style:{maxHeight:"150px",overflowY:"auto"},children:e.jsx(be,{gap:"100",children:le.map((s,f)=>{const h=t.find(x=>x.id===s);return h?e.jsxs(P,{gap:"200",blockAlign:"center",children:[e.jsx(nt,{checked:!0,onChange:x=>Tt(s,x)}),e.jsxs("div",{style:{flex:1},children:[e.jsx(H,{variant:"bodySm",children:h.title}),e.jsx(H,{variant:"caption",tone:"subdued",children:s})]})]},`manual-${s}-${f}`):null})})})]})})]})})}),e.jsx(Pe.Section,{children:e.jsxs(Ee,{children:[B==="collections"&&((n==null?void 0:n.length)??0)===0&&e.jsx(ke,{tone:"info",children:""}),e.jsx("div",{style:{width:"100%",overflowX:"auto",overflowAnchor:"none"},children:e.jsx("div",{style:{minWidth:2140},children:e.jsx(te,{resourceName:{singular:B==="products"?"":"",plural:B==="products"?"":""},itemCount:B==="products"?Y.length:(n==null?void 0:n.length)||0,selectedItemsCount:E.length,onSelectionChange:s=>{s==="all"?dt(!0):s==="none"&&dt(!1)},headings:B==="products"?[{title:""},{title:""},{title:""},{title:""},{title:""},{title:""},{title:""},{title:""},{title:""}]:[{title:""},{title:""},{title:""},{title:""},{title:""}],selectable:!1,children:B==="products"?Y.map((s,f)=>{var Oe;const h=E.some($=>$.id===s.id),x=s.variants.edges,T=Date.now(),O=x.map(({node:$})=>{const Te=$.id,Ce=ot[Te];return Ce&&Ce.until>T?{price:Ce.price,status:" ()"}:lt[Te]!=null?{price:lt[Te],status:` (${it>0?` - ${it}`:""})`}:{price:Math.round(Number($.price??0)),status:""}}),M=O.map($=>$.price),A=O.some($=>$.status!==""),V=A&&((Oe=O.find($=>$.status!==""))==null?void 0:Oe.status)||"",ee=O.length>1?`${Math.min(...M).toLocaleString()} - ${Math.max(...M).toLocaleString()}${V}`:`${(M[0]??0).toLocaleString()}${V}`;A&&console.log(` Special price display for ${s.title}:`,{productId:s.id,variantDisplayPrices:O,finalDisplay:ee});const ie=k[s.id],se=Je.has(s.id),Fe=k[s.id]??R[s.id]??"none";return e.jsxs(te.Row,{id:s.id,children:[e.jsx(te.Cell,{children:e.jsx(K,{minWidth:"60px",maxWidth:"60px",children:e.jsx(nt,{checked:h,onChange:$=>ct(s.id,$)})})}),e.jsx(te.Cell,{children:e.jsx(K,{minWidth:"80px",maxWidth:"80px",children:e.jsx(nt,{checked:le.includes(s.id),onChange:$=>Tt(s.id,$)})})}),e.jsx(te.Cell,{children:e.jsx(K,{minWidth:"480px",maxWidth:"720px",children:e.jsxs(P,{gap:"200",blockAlign:"center",children:[h&&ie&&e.jsx("span",{style:{fontSize:"16px"},children:ie==="gold"?"":""}),e.jsx(tt,{content:s.title,dismissOnMouseOut:!0,children:e.jsx(H,{as:"span",variant:"bodySm",style:{display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden",whiteSpace:"normal",wordBreak:"break-word"},children:s.title})}),h&&ie&&e.jsx(G,{tone:ie==="gold"?"warning":"info",size:"small",children:ie==="gold"?"":"Pt"}),h&&!ie&&!se&&e.jsx(G,{tone:"critical",size:"small",children:""}),se&&e.jsx(G,{tone:"success",size:"small",children:""})]})})}),e.jsx(te.Cell,{children:e.jsx(K,{minWidth:"100px",maxWidth:"120px",children:e.jsx(G,{status:s.status==="ACTIVE"?"success":"critical",children:s.status})})}),e.jsx(te.Cell,{children:e.jsx(K,{minWidth:"140px",maxWidth:"200px",children:e.jsx(H,{variant:"bodySm",children:ee})})}),e.jsx(te.Cell,{children:e.jsx(K,{minWidth:"100px",maxWidth:"140px",children:e.jsx(H,{variant:"bodySm",children:x.length})})}),e.jsx(te.Cell,{children:e.jsx(K,{minWidth:"120px",maxWidth:"140px",children:e.jsxs(P,{gap:"100",blockAlign:"center",children:[e.jsx(H,{variant:"bodySm",fontWeight:"medium",children:s.totalInventory||0}),s.totalInventory>0?e.jsx(G,{status:"success",size:"small",children:""}):e.jsx(G,{status:"critical",size:"small",children:""})]})})}),e.jsx(te.Cell,{children:e.jsx(K,{minWidth:"140px",maxWidth:"180px",children:s.productType?e.jsx(G,{tone:"info",size:"small",children:s.productType}):e.jsx(H,{variant:"bodySm",tone:"subdued",children:""})})}),e.jsx(te.Cell,{children:e.jsx(K,{minWidth:"360px",maxWidth:"420px",children:h||se?e.jsxs("div",{children:[e.jsx(At,{label:"",labelHidden:!0,options:[{label:"...",value:"none",disabled:!0},{label:" ",value:"gold"},{label:" ",value:"platinum"}],value:Fe,onChange:$=>Rt(s.id,$),placeholder:"",disabled:se&&!h}),Fe==="none"&&h&&!se&&e.jsx("div",{style:{marginTop:"4px"},children:e.jsx(H,{variant:"bodySm",tone:"critical",children:""})}),se&&e.jsx("div",{style:{marginTop:"4px"},children:e.jsxs(P,{gap:"100",blockAlign:"center",children:[e.jsxs(H,{variant:"bodySm",tone:"subdued",children:["",h?"":""]}),e.jsx(Lr,{productId:s.id,onOptimistic:$=>{L(Te=>Te.filter(Ce=>Ce.id!==$)),F(Te=>{const Ce={...Te};return delete Ce[$],Ce}),Ae([$])},scheduleRevalidate:qe})]})})]}):e.jsx(H,{variant:"bodySm",tone:"subdued",children:"-"})})})]},`product-${s.id}-${f}`)}):(n==null?void 0:n.map((s,f)=>{const h=J.includes(s.id),x=Ge[s.id]||"none";return e.jsxs(te.Row,{id:s.id,children:[e.jsx(te.Cell,{children:e.jsx(K,{minWidth:"60px",maxWidth:"60px",children:e.jsx(nt,{checked:h,onChange:T=>Dt(s.id,T)})})}),e.jsx(te.Cell,{children:e.jsx(K,{minWidth:"320px",maxWidth:"480px",children:e.jsxs(P,{gap:"200",blockAlign:"center",children:[e.jsx("span",{style:{fontSize:"16px"},children:""}),e.jsx(tt,{content:s.title,dismissOnMouseOut:!0,children:e.jsx(H,{variant:"bodyMd",fontWeight:"medium",style:{display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden",whiteSpace:"normal",wordBreak:"break-word"},children:s.title})}),h&&x&&x!=="none"&&e.jsx(G,{tone:x==="gold"?"warning":"info",size:"small",children:x==="gold"?"":"Pt"})]})})}),e.jsx(te.Cell,{children:e.jsx(K,{minWidth:"120px",maxWidth:"160px",children:e.jsxs(G,{tone:"info",children:[s.productsCount??"-",""]})})}),e.jsx(te.Cell,{children:e.jsx(K,{minWidth:"150px",maxWidth:"200px",children:e.jsx(H,{variant:"bodySm",tone:"subdued",children:s.handle})})}),e.jsx(te.Cell,{children:e.jsx(K,{minWidth:"280px",maxWidth:"340px",children:h?e.jsx(At,{label:"",labelHidden:!0,options:[{label:"...",value:"none",disabled:!0},{label:" ",value:"gold"},{label:" ",value:"platinum"}],value:x,onChange:T=>Ft(s.id,T),placeholder:""}):e.jsx(H,{variant:"bodySm",tone:"subdued",children:"-"})})})]},`collection-${s.id}-${f}`)}))||[]})})})]})}),e.jsx(dn,{open:fe,onClose:()=>_(!1),title:"",primaryAction:{content:"",onAction:zt,loading:v.state==="submitting"},secondaryActions:[{content:"",onAction:()=>_(!1)}],large:!0,children:e.jsx(dn.Section,{children:e.jsx(be,{gap:"400",children:ue.map((s,f)=>e.jsx(Ee,{children:e.jsxs(be,{gap:"300",children:[e.jsxs(P,{align:"space-between",children:[e.jsx("h4",{children:s.title}),e.jsx(G,{tone:s.metalType==="gold"?"warning":"info",children:s.metalType==="gold"?"":""})]}),s.error?e.jsx(ke,{tone:"critical",children:s.error}):s.variants.map((h,x)=>e.jsxs(P,{align:"space-between",children:[e.jsx("span",{children:h.title||""}),e.jsxs(P,{gap:"200",children:[e.jsxs("span",{children:["",h.currentPrice,"  ",h.newPrice]}),h.changed&&e.jsxs(G,{tone:h.priceChange>0?"warning":"success",children:[h.priceChange>0?"+":"",h.priceChange,""]})]})]},`variant-${h.id}-${x}`))]})},`preview-${s.id}-${f}`))})})}),((Ct=v.data)==null?void 0:Ct.updateResults)&&e.jsx(Pe.Section,{children:e.jsx(Ee,{children:e.jsxs(be,{gap:"400",children:[e.jsx("h3",{children:""}),v.data.summary&&e.jsx(Ee,{children:e.jsxs(P,{gap:"400",children:[e.jsxs("div",{children:[": ",e.jsx("strong",{children:v.data.summary.total}),""]}),e.jsxs("div",{children:[": ",e.jsx("strong",{children:v.data.summary.success}),""]}),e.jsxs("div",{children:[": ",e.jsx("strong",{children:v.data.summary.failed}),""]})]})}),v.data.error&&e.jsx(ke,{tone:"critical",children:v.data.error}),v.data.message&&e.jsx(ke,{tone:"info",children:v.data.message}),v.data.updateResults.map((s,f)=>{var h,x;return e.jsx(ke,{tone:s.success?"success":"critical",children:s.success?`${s.productTitle} ${s.variantTitle?`(${s.variantTitle})`:""}: ${(h=s.oldPrice)==null?void 0:h.toLocaleString()}  ${(x=s.newPrice)==null?void 0:x.toLocaleString()} ${s.adjustmentRatio?`(${s.adjustmentRatio>0?"+":""}${(s.adjustmentRatio*100).toFixed(1)}%)`:""}`:`Product ${s.productId} / Variant ${s.variantId}: ${s.error}`},`result-${f}-${s.variantId||s.productId}`)})]})})})]})})}function Zr(){const t=aa(),{goldPrice:n,platinumPrice:i,selectedProductIds:a,savedSelectedProducts:r,selectedCollectionIds:l,savedSelectedCollections:p,shopSetting:u,forceRefresh:d,cacheTimestamp:m}=t;return e.jsx(c.Suspense,{fallback:e.jsx(On,{fullWidth:!0,title:"",subtitle:"...",secondaryActions:[{content:"",icon:Nt,onAction:()=>{bt.clear(_t.PRODUCTS),window.location.search="?refresh=true"}}],children:e.jsxs(Pe,{children:[e.jsx(Pe.Section,{children:n&&e.jsx(Ee,{children:e.jsxs(be,{gap:"400",children:[e.jsxs(P,{align:"space-between",children:[e.jsx("h3",{children:" "}),e.jsx(G,{tone:n.changeDirection==="up"?"attention":n.changeDirection==="down"?"success":"info",children:n.changeDirection==="up"?"":n.changeDirection==="down"?"":""})]}),e.jsxs(P,{gap:"600",children:[e.jsxs("div",{children:[e.jsx("p",{children:""}),e.jsx("h4",{children:n.retailPriceFormatted})]}),e.jsxs("div",{children:[e.jsx("p",{children:""}),e.jsx("h4",{children:n.change})]}),e.jsxs("div",{children:[e.jsx("p",{children:""}),e.jsx("h4",{children:n.buyPriceFormatted||""})]}),e.jsxs("div",{children:[e.jsx("p",{children:""}),e.jsx("h4",{children:n.buyChangePercent||"0.00%"})]})]}),e.jsx("div",{children:e.jsxs("p",{children:[e.jsxs("strong",{children:[": ",n.percentage,"%"]}),""]})}),e.jsxs("p",{suppressHydrationWarning:!0,children:[": ",new Date(n.lastUpdated).toLocaleString("ja-JP")]})]})})}),e.jsx(Pe.Section,{children:e.jsx(Ee,{children:e.jsx(be,{gap:"400",children:e.jsxs("div",{style:{textAlign:"center",padding:"60px 20px"},children:[e.jsx(pn,{size:"large"}),e.jsx("p",{style:{marginTop:"20px"},children:"..."}),e.jsx(H,{variant:"bodySm",tone:"subdued",children:""})]})})})})]})}),children:e.jsx(ra,{resolve:Promise.allSettled([t.products,t.collections]),children:([y,b])=>{const v=y.status==="fulfilled"?y.value:[],C=b.status==="fulfilled"?b.value:[];return e.jsx(Wr,{products:v,collections:C,goldPrice:n,platinumPrice:i,selectedProductIds:a,savedSelectedProducts:r,selectedCollectionIds:l,savedSelectedCollections:p,shopSetting:u,forceRefresh:d,cacheTimestamp:m})}})})}export{Zr as default,Yr as shouldRevalidate};
